/* @created: Thu Aug 14 15:52:01 UTC+0800 2014*/
{
manifest : {
"name" : "dom","file" : "dom.json","version" : "3","description" : "","author" : "liu denggao","date" : "2014.08.14"
},
entity : {
"js.detect.shell.Browser" : "$package(\"js.detect.shell\");js.detect.shell.Browser=new function(){var Browser=this;var ua=navigator.userAgent.toLowerCase(),platform=navigator.platform.toLowerCase(),UA=ua.match(/(opera|ie|firefox|chrome|maxthon|version|rv)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|firefox|version[\\s\\/:]([\\w\\d\\.]+)|$)/)||[null,'unknown',0],UA_Engine=ua.match(/(trident|gecko|webkit|presto)[\\s\\/:]([\\w\\d\\.]+)?/)||[null,'unknown',0],mode=UA[1]=='ie'&&document.documentMode;this.name=(UA[1]=='version'||UA[1]=='rv')?UA[3]:UA[1];this.version=mode||parseFloat((UA[1]=='opera'&&UA[4])?UA[4]:UA[2]);this.fullVersion=mode||((UA[1]=='opera'&&UA[4])?UA[4]:UA[2]);this.Platform={name:ua.match(/ip(?:ad|od|hone)/)?'ios':(ua.match(/(?:webos|android)/)||platform.match(/mac|win|linux/)||['other'])[0]};this.Engine={name:UA_Engine[1],version:0,fullVersion:UA_Engine[2]};this.Request=function(){return $try(function(){return new XMLHttpRequest();},function(){return new ActiveXObject('MSXML2.XMLHTTP');},function(){return new ActiveXObject('Microsoft.XMLHTTP');});};this.Features={xhr:!!(this.Request()),xpath:!!(document.evaluate),air:!!(window.runtime),query:!!(document.querySelector),json:!!(window.JSON)};this.Supports={modalDialog:!!window.showModalDialog,modelessDialog:!!window.showModelessDialog}\nthis.Plugins={\"Flash\":(function(){var version=($try(function(){return navigator.plugins['Shockwave Flash'].description;},function(){return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');})||'0 r0').match(/\\d+/g);return{version:parseFloat(version[0]||'0.'+version[1])||0,build:parseFloat(version[2])||0};})()};this.exec=function(window,text){if(!text)return text;if(window.execScript){window.execScript(text);}else{var script=document.createElement('script');script.setAttribute('type','text/javascript');script.text=text;window.document.head.appendChild(script);window.document.head.removeChild(script);}\nreturn text;};if(UA[1]=='rv'&&Browser.Engine.name==\"trident\")Browser.name=\"ie\";this[Browser.name]=true;this[Browser.name+parseFloat(Browser.version)]=true;this.Platform[Browser.Platform.name]=true;{var setEngine=function(name,version){Browser.Engine.name=name;Browser.Engine[name]=true;Browser.Engine[name+parseFloat(version)]=true;Browser.Engine.version=parseFloat(version);Browser.Engine.fullVersion=version.toString();};if(Browser.Platform.ios)Browser.Platform.ipod=true;if(Browser.ie){if(Browser.Engine.name==\"unknown\")Browser.Engine.name=\"trident\";switch(Browser.version){case 6:Browser.Engine.fullVersion=\"3\";break;case 7:Browser.Engine.fullVersion=\"3.1\";break;}}else if(Browser.firefox){if(Browser.Engine.name==\"unknown\")Browser.Engine.name=\"gecko\";Browser.Engine.fullVersion=(ua.match(/\\(.*?[\\s\\b]*rv\\:([\\d\\.]+)[\\s\\b]*.*\\)/)||[null,\"0\"])[1];}else if(Browser.safari||Browser.chrome){if(Browser.Engine.name==\"unknown\")Browser.Engine.name=\"webkit\";}else if(Browser.opera){if(Browser.Engine.name==\"unknown\")Browser.Engine.name=\"presto\";}else if(Browser.name=='unknown'){switch((ua.match(/(?:webkit|khtml|gecko)/)||[])[0]){case'webkit':case'khtml':Browser.Engine.name=\"webkit\";break;case'gecko':Browser.Engine.name=\"gecko\";}}\nsetEngine(Browser.Engine.name,Browser.Engine.fullVersion);}}",
"js.dom.DOMTemplate" : "$package(\"js.dom\");js.dom.DOMTemplate=function(sCode){this._id=\"\";this._type=0;this._global=Global;this._processor;this._subs=[];this._subData=[];this._srcPath=\"\";this._source;this._target;this._isOnsiteOutput=false;this._DOMTemplate(sCode);};var _$class=js.dom.DOMTemplate;_$class.$name=\"DOMTemplate\";_$class.$extends(\"Object\");var _$proto=_$class.prototype;_$class._version=\"2.10\";_$class.newInstanceFromId=function(sId){var tpl=new this();tpl._DOMTemplateFromId(sId);return tpl;}\n_$class._newInstanceFromId=function(sId){var tpl=new this();tpl._type=1;tpl._DOMTemplateFromId(sId);return tpl;}\n_$class.newInstanceFromUrl=function(sUrl,isCache){var tpl=new this();tpl._DOMTemplateFromUrl(sUrl,isCache);return tpl;}\n_$class._newInstanceFromUrl=function(sUrl,isCache){var tpl=new this();tpl._type=1;tpl._DOMTemplateFromUrl(sUrl,isCache);return tpl;}\n_$class.newInstanceWithId=function(sId){var tpl=new this();tpl._DOMTemplateFromId(sId);return tpl;}\n_$class.newInstanceWithUrl=function(sUrl,isCache){var tpl=new this();tpl._DOMTemplateFromUrl(sUrl,isCache);return tpl;}\n_$proto._DOMTemplate=function(sCode){if(!sCode)return;this._DOMTemplateFromCode(sCode);}\n_$proto._DOMTemplateFromId=function(sId){var jsre=Engine.runtimeEnvironment;this._id=sId;var els=Global.dom(\"#\"+sId);if(!els.length)throw\"Element '\"+sId+\"' not found.\";this._source=els[0];this._srcPath=els[0].getAttribute(\"src\")?Global.getURIFullPath(jsre.getAppFullPath(),els[0].getAttribute(\"src\"),\"/\"):\"\";this._DOMTemplateFromCode(els[0].text||els[0].value\n||(this._srcPath&&Global.get(this._srcPath,\"\",false,\"\",\"Text\"))||\"\");}\n_$proto._DOMTemplateFromUrl=function(sUrl,isCache){var jsre=Engine.runtimeEnvironment;this._srcPath=Global.getURIFullPath(jsre.getAppFullPath(),sUrl,\"/\");this._DOMTemplateFromCode(Global.get((jsre._isLocal&&this._srcPath.charAt(0)==\"/\"?\"file://\":\"\")+this._srcPath,\"\",isCache||(isCache==undefined),\"\",\"Text\"));}\n_$proto._DOMTemplateFromCode=function(sCode){var codes=[];var jsre=Engine.runtimeEnvironment;var strs=Global.obj(sCode).xsplit(\"group\",[\"<%#\",\"%>\",\"<%=\",\"%>\",\"<%\",\"%>\",\"${\",\"}\",\"<!--#include\",\"-->\"]);var startOfHTML=\"\\t__views.push(\";var endOfHTML=\");\\n\";for(var i=0,iLen=strs.length;i<iLen;i++){switch(strs[i][0]){case\"\":codes.push(startOfHTML,Global.obj(strs[i][1]).serialize(),endOfHTML);break;case\"<%#%>\":break;case\"<%=%>\":codes.push(startOfHTML,strs[i][1],endOfHTML);break;case\"<%%>\":codes.push(strs[i][1]);break;case\"${}\":codes.push(startOfHTML,strs[i][1],endOfHTML);break;case\"<!--#include-->\":jsre.logger.log(\"parsing sub template...\");var attribs=strs[i][1].trim().match(/(src|data|para|maxLevels)=\\\"([^\\\"]+)\\\"/g);if(!attribs)break;attribs.forEach(function(item,index,array){var values=item.match(/^([^\\\"]+)=\\\"([^\\\"]+)\\\"$/)||[null,\"\",\"\"];attribs[values[1]]=values[2];},attribs);var maxLevels=parseInt(\"0\"+attribs.maxLevels,10);try{if(!attribs.src){if(this._type==1){var tpl1=this;}else if(this._id){var tpl1=this.getClass()._newInstanceFromId(this._id);}else{var tpl1=this.getClass()._newInstanceFromUrl(this._srcPath);}}else if(attribs.src.charAt(0)==\"#\"){if(this._type==1&&attribs.src.slice(1)==this._id){var tpl1=this;}else{var tpl1=this.getClass()._newInstanceFromId(attribs.src.slice(1));}}else{var srcTpl1=Global.getURIFullPath(!this._srcPath?jsre.getAppFullPath():this._srcPath.leftBack(\"/\"),attribs.src,\"/\");if(this._type==1&&srcTpl1.toLowerCase()==this._srcPath.toLowerCase()){jsre.logger.log(\"find same sub template.\");var tpl1=this;}else{var tpl1=this.getClass()._newInstanceFromUrl(srcTpl1,true);}}\nif(!attribs.data){this._subs.push(tpl1);codes.push(startOfHTML,\"this._subs[\\\"\"\n+(this._subs.length-1)+\"\\\"].parse(json,'','',\"\n+(maxLevels?(\"Math.min(_$maxLevels-1,\"+maxLevels+\")\"):\"_$maxLevels-1\")+\")\",endOfHTML);}else if(/\\$\\{[^\\$\\{\\}]*\\}/.test(attribs.data)){this._subs.push(tpl1);codes.push(startOfHTML,\"this._subs[\\\"\"+(this._subs.length-1)+\"\\\"].parse(\"+attribs.data.match(/^\\$\\{([^\\$\\{\\}]*)\\}$/).pop()+\",'','',\"\n+(maxLevels?(\"Math.min(_$maxLevels-1,\"+maxLevels+\")\"):\"_$maxLevels-1\")+\")\",endOfHTML);}else if(attribs.para&&/\\$\\{[^\\$\\{\\}]*\\}/.test(attribs.para)){var para=attribs.para.match(/^\\$\\{([^\\$\\{\\}]*)\\}$/).pop();var url=!this._srcPath?attribs.data:Global.getURIFullPath(this._srcPath.leftBack(\"/\")||jsre.getAppFullPath(),attribs.data,\"/\");this._subs.push(tpl1);codes.push(startOfHTML,\"this._subs[\\\"\"+(this._subs.length-1)+\"\\\"].parse(this._global.get('\"+url+\"',\"+para+\",false,'','json'),'','',\"\n+(maxLevels?(\"Math.min(_$maxLevels-1,\"+maxLevels+\")\"):\"_$maxLevels-1\")+\",\"+para+\")\",endOfHTML);}else{try{var para=attrib.para?({data:attribs.para}):\"\";var data=Global.get(!this._srcPath?attribs.data:Global.getURIFullPath(this._srcPath.leftBack(\"/\")||jsre.getAppFullPath(),attribs.data,\"/\"),para,false,\"\",\"json\");}catch(e){}\nif(data)codes.push(startOfHTML,Global.obj(tpl1.parse(data,'','',maxLevels?Math.min(9,maxLevels):9,attribs.para)).serialize(),endOfHTML);}}catch(e){jsre.logger.log(\"DOM Temlate '\"+(this._id||this._srcPath||\"(noname)\")+\"' has been created fail!\\n\\t Error: \"+(e.message||e),true);}\nbreak;}}\nthis._processor=new Function(\"$json\",\"$para\",\"_$maxLevels\",\"var __views = [];\\n with($json){\"+codes.join(\"\")+'};return __views.join(\"\");');}\n_$class.defaultMaxLevels=10;_$class.AllowSettingMaxLevels=100;_$proto.getId=function(){return this._id;}\n_$proto.setId=function(value){this._id=value;}\n_$proto.getUrl=function(){return this._srcPath;}\n_$proto.getTarget=function(){return this._target;}\n_$proto.setTarget=function(value){this._target=value;}\n_$proto.getIsOnsiteOutput=function(){return this._isOnsiteOutput;}\n_$proto.setIsOnsiteOutput=function(value){this._isOnsiteOutput=value;}\n_$class.parse=function(){var argLen=arguments.length;if(argLen==1){if(Global.isArray(arguments[0])){if(Global.isArray(arguments[0].getFirst())){this._parseTmpls(arguments[0]);}else{this._parseBlocks(arguments[0]);}}else if(typeof(arguments[0])==\"object\"){this._parseBlock(arguments[0]);}}else if(argLen>1){this._parseTmpl.apply(this,arguments);}}\n_$class._parseTmpl=function(tmpl,json,vOutput,fnInit,maxLevels){if(typeof(tmpl)!=\"string\"){}else if(tmpl.slice(0,1)==\"#\"){tmpl=this.newInstanceFromId(tmpl);}else{tmpl=this.newInstanceFromUrl(tmpl);}\nreturn tmpl.parse(json,vOutput,fnInit,maxLevels);}\n_$class._parseTmpls=function(tmplsParas){for(var i=0,iLen=tmplsParas.length;i<iLen;i++){this.parse.apply(this,tmplsParas[i]);}}\n_$class._parseBlock=function(tagBlock){var attribs=[\"template\",\"target\",\"data\",\"dataType\",\"maxLevels\"];var para=attribs.associate(attribs.map(function(attribName){return tagBlock.getAttribute(attribName);}));para.text=tagBlock.text;if(!para.template||!para.data)return;if(para.template.slice(0,1)==\"#\"){var tmpl=this.newInstanceFromId(para.template.slice(1));}else{var tmpl=this.newInstanceFromUrl(para.template);}\nif(!para.target){tmpl.setIsOnsiteOutput(true);tmpl.setTarget(tagBlock);}else if(para.target.slice(0,1)==\"#\"){tmpl.setIsOnsiteOutput(true);tmpl.setTarget(Global.dom(para.target).getFirst());}\nvar func=para.text?Global.globalEval(\"(function(){return function(container,json){\"+para.text+\"};})()\",null,true):\"\";if(para.data.slice(0,1)==\"$\"){var data=Global.globalEval(para.data.middle(\"${\",\"}\",1),null,true);data=para.dataType==\"xml\"&&Global.xml2json(data)||data;tmpl.parse(data,\"\",func,para.maxLevels?parseInt(para.maxLevels,10):undefined);}else{Global.get(para.data,\"\",false,function(data1){data1=para.dataType==\"xml\"&&Global.xml2json(data1)||data1;tmpl.parse(data1,\"\",func,para.maxLevels?parseInt(para.maxLevels,this.defaultMaxLevels):undefined);},para.dataType||\"json\");}}\n_$class._parseBlocks=function(tagBlocks){for(var i=0,iLen=tagBlocks.length;i<iLen;i++){this._parseBlock(tagBlocks[i]);}}\n_$proto.parse=function(json,vOutput,fnInit,iMaxLevels,para){var jsre=Engine.runtimeEnvironment;iMaxLevels=Math.min(iMaxLevels==undefined?this.getClass().defaultMaxLevels:iMaxLevels,this.getClass().AllowSettingMaxLevels);try{if(iMaxLevels<=0)return;var sCode=this._processor(json||{},para,iMaxLevels);var oOutput;if(vOutput){if(typeof(vOutput)==\"string\"){oOutput=Global.dom(\"#\"+vOutput)[0];}else{oOutput=vOutput;}}else if(this._target){oOutput=this._target;}else if(this._isOnsiteOutput){oOutput=this._source;}\nif(!oOutput){return sCode;}else if(this._isOnsiteOutput){var parser=document.createElement(\"div\");var fragment=document.createDocumentFragment();parser.innerHTML=sCode;while(parser.firstChild){fragment.appendChild(parser.firstChild);}\nvar nodes=fragment.$childNodes||fragment.childNodes;var container=nodes.length>1?nodes:(nodes.length==1?nodes[0]:null);oOutput.parentNode.replaceChild(fragment,oOutput);oOutput=container;}else{oOutput.innerHTML=sCode;}\nif(typeof(fnInit)==\"function\"){try{fnInit(oOutput,json);}catch(e){jsre.logger.log(\"DOM Temlate '\"+(this._id||this._srcPath||\"(noname)\")+\"' has initialized fail in parsing!\\n\\t Error: \"+(e.message||e),true);}}}catch(e){jsre.logger.log(\"DOM Temlate '\"+(this._id||this._srcPath||\"(noname)\")+\"' has parsed fail!\\n\\t Error: \"+(e.message||e),true);}\nreturn sCode;}",
"js.dom.DOMWindow" : "$package(\"js.dom\");js.dom.DOMWindow=function(){};var _$class=js.dom.DOMWindow;var _$proto=_$class.prototype;_$class.$name=\"DOMWindow\";_$class.getName=function(){return this.$name;}\n_$proto.getContentWidth=function(){return Math.max(this.document.body.clientWidth,this.document.documentElement.clientWidth);}\n_$proto.getContentHeight=function(){return Math.max(this.document.body.clientHeight,this.document.documentElement.clientHeight);}\n_$proto.showModalDialog=function(sURL,vArguments,sFeatures,fnCallBack){var window=this;var retVal;switch(typeof(this.__showModalDialog__)){case\"object\":if(this.__showModalDialog__.apply)retVal=this.__showModalDialog__.apply(this,arguments);else\nretVal=this.__showModalDialog__(sURL,vArguments,sFeatures);if(typeof(fnCallBack)==\"function\"){try{fnCallBack(null,retVal);}catch(e){}}\nbreak;case\"function\":retVal=this.__showModalDialog__.apply(this,arguments);if(typeof(fnCallBack)==\"function\"){try{fnCallBack(null,retVal);}catch(e){}}\nbreak;default:if(!this.__$activeDialog){this.__$activeDialogParameter={dialogMode:1,opener:window,arguments:vArguments,onCompleted:function(){var wDialog=this.opener.__$activeDialog;var vReturnValue=wDialog.returnValue;this.opener.__$activeDialog=null;if(typeof(fnCallBack)==\"function\"){setTimeout(function(){try{fnCallBack(wDialog,vReturnValue);}catch(e){}},0);}}}\nthis.__$activeDialog=this.open(sURL,\"ModalDialog\"\n,sFeatures.replace(/dialog/g,\"\").replace(/\\;/g,\",\").toLowerCase(),true);}else{this.__$activeDialog.focus();}}\nreturn retVal;}\n_$proto.$showModalDialog=function(sURL,vArguments,sFeatures,fnCallBack){var window=this;var retVal;switch(typeof(this.__showModalDialog__)){case\"object\":if(this.__showModalDialog__.apply)retVal=this.__showModalDialog__.apply(this,arguments);else\nretVal=this.__showModalDialog__(sURL,vArguments,sFeatures);if(typeof(fnCallBack)==\"function\"){try{fnCallBack(null,retVal);}catch(e){}}\nbreak;case\"function\":retVal=this.__showModalDialog__.apply(this,arguments);if(typeof(fnCallBack)==\"function\"){try{fnCallBack(null,retVal);}catch(e){}}\nbreak;default:if(!this.__$activeDialog){this.__$activeDialogParameter={dialogMode:1,opener:window,arguments:vArguments,onCompleted:function(){var wDialog=this.opener.__$activeDialog;var vReturnValue=wDialog.returnValue;this.opener.__$activeDialog=null;if(typeof(fnCallBack)==\"function\"){setTimeout(function(){try{fnCallBack(wDialog,vReturnValue);}catch(e){}},0);}}}\nthis.__$activeDialog=this.open(sURL,\"ModalDialog\"\n,sFeatures.replace(/dialog/g,\"\").replace(/\\;/g,\",\").toLowerCase(),true);}else{this.__$activeDialog.focus();}}\nreturn retVal;}\n_$proto.$$showModalDialog=function(sURL,vArguments,sFeatures,fnCallBack){var window=this;var retVal;if(!this.__$activeDialog){this.__$activeDialogParameter={dialogMode:1,opener:window,arguments:vArguments,onCompleted:function(){var wDialog=this.opener.__$activeDialog;var vReturnValue=wDialog.returnValue;this.opener.__$activeDialog=null;if(typeof(fnCallBack)==\"function\"){setTimeout(function(){try{fnCallBack(wDialog,vReturnValue);}catch(e){}},0);}}}\nthis.__$activeDialog=this.open(sURL,\"ModalDialog\"\n,sFeatures.replace(/dialog/g,\"\").replace(/\\;/g,\",\").toLowerCase(),true);}else{this.__$activeDialog.focus();}\nreturn retVal;}\n_$proto.close=function(){if(this.opener&&this.opener.__$activeDialog==this&&this.opener.__$activeDialogParameter\n&&this.opener.__$activeDialogParameter.dialogMode==1){this.opener.__$activeDialogParameter.onCompleted();}\nthis.__close__();}\n_$proto.$close=function(){if(this.opener&&this.opener.__$activeDialog==this&&this.opener.__$activeDialogParameter\n&&this.opener.__$activeDialogParameter.dialogMode==1){this.opener.__$activeDialogParameter.onCompleted();}\nif(this.__close__)this.__close__();else this.close();}",
"js.dom.DOMElement" : "$package(\"js.dom\");js.dom.DOMElement=function(oObj){this.__srcObj=oObj;};var _$class=js.dom.DOMElement;_$class.$extends(\"Object\");var _$proto=_$class.prototype;_$class.$name=\"DOMElement\";_$class.getName=function(){return this.$name;}\n_$proto.getFirstChild=function(){var childNodes=this.childNodes;for(var i=0,len=childNodes.length;i<len;i++){if(childNodes[i].nodeName==\"#text\")continue;return childNodes[i];}}\n_$proto.getNextSibling=function(){var el;if(!this.nextSibling){return null;}else if(this.nextSibling.nodeType==3){el=this.nextSibling.nextSibling;}else{el=this.nextSibling;}\nreturn el;}\n_$proto.getPreviousSibling=function(){var el;if(!this.previousSibling){return null;}else if(this.previousSibling.nodeType==3){el=this.previousSibling.previousSibling;}else{el=this.previousSibling;}\nreturn el;}\n_$proto.getLastChild=function(){var childNodes=this.childNodes;for(var i=childNodes.length-1;i>=0;i--){if(childNodes[i].nodeName==\"#text\")continue;return childNodes[i];}}\n_$proto.getText=function(){return this.text.replace(/^(\\n|\\r)/,\"\");}",
"js.dom.HTML" : "$package(\"js.dom\");js.dom.HTML={}\nvar _$class=js.dom.HTML;_$class._resPath=Engine.runtimeEnvironment.getResPath(\"js.dom\");_$class.getScreenLeft=function(elObj){var left=window.screenLeft;for(var node=elObj;node&&typeof(node.offsetLeft)!=\"undefined\";node=node.offsetParent){left+=node.offsetLeft;}\nleft-=document.body.scrollLeft;return left+2;}\n_$class.getScreenTop=function(elObj){var top=window.screenTop;var offset=0;for(var oWindow=window;;oWindow=oWindow.parent){if(oWindow.frameElement&&oWindow.frameElement.nodeName==\"IFRAME\"){offset+=this.getTopOnWindow(oWindow.frameElement);}\nif(oWindow==oWindow.parent)break;}\ntop-=offset;for(var node=elObj;node&&typeof(node.offsetTop)!=\"undefined\";node=node.offsetParent){top+=node.offsetTop;}\ntop-=document.body.scrollTop;return top+2;}\n_$class.getScreenRight=function(elObj){return this.getScreenLeft(elObj)+this.getWindowWidth(elObj)-1;}\n_$class.getScreenBottom=function(elObj){return this.getScreenTop(elObj)+this.getWindowHeight(elObj)-1;}\n_$class.getWindowWidth=function(elObj){var width=elObj.offsetWidth;return width;}\n_$class.getWindowHeight=function(elObj){var height=elObj.offsetHeight;return height;}\n_$class.getDocHeight=function(doc){if(Global.Browser.Engine.trident){if(doc.compatMode!=\"CSS1Compat\"){return doc.body.scrollHeight;}else{return doc.documentElement.scrollHeight;}}else{return doc.documentElement.offsetHeight;}}\n_$class.getLeftOnDoc=function(elObj){var retValue=0;for(;elObj;elObj=elObj.offsetParent){retValue+=elObj.offsetLeft;}\nreturn retValue;}\n_$class.getTopOnDoc=function(elObj){var retValue=0;for(;elObj;elObj=elObj.offsetParent){retValue+=elObj.offsetTop;}\nreturn retValue;}\n_$class.getRightOnDoc=function(elObj){return this.getLeftOnDoc(elObj)+this.getWindowWidth(elObj)-1;}\n_$class.getBottomOnDoc=function(elObj){return this.getTopOnDoc(elObj)+this.getWindowHeight(elObj)-1;}\n_$class.contains=function(elWrap,elChild){while(elChild&&typeof(elChild.parentNode)!=\"undefined\"){if(elWrap==elChild)return true;elChild=elChild.parentNode;}\nreturn false;};_$class.setStyleClass=function(elObj,iOptions,className,className1){var aClasses=elObj.getAttribute(\"class\").split(\" \").trim();var index=aClasses.findElement(className,true);switch(iOptions){case undefined:case 0:if(index>=0){return;}else{aClasses.addElement(className);elObj.className=aClasses.join(\" \");}\nbreak;case 1:if(index>=0){aClasses.removeElement(index);elObj.className=aClasses.join(\" \");}\nbreak;case 2:if(index>=0){aClasses[index]=className;elObj.className=aClasses.join(\" \");}else{aClasses.addElement(className);elObj.className=aClasses.join(\" \");}\nbreak;case 3:if(index>=0){aClasses[index]=className1;elObj.className=aClasses.join(\" \");}else if(aClasses.findElement(className1,true)<0){aClasses.addElement(className1);elObj.className=aClasses.join(\" \");}\nbreak;}}\n_$class.setInnerHTML=function(el,htmlCode){if(Browser.Engine.name==\"trident\"){htmlCode='<div style=\"display:none\">for IE</div>'+htmlCode;htmlCode=htmlCode.replace(/<script([^>]*)>/gi,'<script$1 defer>');el.innerHTML='';el.innerHTML=htmlCode;el.removeChild(el.firstChild);}else{var el_next=el.nextSibling;var el_parent=el.parentNode;el_parent.removeChild(el);el.innerHTML=htmlCode;if(el_next){el_parent.insertBefore(el,el_next);}else{el_parent.appendChild(el);}}}\n_$class.getTextCursorPosition=function(el,isRichText){try{el.focus();}catch(e){}\nif(!isRichText){if(document.selection){var rngSel=document.selection.createRange();if(rngSel.parentElement()!=el)return;var rngTxt=document.body.createTextRange();rngTxt.moveToElementText(el);var start=-1;for(start=0;rngTxt.compareEndPoints(\"StartToStart\",rngSel)<0;start++){rngTxt.moveStart('character',1);}\nreturn start;}else if(typeof(el.selectionStart)==\"number\"){return el.selectionStart;}}else{if(document.selection){var rngSel=document.selection.createRange();var rngTxt=document.body.createTextRange();rngTxt.moveToElementText(el);var start=-1;for(start=0;rngTxt.compareEndPoints(\"StartToStart\",rngSel)<0;start++){rngTxt.moveStart('character',1);}\nreturn start;}else if(window.getSelection){}}\nreturn-1;}\n_$class.setTextCursorPosition=function(el,isRichText,pos){if(!isRichText){if(el.setSelectionRange){el.focus();el.setSelectionRange(pos,pos);}else if(el.createTextRange){var range=el.createTextRange();range.collapse(true);range.moveEnd('character',pos);range.moveStart('character',pos);range.select();}}else{if(document.selection){var range=document.body.createTextRange();range.moveToElementText(el);range.collapse(true);range.moveEnd('character',pos);range.moveStart('character',pos);range.select();}else{}}}\n_$class.getSelectionPositions=function(el,isRichText){try{el.focus();}catch(e){}\nif(document.selection){var rngSel=document.selection.createRange();var rngTxt=document.body.createTextRange();rngTxt.moveToElementText(el);var start=-1;for(start=0;rngTxt.compareEndPoints(\"StartToStart\",rngSel)<0;start++){rngTxt.moveStart('character',1);}\nvar rngTxt=document.body.createTextRange();rngTxt.moveToElementText(el);var end=-1;for(end=0;rngTxt.compareEndPoints('StartToEnd',rngSel)<0;end++){rngTxt.moveStart('character',1);}\nreturn[start,end];}else if(typeof(el.selectionStart)==\"number\"){return[el.selectionStart,el.selectionEnd];}else{}}\n_$class.insertText=function(el,text,pos){if(pos!=undefined)this.setTextCursorPosition(el,false,pos);try{el.focus();}catch(e){}\nif(document.selection){var tR=document.selection.createRange();tR.text=text;}else if(typeof(el.selectionStart)==\"number\"){pos=pos!=undefined?pos:el.selectionStart;var pre=el.value.substr(0,el.selectionStart);var post=el.value.substr(el.selectionEnd);el.value=pre+text+post;this.setTextCursorPosition(el,false,pos+text.length);}}\n_$class.insertHTML=function(el,html,pos){if(pos!=undefined)this.setTextCursorPosition(pos,true,pos);try{el.focus();}catch(e){}\nif(document.selection){var tR=document.selection.createRange();tR.pasteHTML(html);}else{document.execCommand(\"insertHTML\",false,html);}}\n_$class.copyToClipboard=function(text){if(window.clipboardData){window.clipboardData.clearData();clipboardData.setData(\"Text\",text);}else if(navigator.userAgent.indexOf(\"Opera\")!=-1){window.location=text;}else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege(\"UniversalXPConnect\");}catch(e){alert(\"\\u88ab\\u6d4f\\u89c8\\u5668\\u62d2\\u7edd\\uff01\\n\\u8bf7\\u5728\\u6d4f\\u89c8\\u5668\\u5730\\u5740\\u680f\\u8f93\\u5165'about:config'\\u5e76\\u56de\\u8f66\\n\\u7136\\u540e\\u5c06 'signed.applets.codebase_principal_support'\\u8bbe\\u7f6e\\u4e3a'true'\");}\nvar clip=Components.classes['@mozilla.org/widget/clipboard;1'].createInstance(Components.interfaces.nsIClipboard);if(!clip)return;var trans=Components.classes['@mozilla.org/widget/transferable;1'].createInstance(Components.interfaces.nsITransferable);if(!trans)return;trans.addDataFlavor(\"text/unicode\");var str=new Object();var len=new Object();var str=Components.classes[\"@mozilla.org/supports-string;1\"].createInstance(Components.interfaces.nsISupportsString);var copytext=text;str.data=copytext;trans.setTransferData(\"text/unicode\",str,copytext.length*2);var clipid=Components.interfaces.nsIClipboard;if(!clip)return false;clip.setData(trans,null,clipid.kGlobalClipboard);}}\n_$class.pasteText=function(event,fnText,callback){var _this=this;if(window.clipboardData){event.returnValue=false;try{var data=window.clipboardData.getData(\"Text\");var data1=!!fnText?(fnText(data)||\"\"):data;this.insertText(event.srcElement,data1);if(callback)callback(data1,data);}catch(e){}}else if(event.clipboardData){event.returnValue=false;try{var data=event.clipboardData.getData(\"text/plain\");var data1=!!fnText?(fnText(data)||\"\"):data;this.insertHTML(event.srcElement,data1);if(callback)callback(data1,data);}catch(e){}}else{var div=document.body.appendChild(document.createElement(\"div\"));div.style.width=\"1px\";div.style.height=\"1px\";div.style.overflow=\"hidden\";div.style.position=\"absolute\";div.style.top=\"-1000px\";div.contentEditable=\"true\";div.style.backgroundColor='red';div.innerHTML=\"\";div.focus();var srcElement=event.srcElement;window.setTimeout(function(){try{var data=div.textContent;var data1=!!fnText?(fnText(data)||\"\"):data;document.body.removeChild(div);_this.insertHTML(srcElement,data1);if(callback)callback(data1,data);}catch(e){}},0);}}\n_$class.pasteHTML=function(event,fnHtml,callback){}",
"js.dom.HTMLElement" : "$package(\"js.dom\");$import(\"js.dom.DOMElement\");js.dom.HTMLElement=function(oObj){this.__srcObj=oObj;};var _$class=js.dom.HTMLElement;_$class.$extends(js.dom.DOMElement);var _$proto=_$class.prototype;_$class.$name=\"HTMLElement\";_$class.getName=function(){return this.$name;}\n_$proto.$get=function(id){}\n_$proto.$all=function(){}",
"js.dom.HTMLDocument" : "$package(\"js.dom\");$import(\"js.dom.HTMLElement\");js.dom.HTMLDocument=function(){};var _$class=js.dom.HTMLDocument;var _$proto=_$class.prototype;_$class.$name=\"HTMLDocument\";_$class.getName=function(){return this.$name;}\n_$proto.$all=function(id){var document=this;var aValues=[];var retValues=[];if(typeof(id)==\"string\"){var el=document.getElementById(id);var els=document.getElementsByName(id);if(el)aValues=aValues.concat(el);if(els.length)aValues=aValues.addElementsFromOther(els);aValues=aValues.unique();}else{aValues[0]=id;}\nfor(var i=0;i<aValues.length;i++){if(!aValues[i].constructor){retValues[i]=__JSDK_Namespace__.js.dom.HTMLElement.applyInstance(aValues[i],\"instance\",true);}else if(!aValues[i].$class){retValues[i]=__JSDK_Namespace__.js.dom.HTMLElement.applyInstance(aValues[i],\"implement\",true);}}\nif(retValues.length==0){return undefined;}else if(retValues.length==1){return retValues[0];}else{return retValues;}}\n_$proto.$get=function(id){var document=this;var els=[];if(typeof(id)==\"string\"){var el=document.getElementById(id);if(el)els[0]=el;else els=document.getElementsByName(id);}else{els[0]=id;}\nif(!els.length||!els[0]){return null;}else if(!els[0].constructor){return __JSDK_Namespace__.js.dom.HTMLElement.applyInstance(els[0],\"instance\",true);}else if(!els[0].$class){return __JSDK_Namespace__.js.dom.HTMLElement.applyInstance(els[0],\"implement\",true);}else{return els[0];}\nreturn null;}\n_$proto.$fireEvent=function(oEl,sEvtName,oEvent){var sEvtShortName=sEvtName.replace(/^on/,\"\");var sEvtFullName=\"on\"+sEvtShortName;if(oEl[sEvtShortName]&&sEvtShortName==sEvtName)oEl[sEvtShortName]();else if(oEl.fireEvent)oEl.fireEvent(sEvtFullName,oEvent);else if(this.createEvent){if(!oEvent)oEvent=this.createEvent(\"Events\");var evt=null;if(oEvent.constructor==Event){evt=this.createEvent(\"Events\");evt.initEvent(sEvtShortName,oEvent.bubbles,oEvent.cancelable);}else if(oEvent.constructor==MouseEvent){evt=this.createEvent(\"MouseEvents\");evt.initMouseEvent(sEvtShortName,oEvent.bubbles,oEvent.cancelable,oEvent.view,oEvent.detail,oEvent.screenX,oEvent.screenY,oEvent.clientX,oEvent.clientY,oEvent.ctrlKey,oEvent.altKey,oEvent.shiftKey,oEvent.metaKey,oEvent.button,oEvent.relatedTarget\n);}else if(oEvent.constructor==UIEvent){evt=this.createEvent(\"UIEvents\");evt.initUIEvent(sEvtShortName,oEvent.bubbles,oEvent.view,oEvent.detail);}else{return;}\noEl.dispatchEvent(evt);}}\n_$proto.$importBehavior=function(sSelector,srcBehaviors){var jsre=Engine.runtimeEnvironment;var rootHome=jsre.getRootHome();var localeLanuage=jsre.getLocaleLanguage();var behaviors=[];if(isArray(srcBehaviors)){behaviors=srcBehaviors;}else{behaviors=[srcBehaviors];}\nswitch(Browser.Engine.name){case\"trident\":var styleSheet=this.createStyleSheet();for(var i=0;i<behaviors.length;i++){if(!behaviors[i].split(\"/\")[0].equal([\"\",\".\",\"..\"])){var baseFilePath=rootHome+\"/shell/webbrowser/IE/widgets/\"+behaviors[i];if(baseFilePath.rightback(\".\").toLowerCase()!=\"htc\"){var filePath=baseFilePath+(localeLanuage?(\"_\"+localeLanuage):\"\")+\".htc\";if(localeLanuage&&!jsre.isFileExists(filePath)){filePath=baseFilePath+\".htc\";}\nbehaviors[i]=filePath;}else{behaviors[i]=baseFilePath;}}}\nstyleSheet.addRule(sSelector,\"behavior:url('\"+behaviors.join(\"') url('\")+\"')\");break;case\"gecko\":var basePath=\"\",commonFileName=\"\";fileName=\"\";for(var i=0;i<behaviors.length;i++){switch(behaviors[i].split(\"/\")[0]){case\"\":break;case\".\":behaviors[i]=\"../../../../\"+jsre.getAppRelPath()+\"/\"+behaviors[i].right(\"/\");break;case\"..\":behaviors[i]=\"../../../../\"+jsre.getAppRelPath()+\"/\"+behaviors[i];break;default:basePath=rootHome+\"/shell/webbrowser/Firefox/widgets\";fileName=behaviors[i].split(\"/\").pop();commonFileName=fileName.split(\".\")[0];if(fileName.rightback(\".\").toLowerCase()!=\"htc\"){fileName=commonFileName+(localeLanuage?(\"_\"+localeLanuage):\"\")+\".htc\";if(localeLanuage&&!jsre.isFileExists([basePath,fileName].join(\"/\"))){fileName=commonFileName+\".htc\";}}\nbehaviors[i]=\"../widgets/\"+fileName;}}\nvar style=this.getElementsByTagName(\"head\")[0].appendChild(this.createElement(\"style\"));style.type='text/css';style.appendChild(document.createTextNode(sSelector+\"{-moz-binding:url(\"\n+rootHome+\"/shell/webbrowser/firefox/patch/moz-behaviors.xml?\"\n+behaviors.join(\":\")+\"/#behavior)}\"\n));break;}}",
"js.dom.HTMLForm" : "$package(\"js.dom\");js.dom.HTMLForm=function(){};var _$class=js.dom.HTMLForm;_$class.$extends(\"Object\");var _$proto=_$class.prototype;_$class.version=\"2.5\";_$proto._localeResource={\"pleaseInput\":\"\\u8acb\\u9078\\u64c7\\u6216\\u8f38\\u5165\\\"{0}\\\"!\",\"isnotNumber\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u662f\\u6578\\u5b57\\uff01\",\"isnotDate\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u662f\\u65e5\\u671f\\uff01\",\"canotLess\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u80fd\\u5c0f\\u4e8e{1}!\",\"canotGreater\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u80fd\\u5927\\u4e8e{1}!\",\"canotEarly\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u80fd\\u65e9\\u4e8e\\\"{1}\\\"!\",\"canotLate\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u80fd\\u665a\\u4e8e\\\"{1}\\\"!\",\"canotLessWords\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u6587\\u672c\\u5b57\\u6578\\u4e0d\\u80fd\\u5c11\\u4e8e{1}\\u500b!\",\"canotGreaterWords\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u6587\\u672c\\u5b57\\u6578\\u4e0d\\u80fd\\u591a\\u4e8e{1}\\u500b!\",\"atLeastItems\":\"\\u60a8\\u81f3\\u5c11\\u8981\\u9078\\u64c7{0}\\u500b\\\"{1}\\\"!\",\"atMostItems\":\"\\u60a8\\u81f3\\u591a\\u80fd\\u9078\\u64c7{0}\\u500b\\\"{1}\\\"!\",\"errIsNotUniqueElement\":\"\\u7372\\u53d6\\u8868\\u55ae\\u9805\\u503c\\u932f\\u8aa4!\\u6a19\\u8b58\\u7232\\\"{0}\\\"\\u7684\\u6587\\u6a94\\u5143\\u7d20\\u4e26\\u4e0d\\u552f\\u4e00!\",\"errNotSupportElementType\":\"\\u7372\\u53d6\\u8868\\u55ae\\u9805\\u503c\\u932f\\u8aa4!\\u8a72\\u529f\\u80fd\\u4e0d\\u652f\\u6301\\u985e\\u578b\\u70ba\\\"{0}\\\"\\u7684\\u5143\\u7d20!\"}\n_$proto._getLocale=function(key,value){var strObj=Global.Object(this._localeResource[key]);return strObj.format.apply(strObj,Global.js.lang.natives.Array.from(arguments).slice(1)).valueOf();}\n_$proto.checkForm=function(){return this.checkElements(this.getAllElements(),true);}\n_$proto.checkItem=function(sName,enableExpValid){var elements;if(this._elements){elements=this._elements[sName]?[this._elements[sName]]:[];}else{elements=this.getElements(sName);}\nreturn this.checkElements(elements,enableExpValid);}\n_$proto.checkElements=function(elements,enableExpValid){var aElements=[];for(var i=0;i<elements.length;i++){var obj=elements[i];var sName=obj.name||obj.id;var element=obj.tagName&&obj||sName&&this.getElement(sName);if(!sName||!this.hasItem(sName))continue;if(element.disabled)continue;if(element.type==\"hidden\")continue;aElements.push(obj);}\nelements=aElements;for(var i=0;i<elements.length;i++){var obj=elements[i];var sName=obj.name||obj.id;var vValue=this.getItemValue(sName);if((!Global.isArray(vValue)&&vValue==\"\")||(Global.isArray(vValue)&&vValue.join(\"\")==\"\")){if(typeof(obj.allowEmpty)==\"boolean\"&&!obj.allowEmpty){if(obj.unfilledPrompt)alert(obj.unfilledPrompt);else alert(this._getLocale(\"pleaseInput\",obj.label));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}else{continue;}}\nswitch(obj.dataType){case\"Text\":break;case\"Number\":if(isNaN(vValue)){alert(this._getLocale(\"isnotNumber\",obj.label));this.clearItemValue(sName);try{this.getElement(sName).focus();}catch(e){}\nreturn false;}\nbreak;case\"Date\":if(isNaN(new Global.js.lang.natives.Date(vValue.replace(/-/g,\"/\").replace(/\\./g,\"/\")))){alert(this._getLocale(\"isnotDate\",obj.label));this.clearItemValue(sName);try{this.getElement(sName).focus();}catch(e){}\nreturn false;}\nbreak;}}\nfor(var i=0;i<elements.length;i++){var obj=elements[i];var sName=obj.name||obj.id;var vValue=this.getItemValue(sName);if(Global.isEmpty(vValue)){}else if((obj.minValue==\"\"||obj.minValue==undefined)&&(obj.maxValue==\"\"||obj.maxValue==undefined)){}else{switch(obj.dataType){case\"Text\":if(!Global.isArray(vValue)){if((obj.maxValue==\"\"||obj.maxValue==undefined)&&vValue.length<obj.minValue){if(obj.unmatchedPrompt)alert(obj.unmatchedPrompt);else alert(this._getLocale(\"canotLessWords\",obj.label,obj.minValue));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}else if((obj.minValue==\"\"||obj.minValue==undefined)&&vValue.length>obj.maxValue){if(obj.unmatchedPrompt)alert(obj.unmatchedPrompt);else alert(this._getLocale(\"canotGreaterWords\",obj.label,obj.minValue));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}}else{if((obj.maxValue==\"\"||obj.maxValue==undefined)&&vValue.length<obj.minValue){if(obj.unmatchedPrompt)alert(obj.unmatchedPrompt);else alert(this._getLocale(\"atLeastItems\",obj.minValue,obj.label));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}else if((obj.minValue==\"\"||obj.minValue==undefined)&&vValue.length>obj.maxValue){if(obj.unmatchedPrompt)alert(obj.unmatchedPrompt);else alert(this._getLocale(\"atMostItems\",obj.maxValue,obj.label));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}}\nbreak;case\"Number\":var iValue=Global.js.lang.natives.Number(vValue);var minValue=obj.minValue;var maxValue=obj.maxValue;if(!Global.isEmpty(minValue)){if(typeof(minValue)==\"string\"&&minValue.indexOf(\"->#\")==0){var fromValue=this.getItemValue(minValue.rightBack(\"->#\"));if(!Global.isEmpty(fromValue))minValue=Global.js.lang.natives.Number(fromValue);else minValue=undefined;}else if(Global.isNumber(minValue)){minValue=Global.js.lang.natives.Number(minValue);}\nif(Global.isNumber(minValue)&&iValue<minValue){if(obj.unmatchedPrompt)alert(obj.unmatchedPrompt);else alert(this._getLocale(\"canotLess\",obj.label,minValue));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}}\nif(!Global.isEmpty(maxValue)){if(typeof(maxValue)==\"string\"&&maxValue.indexOf(\"->#\")==0){var toValue=this.getItemValue(maxValue.rightBack(\"->#\"));if(!Global.isEmpty(toValue))maxValue=Global.js.lang.natives.Number(toValue);else maxValue=undefined;}else if(Global.isNumber(maxValue)){maxValue=Global.js.lang.natives.Number(maxValue);}\nif(Global.isNumber(maxValue)&&iValue>maxValue){if(obj.unmatchedPrompt)alert(obj.unmatchedPrompt);else alert(this._getLocale(\"canotGreater\",obj.label,maxValue));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}}\nbreak;case\"Date\":var dtValue=new Global.js.lang.natives.Date(vValue.replace(/-/g,\"/\").replace(/\\./g,\"/\"));var sMinValue=obj.minValue;var minValue=obj.minValue;var sMaxValue=obj.maxValue;var maxValue=obj.maxValue;if(!Global.isEmpty(minValue)){if(typeof(minValue)==\"string\"&&minValue.indexOf(\"->#\")==0){var sMinValue=this.getItemValue(minValue.rightBack(\"->#\"));if(!Global.isEmpty(sMinValue))minValue=new Global.js.lang.natives.Date(sMinValue.replace(/-/g,\"/\").replace(/\\./g,\"/\"));else minValue=undefined;}else if(Global.isDate(minValue)){if(typeof(minValue)==\"string\")minValue=new Global.js.lang.natives.Date(minValue.replace(/-/g,\"/\").replace(/\\./g,\"/\"));}\nif(Global.isDate(minValue)&&dtValue<minValue){if(obj.unmatchedPrompt)alert(obj.unmatchedPrompt);else alert(this._getLocale(\"canotEarly\",obj.label,sMinValue));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}}\nif(!Global.isEmpty(maxValue)){if(typeof(maxValue)==\"string\"&&maxValue.indexOf(\"->#\")==0){var sMaxValue=this.getItemValue(maxValue.rightBack(\"->#\"));if(!Global.isEmpty(sMaxValue))maxValue=new Global.js.lang.natives.Date(sMaxValue.replace(/-/g,\"/\").replace(/\\./g,\"/\"));else maxValue=undefined;}else if(Global.isDate(maxValue)){if(typeof(maxValue)==\"string\")maxValue=new Global.js.lang.natives.Date(maxValue.replace(/-/g,\"/\").replace(/\\./g,\"/\"));}\nif(Global.isDate(maxValue)&&dtValue>maxValue){if(obj.unmatchedPrompt)alert(obj.unmatchedPrompt);else alert(this._getLocale(\"canotLate\",obj.label,sMaxValue));try{this.getElement(sName).focus();}catch(e){}\nreturn false;}}\nbreak;}}}\nif(!enableExpValid)return true;for(var i=0;i<elements.length;i++){var obj=elements[i];var sName=obj.name||obj.id;var vValue=this.getItemValue(sName);if(typeof(obj.onEvents)==\"object\"){if(typeof(obj.onEvents.onValidate)==\"function\"){if(!obj.onEvents.onValidate.apply(obj)){try{this.getElement(sName).focus();}catch(e){}\nreturn false;}}}}\nreturn true;}\n_$proto.setAllItems=function(values){this.setItems(values);}\n_$proto.setItems=function(values){var elements=[];if(!this._elements)this._elements=[];for(var i=0;i<values.length;i++){var element=values[i];if(Global.isArray(element)){elements[i]={\"parentForm\":this,\"name\":element[0],\"label\":element[1],\"dataType\":element[2],\"allowEmpty\":element[3],\"unfilledPrompt\":element.length>4?element[4]:\"\",\"onEvents\":element.length>5?element[5]:{},\"minValue\":element.length>6?element[6]:\"\",\"maxValue\":element.length>7?element[7]:\"\",\"unmatchedPrompt\":element.length>8?element[8]:\"\"}}else if(typeof(values[i])==\"object\"){elements[i]={\"parentForm\":this,\"name\":element.name,\"label\":element.label||(\"label\"+i),\"dataType\":element.dataType||\"Text\",\"allowEmpty\":element.allowEmpty||element.allowEmpty==undefined,\"unfilledPrompt\":element.unfilledPrompt||\"\",\"onEvents\":element.onEvents||{},\"minValue\":element.minValue||\"\",\"maxValue\":element.maxValue||\"\",\"unmatchedPrompt\":element.unmatchedPrompt||\"\"}}\nelements[i].getDataValue=this.__Item_getDataValue;this._elements.push(elements[i]);this._elements[elements[i].name]=elements[i];var actualElements=this.getElements(elements[i].name);for(var j=0,jLen=actualElements.length;j<jLen;j++){var actualElement=actualElements[j];var sEventName=\"\";if(Browser.Engine.trident){sEventName=\"onpropertychange\";}else{switch(actualElement.tagName){case\"INPUT\":switch(actualElement.type){case\"text\":case\"password\":sEventName=\"oninput\";break;case\"hidden\":break;case\"radio\":case\"checkbox\":sEventName=\"onchange\";break;}\nbreak;case\"TEXTAREA\":sEventName=\"oninput\";break;case\"SELECT\":sEventName=\"onchange\";break;}}\nswitch(sEventName){case\"onpropertychange\":actualElement.attachEvent(\"onpropertychange\",(function(){var actualElement=actualElements[j];return function(event){if(!event)event=window.event;actualElement.form.__onElementPropertyChange({srcElement:actualElement,propertyName:event.propertyName,result:{srcElement:actualElement}});}})());break;case\"oninput\":actualElement.attachEvent(\"oninput\",(function(){var actualElement=actualElements[j];return function(event){if(!event)event=window.event;actualElement.form.__onElementInput({srcElement:actualElement,result:{srcElement:actualElement}});}})());break;case\"onchange\":actualElement.attachEvent(\"onchange\",(function(){var actualElement=actualElements[j];return function(event){if(!event)event=window.event;actualElement.form.__onElementChange({srcElement:actualElement,result:{srcElement:actualElement}});}})());break;}}}}\n_$proto.getAllItems=function(iOptions,isContainsHidden){var retValues=[];var elements=this._elements||this.elements;;for(var i=0,len=elements.length;i<len;i++){var obj=elements[i];var sName=obj.name||obj.id;if(!sName)continue;if(obj.type==\"hidden\"&&!isContainsHidden)continue;retValues[retValues.length]=sName;}\nreturn retValues.unique();}\n_$proto.getAllElements=function(){return this._elements||this.elements;}\n_$proto.getElement=function(sName){var element;if(element=this.getElementByName(sName)){return element;}else if(element=this.getElementById(sName)){return element;}else{return null;}}\n_$proto.getElements=function(sName){var element,elements;if((elements=this.getElementsByName(sName)).length){return elements;}else if(element=this.getElementById(sName)){return[element];}else{return[];}}\n_$proto.getElementById=function(id){var elements=[];if(this.ownerDocument.querySelectorAll){try{elements=this.ownerDocument.querySelectorAll(\"#\"+id);}catch(e){return;}\nfor(var i=0,len=elements.length;i<len;i++){if(elements[i].form==this&&elements[i].id==id)return elements[i];}}else{try{var vElements=this.getElementsByTagName('*')[id];}catch(e){return;}\nif(!vElements){return;}else if(vElements.tagName){return vElements;}else{return vElements[0];}}}\n_$proto.getElementByName=function(sName){var elements=this.ownerDocument.getElementsByName(sName);var elements1=[];for(var i=0,len=elements.length;i<len;i++){if(elements[i].form==this&&elements[i].name==sName)return elements[i];}}\n_$proto.getElementsByName=function(sName){var elements=this.ownerDocument.getElementsByName(sName);var elements1=[];for(var i=0,len=elements.length;i<len;i++){if(elements[i].form==this&&elements[i].name==sName)elements1[elements1.length]=elements[i];}\nreturn elements1;}\n_$proto.getItem=function(sName){if(this._elements){return this._elements[sName]||null;}else{return this.getElement(sName);}}\n_$proto.hasItem=function(sName){return!!this.getElement(sName);}\n_$proto.getAllRequiredItems=function(iOptions,maxResults){var retValues=[],elements=this.getAllElements();maxResults=maxResults==undefined?0:maxResults;for(var i=0,len=elements.length;i<len;i++){var obj=elements[i];var sName=obj.name||obj.id;if(!sName)continue;if(obj.type==\"hidden\")continue;if(typeof(obj.allowEmpty)==\"boolean\"&&!obj.allowEmpty){switch(iOptions){case 0:retValues[retValues.length]=sName;break;case 1:if(this.getItemValue(sName)==\"\"){retValues[retValues.length]=sName;}\nbreak;case 2:if(this.getItemValue(sName)){retValues[retValues.length]=sName;}\nbreak;}}}\nreturn retValues.unique();}\n_$proto.getAllOptionalItems=function(iOptions){var retValues=[],elements=this.getAllElements();for(var i=0,len=elements.length;i<len;i++){var obj=elements[i];var sName=obj.name||obj.id;if(!sName)continue;if(typeof(obj.allowEmpty)==\"undefined\"||obj.allowEmpty){switch(iOptions){case 0:retValues[retValues.length]=sName;break;case 1:if(this.getItemValue(sName)==\"\"){retValues[retValues.length]=sName;}\nbreak;case 2:if(this.getItemValue(sName)){retValues[retValues.length]=sName;}\nbreak;}}}\nreturn retValues.unique();}\n_$proto.getItemValue=function(sName){var objs=this.getElements(sName);var retValues=[];if(!objs.length){return\"\";}else if(objs.length==1){var obj=objs[0];if(!obj.length){switch(obj.tagName){case\"INPUT\":switch(obj.type){case\"radio\":case\"checkbox\":if(obj.checked)return obj.value;else return\"\";default:return obj.value;}\ncase\"SPAN\":return obj.getAttribute(\"value\")||\"\";default:return obj.value;}}else{switch(obj.tagName){case\"SELECT\":if(obj.multiple){for(var i=0;i<obj.length;i++){var obj=obj.options[i];if(obj.selected)retValues[retValues.length]=obj.value;}\nreturn retValues;}else{return obj.value;}\nbreak;default:throw new Error(1,\"No support!\");}}}else{switch(objs[0].tagName){case\"INPUT\":switch(objs[0].type){case\"text\":case\"hidden\":for(var i=0;i<objs.length;i++){var obj=objs[i];retValues[retValues.length]=obj.value;}\nbreak;case\"radio\":for(var i=0;i<objs.length;i++){var obj=objs[i];if(obj.checked){return obj.value;}}\nbreak;case\"checkbox\":for(var i=0;i<objs.length;i++){var obj=objs[i];if(obj.checked)retValues[retValues.length]=obj.value;}\nbreak;default:throw new Error(1,this._getLocale(\"errNotSupportElementType\",objs[0].type));}\nbreak;default:throw new Error(1,this._getLocale(\"errIsNotUniqueElement\",sName));}}\nreturn retValues;}\n_$proto.getItemDefaultValue=function(sName){var objs=this.getElements(sName);var retValues=[];if(!objs){return\"\";}else if(objs.length==1){var obj=objs[0];switch(obj.tagName){case\"INPUT\":switch(obj.type){case\"text\":case\"hidden\":case\"password\":return obj.defaultValue;case\"radio\":case\"checkbox\":if(obj.defaultChecked){return obj.defaultValue;}else{return\"\"}\nbreak;default:return\"\";}\nbreak;case\"SELECT\":if(obj.multiple){for(var i=0;i<obj.length;i++){var oItem=obj.options[i];if(oItem.defaultSelected)retValues[retValues.length]=oItem.value;}\nif(retValues.length)return retValues;}else{for(var i=0;i<obj.length;i++){var oItem=obj.options[i];if(oItem.defaultSelected)return oItem.value;}}\nif(obj.length)return obj.options[0].value;return\"\";break;case\"TEXTAREA\":return obj.defaultValue;break;case\"SPAN\":return obj.getAttribute(\"defaultValue\")||\"\";default:return\"\";}}else{switch(objs[0].tagName){case\"INPUT\":switch(objs[0].type){case\"text\":case\"hidden\":for(var i=0;i<objs.length;i++){var obj=objs[i];retValues[retValues.length]=obj.defaultValue;}\nbreak;case\"radio\":for(var i=0;i<objs.length;i++){var obj=objs[i];if(obj.defaultChecked){return obj.defaultValue;}}\nreturn\"\";break;case\"checkbox\":for(var i=0;i<objs.length;i++){var obj=objs[i];if(obj.defaultChecked)retValues[retValues.length]=obj.defaultValue;}\nreturn\"\";break;default:return\"\";}\nbreak;default:return\"\";}}\nreturn retValues;}\n_$proto.setItemValue=function(iOptions,sName,vValue){var objs=this.getElements(sName);if(!objs){return false;}else if(objs.length==1){var obj=objs[0];switch(obj.tagName){case\"INPUT\":switch(obj.type){case\"text\":if(iOptions==0){obj.defaultValue=Global.isArray(vValue)?vValue.join(obj.separator||obj.getAttribute(\"separator\")||\";\"):vValue;}else if(iOptions==1){obj.value=Global.isArray(vValue)?vValue.join(obj.separator||obj.getAttribute(\"separator\")||\";\"):vValue;}\nbreak;case\"password\":if(iOptions==0){obj.defaultValue=Global.isArray(vValue)?vValue.join(\";\"):vValue;}else if(iOptions==1){obj.value=Global.isArray(vValue)?vValue.join(\";\"):vValue;}\nbreak;case\"radio\":case\"checkbox\":if(iOptions==0){if(obj.defaultValue.equal(vValue)){obj.defaultChecked=true;}}else if(iOptions==1){if(obj.value==vValue){obj.checked=true;}else{return false;}}\nbreak;}\nbreak;case\"SELECT\":if(obj.multiple){for(var i=0;i<obj.length;i++){var oItem=obj.options[i];if(iOptions==0){if(oItem.value.equal(vValue)){oItem.defaultSelected=true;}else{oItem.defaultSelected=false;}}else if(iOptions==1){if(oItem.value.equal(vValue)){oItem.selected=true;break;}}}\nif(retValues.length)return retValues;}else{for(var i=0;i<obj.length;i++){var oItem=obj.options[i];if(iOptions==0){if(oItem.value.equal(vValue)){oItem.defaultSelected=true;}else{oItem.defaultSelected=false;}}else if(iOptions==1){if(oItem.value.equal(vValue)){oItem.selected=true;break;}}}}\nbreak;case\"TEXTAREA\":if(iOptions==0){obj.defaultValue=Global.isArray(vValue)?vValue.join(obj.separator||obj.getAttribute(\"separator\")||\";\"):vValue;}else if(iOptions==1){obj.value=Global.isArray(vValue)?vValue.join(obj.separator||obj.getAttribute(\"separator\")||\";\"):vValue;}\ncase\"SPAN\":if(iOptions==0){obj.setAttribute(\"defaultValue\",vValue);}else if(iOptions==1){obj.setAttribute(\"value\",vValue);}\nbreak;}}else{switch(objs[0].tagName){case\"INPUT\":switch(objs[0].type){case\"text\":for(var i=0;i<objs.length;i++){var obj=objs[i];if(iOptions==0){if(Global.isArray(vValue)){obj.defaultValue=i<vValue.length?vValue[i]:\"\";}else if(i==0){obj.defaultValue=vValue;}else{obj.defaultValue=\"\";}}else if(iOptions==1){if(Global.isArray(vValue)){obj.value=i<vValue.length?vValue[i]:\"\";}else if(i==0){obj.value=vValue;}else{obj.value=\"\";}}}\nbreak;case\"radio\":case\"checkbox\":for(var i=0;i<objs.length;i++){var obj=objs[i];if(iOptions==0){if(obj.defaultValue.equal(vValue)){obj.defaultChecked=true;}else{obj.defaultChecked=false;}}else if(iOptions==1){if(obj.value.equal(vValue)){obj.checked=true;}else{obj.checked=false;}}}\nbreak;}\nbreak;}}\nreturn true;}\n_$proto.selectItemAllValue=function(sName,isSelect){var objs=this.getElements(sName);var retValues=[];if(!objs){return;}else if(objs.length==1){var obj=objs[0];switch(obj.tagName){case\"SELECT\":if(obj.multiple){for(var i=0;i<obj.length;i++){var oItem=obj.options[i];oItem.selected=isSelect==undefined?true:isSelect;}}else if(isSelect==false){for(var i=0;i<obj.length;i++){var oItem=obj.options[i];oItem.selected=false;}}}}else{switch(objs[0].tagName){case\"INPUT\":switch(objs[0].type){case\"radio\":if(isSelect!=false)break;case\"checkbox\":for(var i=0;i<objs.length;i++){var obj=objs[i];obj.checked=isSelect==undefined?true:isSelect;}}}}\nreturn;}\n_$proto.clearItemValue=function(sName){var objs=this.getElements(sName);var retValues=[];if(!objs){return;}else if(objs.length==1){var obj=objs[0];switch(obj.tagName){case\"INPUT\":switch(obj.type){case\"text\":case\"hidden\":case\"password\":obj.value=\"\";break;case\"radio\":case\"checkbox\":obj.checked=false;break;default:return;}\nbreak;case\"SELECT\":for(var i=0;i<obj.length;i++){var oItem=obj.options[i];oItem.selected=false;}\nbreak;case\"TEXTAREA\":obj.value=\"\";break;case\"SPAN\":obj.setAttribute(\"value\",\"\");break;default:return\"\";}}else{switch(objs[0].tagName){case\"INPUT\":switch(objs[0].type){case\"text\":case\"hidden\":case\"password\":for(var i=0;i<objs.length;i++){var obj=objs[i];obj.value=\"\";}\nbreak;case\"radio\":case\"checkbox\":for(var i=0;i<objs.length;i++){var obj=objs[i];obj.checked=false;}\nbreak;default:return;}\nbreak;default:return;}}\nreturn;}\n_$proto.__Item_getDataValue=function(){return this.parentForm.getItemValue(this.name);}\n_$proto._onItemValueChange=function(oEvent){var sName=oEvent.result.srcElement.name;if(!sName)return;var item=this.getItem(sName);this.__onElementValueChange(oEvent);if(this.onItemValueChange)this.onItemValueChange({result:{fromElement:oEvent.result.srcElement,fromItem:item}});}\n_$proto.__onElementPropertyChange=function(oEvent){var element=oEvent.srcElement;try{switch(oEvent.propertyName){case\"value\":if(element.type==\"hidden\")break;this._onItemValueChange(oEvent);break;case\"checked\":if(element.type==\"radio\"){var objs=this.getElements(element.name);if(objs.length<=1){}else{if(!element.checked)return;}\nthis._onItemValueChange(oEvent);}else if(element.type==\"checkbox\"){this._onItemValueChange(oEvent);}\nbreak;}}catch(e){}}\n_$proto.__onElementInput=function(oEvent){var element=oEvent.srcElement;try{this._onItemValueChange(oEvent);}catch(e){}}\n_$proto.__onElementChange=function(oEvent){var element=oEvent.srcElement;try{this._onItemValueChange(oEvent);}catch(e){}}\n_$proto.__onElementValueChange=function(oEvent){var item=this.getItem(oEvent.result.srcElement.name);if(item&&item.onEvents.onValueChange){item.onEvents.onValueChange.call(item,oEvent);}}",
"js.dom.HTMLEncoder" : "$package(\"js.dom\");js.dom.HTMLEncoder=function(){};var _$class=js.dom.HTMLEncoder;_$class.encodeNodeAttrib=function(str){var sSpecial=\"&\\\"'<>\";var aTarget=[\"&#38;\",\"&#34;\",\"&#39;\",\"&#60;\",\"&#62;\"];var ret=\"\"+str;for(var i=0;i<sSpecial.length;i++){ret=ret.replace(new RegExp(sSpecial.charAt(i),\"g\"),aTarget[i]);}\nreturn ret;}\n_$class.encodeNodeData=function(str){var sSpecial=\"&<>\\r\\n\";var aTarget=[\"&#38;\",\"&#60;\",\"&#62;\",\"\",\"<br>\"];var ret=\"\"+str;for(var i=0;i<sSpecial.length;i++){ret=ret.replace(new RegExp(sSpecial.charAt(i),\"g\"),aTarget[i]);}\nreturn ret;}"
}
}
