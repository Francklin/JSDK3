/* @created: Fri Jan 3 17:16:07 UTC+0800 2014*/
{
manifest : {
"name" : "ui-table","file" : "ui-table.json","version" : "1.0","description" : "","author" : "liu denggao","created" : "2014-01-02","modified" : "2014-01-03"
},
entity : {
"js.domx.DOM" : "$package(\"js.domx\");js.domx.DOM=function(){};var _$class=js.domx.DOM;var _$proto=_$class.prototype;_$class.$name=\"DOM\";_$class.$virtual=true;_$class.NODETYPE_ELEMENT=1\n_$class.NODETYPE_ATTRIBUTE=2\n_$class.NODETYPE_TEXT=3\n_$class.NODETYPE_COMMENT=8\n_$class.NODETYPE_DOCUMENT=9\n_$class._instance=new _$class();_$class.getName=function(){return this.$name;}\n_$class.toString=function(){return(\"[Object \"+this.getName()+\"]\");}\n_$class.obj=function(vNode,vClazz){return this._instance._$getObj(vNode,vClazz);}\n_$proto.getClass=function(){return this.$class;}\n_$proto._$getClassFor=function(sName){var clazz=this.getClass();for(var i=0,clazz1;i<3&&!!clazz;i++){clazz1=js.domx[clazz.getName()+sName];if(clazz1)return clazz1;else if(clazz.getName()==\"DOM\")return;else clazz=clazz.$super;}}\n_$proto._$getObj=function(vNode,vClazz){var obj,DOM=js.domx.DOM;if(!vNode){return vNode;}else if(vClazz){if(typeof(vClazz)==\"string\"){return this._$getClassFor(vClazz).newInstanceFrom(vNode);}else{return vClazz.newInstanceFrom(vNode);}}else if(!vNode.constructor){if(vNode.length>=0){return this._$getClassFor(\"NodeList\").newInstanceFrom(vNode);}}else if(Global.isArray(vNode)){return this._$getClassFor(\"NodeList\").newInstanceFrom(vNode);}else if(typeof(NodeList)!=\"undefined\"&&(vNode instanceof NodeList)){return this._$getClassFor(\"NodeList\").newInstanceFrom(vNode);}else if(vNode instanceof this._$getClassFor(\"Object\")){return vNode;}else if(vNode instanceof js.domx.DOMObject){return this._$getClassFor(\"Node\").newInstanceFrom(vNode.valueOf());}\nswitch(vNode.nodeType){case DOM.NODETYPE_ELEMENT:obj=this._$getClassFor(\"Element\").newInstanceFrom(vNode);break;case DOM.NODETYPE_ATTRIBUTE:obj=this._$getClassFor(\"Attribute\").newInstanceFrom(vNode);case DOM.NODETYPE_TEXT:obj=this._$getClassFor(\"Text\").newInstanceFrom(vNode);break;case DOM.NODETYPE_COMMENT:obj=this._$getClassFor(\"Comment\").newInstanceFrom(vNode);break;case DOM.NODETYPE_DOCUMENT:obj=this._$getClassFor(\"Document\").newInstanceFrom(vNode);break;}\nreturn obj;}",
"js.domx.DOMObject" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMObject=function(){this.__original=null;};var _$class=js.domx.DOMObject;var _$proto=_$class.prototype;_$class.$name=\"DOMObject\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$proto.$class=_$class;_$class.getName=function(){return this.$name;}\n_$class.toString=function(){return(\"[Object \"+this.getName()+\"]\");}\n_$proto.getClass=function(){return this.$class;}\n_$proto.getOriginal=function(){return this.__original;}\n_$proto.toString=function(){return(\"[object \"+this.getClass().getName()+\"]\");}\n_$proto.valueOf=function(){return this.__original;}\n_$proto.instanceOf=function(clazz){return this instanceof clazz;}\n_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.DOMNode" : "$package(\"js.domx\");$import(\"js.domx.DOM\");$import(\"js.domx.DOMObject\");js.domx.DOMNode=function(){};var _$class=js.domx.DOMNode;_$class.$name=\"DOMNode\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMObject);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getNodeType=function(){return this.__original.nodeType;}\n_$proto.getNodeName=function(){return this.__original.nodeName;}\n_$proto.getNodeValue=function(){return this.__original.nodeValue;}\n_$proto.getOwnerDocument=function(){return this.getClass().getContainer().obj(this.__original.ownerDocument);}\n_$proto.getParentNode=function(){return this.getClass().getContext().obj(this.__original.parentNode);}\n_$proto.getChildNodes=function(){return this.getClass().getContext().obj(this.__original.childNodes,\"NodeList\");}\n_$proto.getFirstChild=function(){return this.getClass().getContext().obj(this.__original.firstChild);}\n_$proto.getNextSibling=function(){return this.getClass().getContext().obj(this.__original.nextSibling);}\n_$proto.getPreviousSibling=function(){return this.getClass().getContext().obj(this.__original.previousSibling);}\n_$proto.getLastChild=function(){return this.getClass().getContext().obj(this.__original.lastChild);}\n_$proto.getTextContent=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.hasAttributes=function(){return this.__original.hasAttributes();}\n_$proto.hasChildNodes=function(){return this.__original.hasChildNodes();}\n_$proto.appendChild=function(node){var el=this.getClass().getContext().obj(node);this.__original.appendChild(el.valueOf());return el;}\n_$proto.cloneNode=function(cloneAll){var el=this.__original.cloneNode(!!cloneAll);return this.getClass().getContext().obj(el);}\n_$proto.insertBefore=function(oNewNode,oChildNode){var el=this.getClass().getContext().obj(oNewNode);if(!oChildNode){this.__original.insertBefore(el.valueOf());}else{var el1=this.getClass().getContext().obj(oChildNode);this.__original.insertBefore(el.valueOf(),el1.valueOf());}\nreturn el;}\n_$proto.removeChild=function(el){var el=this.getClass().getContext().obj(el);var el1=this.__original.removeChild(el.valueOf());return el1?el:ell;}\n_$proto.replaceChild=function(newNode,oldNode){var el1=this.getClass().getContext().obj(newNode);var el2=this.getClass().getContext().obj(oldNode);var el3=this.__original.replaceChild(el1.valueOf(),el2.valueOf());return el3?el2:el3;}",
"js.domx.DOMText" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMText=function(){};var _$class=js.domx.DOMText;_$class.$name=\"DOMText\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this.__original.data;}\n_$proto.getLength=function(){return this.__original.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.DOMAttribute" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMAttribute=function(){};var _$class=js.domx.DOMAttribute;_$class.$name=\"DOMAttribute\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getName=function(){return this.__original.name;}\n_$proto.getValue=function(){return this.__original.value;}\n_$proto.getOwnerElement=function(){return this.getClass().getContext().obj(this.__original.ownerElement);}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.DOMComment" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMComment=function(){};var _$class=js.domx.DOMComment;_$class.$name=\"DOMComment\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this.__original.data;}\n_$proto.getLength=function(){return this.__original.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.DOMElement" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMElement=function(){};var _$class=js.domx.DOMElement;_$class.$name=\"DOMElement\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getTagName=function(){return this.__original.tagName;}\n_$proto.getAttributes=function(){return this.__original.attributes;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.getAttribute=function(name){return this.__original.getAttribute(name);}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"Element\");}\n_$proto.hasAttribute=function(name){if(this.__original.hasAttribute)return this.__original.hasAttribute(name);else return typeof(this.__origibal.getAttribute(name))!=\"undefined\";}\n_$proto.setAttribute=function(name,value){this.__original.setAttribute(name,value);}",
"js.domx.DOMDocument" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.DOMDocument=function(){};var _$class=js.domx.DOMDocument;_$class.$name=\"DOMDocument\";_$class.$abstract=true;_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getDoctype=function(){return this.__original.doctype;}\n_$proto.getDocumentElement=function(){return this.getClass().getContext().obj(this.__original.documentElement,\"Element\");}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.createElement=function(tagName){return this.getClass().getContext().obj(this.__original.createElement(tagName),\"Element\");}\n_$proto.createTextNode=function(text){return this.getClass().getContext().obj(this.__original.createTextNode(text),\"Text\");}\n_$proto.getElementById=function(id){return this.getClass().getContext().obj(this.__original.getElementById(id),\"Element\");}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"ElementList\");}",
"js.domx.DOMNodeList" : "$package(\"js.domx\");$import(\"js.domx.DOM\");$import(\"js.domx.DOMObject\");js.domx.DOMNodeList=function(){this._isArray=false;};var _$class=js.domx.DOMNodeList;_$class.$name=\"DOMNodeList\";_$class.$context=js.domx.DOM;_$class.$extends(js.domx.DOMObject);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getLength=function(){return this.__original.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}\n_$proto.getItem=function(index){var node=this._isArray?this._original[index]:this.__original.item(index);return this.getClass().getContext().obj(node);}\n_$proto.toArray=function(){if(this._isArray){return this.__original.concat();}else{var array=[];for(var i=0;i<this.__original.length;i++){array.push(this.__original.item(i));}\nreturn array;}}",
"js.domx.XML" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.XML=function(){};var _$class=js.domx.XML;_$class.$name=\"XML\";_$class.$extends(js.domx.DOM);var _$proto=_$class.prototype;_$class._instance=new _$class();_$class.getName=function(){return this.$name;}\n_$class.toString=function(){return(\"[Object \"+this.getName()+\"]\");}\n_$class.obj=function(vNode,vClazz){return this._instance._$getObj(vNode,vClazz);}",
"js.domx.XMLNode" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLNode=function(){};var _$class=js.domx.XMLNode;_$class.$name=\"XMLNode\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getChildNodes=function(){var retValues=[];var childNodes=this.__original.childNodes;for(var i=0,iLen=childNodes.length;i<iLen;i++){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;retValues[retValues.length]=childNodes[i];}\nreturn this.getClass().getContext().obj(retValues,\"NodeList\");}\n_$proto.getFirstChild=function(){var childNodes=this.__original.childNodes;for(var i=0,len=childNodes.length;i<len;i++){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;return this.getClass().getContext().obj(node);}}\n_$proto.getNextSibling=function(){var el=this.__original.nextSibling;if(!el){return null;}else if(el.nodeType==3&&el.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\"){el=el.nextSibling;}\nreturn this.getClass().getContext().obj(el);}\n_$proto.getPreviousSibling=function(){var el=this.__original.previousSibling;if(!el){return null;}else if(el.nodeType==3&&el.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\"){el=el.previousSibling;}\nreturn this.getClass().getContext().obj(el);}\n_$proto.getLastChild=function(){var childNodes=this.__original.childNodes;for(var i=childNodes.length-1;i>=0;i--){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;return this.getClass().getContext().obj(node);}}\n_$proto.getTextContent=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$proto.getText=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.selectSingleNode=function(xpath){var node;if(typeof(this.__original.selectSingleNode)!=\"undefined\"){node=this.__original.selectSingleNode();}else{var x=this.selectNodes(xpath);if(!x.length)return null;node=x[0];}\nreturn this.getClass().getContext().obj(node);}\n_$proto.selectNodes=function(xpath){var nodes;if(typeof(this.__original.selectNodes)!=\"undefined\"){nodes=this.__original.selectNodes(xpath);}else if(typeof(XPathEvaluator)!=\"undefined\"){var xpe=new XPathEvaluator();var nsResolver=xpe.createNSResolver(this.__original.ownerDocument==null?this.__original.documentElement:this.__original.ownerDocument.documentElement);var result=xpe.evaluate(xpath,this.__original,nsResolver,0,null);var found=[];var res;while(res=result.iterateNext())found.push(res);nodes=found;}\nreturn this.getClass().getContext().obj(nodes,\"NodeList\");}",
"js.domx.XMLText" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLText=function(){this._data=\"\";};var _$class=js.domx.XMLText;_$class.$name=\"XMLText\";_$class.$abstract=true;_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$proto.getData=function(){return this._data;}\n_$proto.getLength=function(){return this._data.length;}\n_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();var text=original.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');obj.__original=original;obj._data=text;return obj;}",
"js.domx.XMLAttribute" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLAttribute=function(){};var _$class=js.domx.XMLAttribute;_$class.$name=\"XMLAttribute\";_$class.$abstract=true;_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getName=function(){return this.__original.name;}\n_$proto.getValue=function(){return this.__original.value;}\n_$proto.getOwnerElement=function(){return this.getClass().getContext().obj(this.__original.ownerElement);}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.XMLComment" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLComment=function(){this._data=\"\";};var _$class=js.domx.XMLComment;_$class.$name=\"XMLComment\";_$class.$abstract=true;_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this._data;}\n_$proto.getLength=function(){return this._data.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();var text=original.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');obj.__original=original;obj._data=text;return obj;}",
"js.domx.XMLElement" : "$package(\"js.domx\");$import(\"js.domx.DOMElement\");$import(\"js.domx.XML\");js.domx.XMLElement=function(){};var _$class=js.domx.XMLElement;_$class.$name=\"XMLElement\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getTagName=function(){return this.__original.tagName;}\n_$proto.getAttributes=function(){return this.__original.attributes;}\n_$proto.getChildNodes=function(){var retValues=[];var childNodes=this.__original.childNodes;for(var i=0,iLen=childNodes.length;i<iLen;i++){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;retValues[retValues.length]=childNodes[i];}\nreturn this.getClass().getContext().obj(retValues,\"NodeList\");}\n_$proto.getFirstChild=function(){var childNodes=this.__original.childNodes;for(var i=0,len=childNodes.length;i<len;i++){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;return this.getClass().getContext().obj(node);}}\n_$proto.getNextSibling=function(){var el=this.__original.nextSibling;if(!el){return null;}else if(el.nodeType==3&&el.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\"){el=el.nextSibling;}\nreturn this.getClass().getContext().obj(el);}\n_$proto.getPreviousSibling=function(){var el=this.__original.previousSibling;if(!el){return null;}else if(el.nodeType==3&&el.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\"){el=el.previousSibling;}\nreturn this.getClass().getContext().obj(el);}\n_$proto.getLastChild=function(){var childNodes=this.__original.childNodes;for(var i=childNodes.length-1;i>=0;i--){var node=childNodes[i];if(node.nodeType==3&&node.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'')==\"\")continue;return this.getClass().getContext().obj(node);}}\n_$proto.getTextContent=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$proto.getText=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.getAttribute=function(name){return this.__original.getAttribute(name);}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"Element\");}\n_$proto.hasAttribute=function(name){if(this.__original.hasAttribute)return this.__original.hasAttribute(name);else return typeof(this.__origibal.getAttribute(name))!=\"undefined\";}\n_$proto.setAttribute=function(name,value){this.__original.setAttribute(name,value);}",
"js.domx.XMLDocument" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLDocument=function(){};var _$class=js.domx.XMLDocument;_$class.$name=\"XMLDocument\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getDoctype=function(){return this.__original.doctype;}\n_$proto.getDocumentElement=function(){return this.getClass().getContext().obj(this.__original.documentElement,\"Element\");}\n_$proto.getText=function(){var text=this.__original.text||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.createElement=function(tagName){return this.getClass().getContext().obj(this.__original.createElement(tagName),\"Element\");}\n_$proto.createTextNode=function(text){return this.getClass().getContext().obj(this.__original.createTextNode(text),\"Text\");}\n_$proto.getElementById=function(id){return this.getClass().getContext().obj(this.__original.getElementById(id),\"Element\");}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"ElementList\");}",
"js.domx.XMLNodeList" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLNodeList=function(){};var _$class=js.domx.XMLNodeList;_$class.$name=\"XMLNodeList\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.DOMNodeList);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}",
"js.domx.XMLElementList" : "$package(\"js.domx\");$import(\"js.domx.XML\");js.domx.XMLElementList=function(){}\nvar _$class=js.domx.XMLElementList;_$class.$name=\"XMLElementList\";_$class.$context=js.domx.XML;_$class.$extends(js.domx.XMLNodeList);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}",
"js.domx.HTML" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.HTML=function(){};var _$class=js.domx.HTML;_$class.$name=\"HTML\";_$class.$extends(js.domx.DOM);var _$proto=_$class.prototype;_$class._instance=new _$class();_$class.getName=function(){return this.$name;}\n_$class.toString=function(){return(\"[Object \"+this.getName()+\"]\");}\n_$class.obj=function(vNode,vClazz){return this._instance._$getObj(vNode,vClazz);}",
"js.domx.HTMLNode" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLNode=function(){};var _$class=js.domx.HTMLNode;_$class.$name=\"HTMLNode\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.DOMNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getTextContent=function(){var text=this.__original.text||this.__original.textContent||\"\";var text1=text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');return text1||(text?\" \":\"\");}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.HTMLText" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLText=function(){this._data=\"\";};var _$class=js.domx.HTMLText;_$class.$name=\"HTMLText\";_$class.$abstract=true;_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this._data;}\n_$proto.getLength=function(){return this._data.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();var text=original.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');text=text||(original.data==\"\"?\"\":\" \");obj.__original=original;obj._data=text;return obj;}",
"js.domx.HTMLAttribute" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLAttribute=function(){};var _$class=js.domx.HTMLAttribute;_$class.$name=\"HTMLAttribute\";_$class.$abstract=true;_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getName=function(){return this.__original.name;}\n_$proto.getValue=function(){return this.__original.value;}\n_$proto.getOwnerElement=function(){return this.getClass().getContext().obj(this.__original.ownerElement);}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}",
"js.domx.HTMLComment" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLComment=function(){this._data=\"\";};var _$class=js.domx.HTMLComment;_$class.$name=\"HTMLComment\";_$class.$abstract=true;_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getData=function(){return this._data;}\n_$proto.getLength=function(){return this._data.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();var text=original.data.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');text=text||(original.data==\"\"?\"\":\" \");obj.__original=original;obj._data=text;return obj;}",
"js.domx.HTMLElement" : "$package(\"js.domx\");$import(\"js.domx.DOMElement\");$import(\"js.domx.HTML\");js.domx.HTMLElement=function(){};var _$class=js.domx.HTMLElement;_$class.$name=\"HTMLElement\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getTagName=function(){return this.__original.tagName;}\n_$proto.getAttributes=function(){return this.__original.attributes;}\n_$proto.getTextContent=function(){var text=this.__original.innerText||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$proto.getInnerText=function(){var text=this.__original.innerText||this.__original.textContent||\"\";return text.replace(/^[\\s\\r\\n]*|[\\s\\r\\n]*$/g,'');}\n_$proto.setInnerText=function(sText){this.__original.innerText=sText;}\n_$proto.getInnerHTML=function(){return this.__original.innerHTML;}\n_$proto.setInnerHTML=function(sHtml){this.__original.innerHTML=sHtml;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.getAttribute=function(name){return this.__original.getAttribute(name);}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"Element\");}\n_$proto.hasAttribute=function(name){if(this.__original.hasAttribute)return this.__original.hasAttribute(name);else return typeof(this.__origibal.getAttribute(name))!=\"undefined\";}\n_$proto.setAttribute=function(name,value){this.__original.setAttribute(name,value);}\n_$proto.addEventListener=function(sEventName,fnListener){if(/$on[A-Z]{1}/.test(sEventName)){if(typeof(fnListener)==\"function\")this[sEventName]=fnListener;}else if(this.__original.addEventLister){this.__original.addEventLister(sEventName,fnListener);}else if(this.__original.attachEvent){this.__original.attachEvent(sEventName,fnListener);}else{throw new Error(1000,\"add event listener occur error!\");}}\n_$proto.fireEvent=function(sEventName,oEvent){if(/^_?on[A-Z]{1}/.test(sEventName)){if(typeof(this[sEventName])!=\"function\")return;try{return this[sEventName].apply(this,Array.from(arguments).slice(1));}catch(e){throw new Error(1000,\"Event '\"+sEventName+\"' of object '\"+this.getClass().getName()+\"' has been runned error!\\nSource: \"\n+e.description);}}else if(this.__original.fireEvent){if(!oEvent)this.__original.fireEvent(sEventName);else this.__original.fireEvent(sEventName,oEvent);}else if(this.__original.ownerDocument.createEvent){var doc=this.__original.ownerDocument;if(!oEvent)oEvent=doc.createEvent(\"Events\");var evt=null;if(oEvent.constructor==Event){evt=doc.createEvent(\"Events\");evt.initEvent(sEventName.replace(/^on/,\"\"),oEvent.bubbles,oEvent.cancelable);}else if(oEvent.constructor==MouseEvent){evt=doc.createEvent(\"MouseEvents\");evt.initMouseEvent(sEventName.replace(/^on/,\"\"),oEvent.bubbles,oEvent.cancelable,oEvent.view,oEvent.detail,oEvent.screenX,oEvent.screenY,oEvent.clientX,oEvent.clientY,oEvent.ctrlKey,oEvent.altKey,oEvent.shiftKey,oEvent.metaKey,oEvent.button,oEvent.relatedTarget\n);}else if(oEvent.constructor==UIEvent){evt=doc.createEvent(\"UIEvents\");evt.initUIEvent(sEventName.replace(/^on/,\"\"),oEvent.bubbles,oEvent.view,oEvent.detail);}else{return;}\nthis.__original.dispatchEvent(evt);}else{throw new Error(1000,\"fire event '\"+sEventName+\"' occur error!\");}}",
"js.domx.HTMLDocument" : "$package(\"js.domx\");js.domx.HTMLDocument=function(){};var _$class=js.domx.HTMLDocument;_$class.$name=\"HTMLDocument\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNode);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getDoctype=function(){return this.__original.doctype;}\n_$proto.getDocumentElement=function(){return this.getClass().getContext().obj(this.__original.documentElement,\"Element\");}\n_$proto.getBody=function(){return this.getClass().getContext().obj(this.__original.body,\"Element\");}\n_$proto.getCookie=function(){return this.__original.cookie;}\n_$proto.getDomain=function(){return this.__original.domain;}\n_$proto.setDomain=function(name){this.__original.domain=name;}\n_$proto.getReferrer=function(){return this.__original.referrer;}\n_$proto.getTitle=function(){return this.__original.title;}\n_$proto.setTitle=function(text){this.__original.title=text;}\n_$proto.getURL=function(){return this.__original.URL;}\n_$proto.getCharset=function(){return this.__original.charset;}\n_$proto.setCharset=function(sCharset){this.__original.charset=sCharset;}\n_$proto.getAll=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.all,\"ElementList\");else return this.getClass().getContext().obj(this.__original.all[index],\"Element\");}\n_$proto.getFrames=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.frames,\"ElementList\");else return this.getClass().getContext().obj(this.__original.frames[index],\"Element\");}\n_$proto.getScripts=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.scripts,\"ElementList\");else return this.getClass().getContext().obj(this.__original.scripts[index],\"Element\");}\n_$proto.getForms=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.forms,\"ElementList\");else return this.getClass().getContext().obj(this.__original.forms[index],\"Element\");}\n_$proto.getImages=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.images,\"ElementList\");else return this.getClass().getContext().obj(this.__original.images[index],\"Element\");}\n_$proto.getLinks=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.links,\"ElementList\");else return this.getClass().getContext().obj(this.__original.links[index],\"Element\");}\n_$proto.getAnchors=function(index){if(index==undefined)return this.getClass().getContext().obj(this.__original.anchors,\"ElementList\");else return this.getClass().getContext().obj(this.__original.anchors[index],\"Element\");}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.createElement=function(tagName){return this.getClass().getContext().obj(this.__original.createElement(tagName),\"Element\");}\n_$proto.createTextNode=function(text){return this.getClass().getContext().obj(this.__original.createTextNode(text),\"Text\");}\n_$proto.getElementById=function(id){return this.getClass().getContext().obj(this.__original.getElementById(id),\"Element\");}\n_$proto.getElementsByTagName=function(tagName){return this.getClass().getContext().obj(this.__original.getElementsByTagName(tagName),\"ElementList\");}\n_$proto.getElementsByName=function(name){return this.getClass().getContext().obj(this.__original.getElementsByName(name),\"ElementList\");}\n_$proto.open=function(){this.__original.open();}\n_$proto.write=function(text){this.__original.write(text);}\n_$proto.writeln=function(text){this.__original.writeln(text);}\n_$proto.close=function(){this.__original.close();}",
"js.domx.HTMLNodeList" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLNodeList=function(){};var _$class=js.domx.HTMLNodeList;_$class.$name=\"HTMLNodeList\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.DOMNodeList);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}",
"js.domx.HTMLElementList" : "$package(\"js.domx\");$import(\"js.domx.HTML\");js.domx.HTMLElementList=function(){}\nvar _$class=js.domx.HTMLElementList;_$class.$name=\"HTMLElementList\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLNodeList);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;obj._isArray=Global.isArray(original);return obj;}",
"js.domx.HTMLForm" : "$package(\"js.domx\");$import(\"js.domx.HTMLElement\");js.domx.HTMLForm=function(){this._fields=[];this._adjustHandles=[];};var _$class=js.domx.HTMLForm;_$class.$name=\"HTMLForm\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLElement);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getFields=function(index){return index==undefined?this._fields:this._fields[index];}\n_$proto.getFieldsCount=function(){return this._fields.length;}\n_$class.newInstanceFrom=function(original){if(original==null)return null;var obj=new this();obj.__original=original;return obj;}\n_$proto.addFieldFrom=function(vField,vOptions){var field;switch(vOptions&&vOptions.dataType){case\"Text\":var field=js.domx.HTMLTextField.newInstanceFrom(this,vField,vOptions);break;case\"Select\":var field=js.domx.HTMLSelectField.newInstanceFrom(this,vField,vOptions);break;case\"Number\":var field=js.domx.HTMLNumberField.newInstanceFrom(this,vField,vOptions);break;case\"Date\":var field=js.domx.HTMLDateField.newInstanceFrom(this,vField,vOptions);break;default:return null;}\nthis._fields.push(field);return field;}\n_$proto.addAdjustHandle=function(vFields,fnHandle){this._adjustHandles.push([vFields,fnHandle]);}\n_$proto.getElementsByName=function(sName){return Global.dom(\"#\"+sName+\"#\",this.__original);}\n_$proto.hasField=function(sName){return this._fields.some(function(field){return field.getName()==sName;});}\n_$proto.getFieldByName=function(sName){for(var i=0;i<this._fields.length;i++){if(this._fields[i].getName()==sName){return this._fields[i];}}\nreturn null;}\n_$proto.getAllRequiredFields=function(iOptions){return this._fields.select(function(field){switch(iOptions){case 0:return!field.getAllowEmpty();case 1:if(!field.getAllowEmpty()){return field.isEmpty();}\nbreak;case 2:if(!field.getAllowEmpty()){return!field.isEmpty();}\nbreak;}\nreturn false;});}\n_$proto.getAllOptionalFields=function(iOptions){return this._fields.select(function(field){switch(iOptions){case 0:return field.getAllowEmpty();case 1:if(field.getAllowEmpty()){return field.isEmpty();}\nbreak;case 2:if(field.getAllowEmpty()){return!field.isEmpty();}\nbreak;}\nreturn false;});}\n_$proto.getFieldDataText=function(sName){var field=this.getFieldByName(sName);if(field)return field.getDataText();}\n_$proto.getFieldDataValue=function(sName){var field=this.getFieldByName(sName);if(field)return field.getDataValue();}\n_$proto.setFieldDataValue=function(sName,vValue){var field=this.getFieldByName(sName);if(field)field.setDataValue(vValue);}\n_$proto.removeField=function(oField){var origFields=oField.valueOf();if(Global.isArray(origFields)){for(var i=0;i<origFields.length;i++){try{origFields[i].parentNode.removeChild(origFields[i]);}catch(e){}}}else{try{origFields.parentNode.removeChild(origFields);}catch(e){}}\nthis._fields.earse(oField);}\n_$proto.adjust=function(){var handles=[],paras=[];for(var i=0;i<this._adjustHandles.length;i++){var vHandle=this._adjustHandles[i];var vFields=vHandle[0];var aFields=[];if(!Global.isArray(vFields))vFields=[vFields];for(var j=0;j<vFields.length;j++){var vField=vFields[j];if(typeof(vField)==\"string\"){aFields.push(this.getFieldByName(vField));}else{aFields.push(vField);}}\nhandles.push(vHandle[1]);paras.push(aFields);}\nhandles.forEach(function(handle,index){try{handle.apply(this,paras[index]);}catch(e){}});}\n_$proto.adjustByField=function(vField){var handles=[],paras=[];for(var i=0;i<this._adjustHandles.length;i++){var vHandle=this._adjustHandles[i];var vFields1=vHandle[0];var aFields1=[];var flag=false;if(!Global.isArray(vFields1)){vFields1=[vFields1];}\nfor(var j=0;j<vFields1.length;j++){var vField1=vFields1[j];if(typeof(vField)==typeof(vField1)&&typeof(vField)==\"string\"){if(vField.toLowerCase()==vField1.toLowerCase()){flag=true;break;}}else if(vField instanceof Global.js.domx.HTMLFormField\n&&vField1 instanceof Global.js.domx.HTMLFormField){if(vField.getOriginal()==vField1.getOriginal()){flag=true;break;}}else if(typeof(vField)==\"string\"){if(vField1.getName()==vField){flag=true;break;}}else if(typeof(vField1)==\"string\"){if(vField.getName()==vField1){flag=true;break;}}}\nif(!flag)continue;for(var j=0;j<vFields1.length;j++){var vField=vFields1[j];if(typeof(vField)==\"string\"){aFields1.push(this.getFieldByName(vField));}else{aFields1.push(vField);}}\nhandles.push(vHandle[1]);paras.push(aFields1);}\nhandles.forEach(function(handle,index){try{handle.apply(this,paras[index]);}catch(e){}});}\n_$proto.validate=function(){return![0,1,2].some(function(mode){return this._fields.some(function(field){return!this.validateField(field,mode);},this);},this);}\n_$proto.validateField=function(vField,iOptions){var oField;if(!vField){return true;}else if(typeof(vField)==\"string\"){oField=this.getFieldByName(vField);}else{oField=vField;}\nreturn oField.validate(iOptions,true);}\n_$proto.submit=function(){this.__original.submit();}\n_$proto._onFieldValueChanged=function(oField){this.fireEvent(\"onFieldValueChanged\",oField);this.adjustByField(oField);}",
"js.domx.HTMLFormField" : "$package(\"js.domx\");$import(\"js.domx.DOM\");js.domx.HTMLFormField=function(){this._parentForm=null;this._name=\"\";this._dataType=\"\";this._allowEmpty=true;this._isReadOnly=false;this._unfilledPrompt=\"\";this._unmatchedPrompt=\"\";};var _$class=js.domx.HTMLFormField;_$class.$name=\"HTMLFormField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.DOMObject);var _$proto=_$class.prototype;_$proto._HTMLFormField=function(){}\n_$class.getContext=function(){return this.$context;}\n_$proto.getParentForm=function(){return this._parentForm;}\n_$proto.getName=function(){return this._name;}\n_$proto.getDataType=function(){return this._dataType;}\n_$proto.getLabel=function(){return this._label;}\n_$proto.setLabel=function(value){this._label=value;}\n_$proto.getAllowEmpty=function(){return this._allowEmpty;}\n_$proto.setAllowEmpty=function(value){this._allowEmpty=value;}\n_$proto.getIsReadOnly=function(){return this._isReadOnly;}\n_$proto.getAllowMultiple=function(){return false;}\n_$proto.getStoreValues=function(index){var values=[this.__original.value].concat(this._dataField?this._dataField.value:[]);if(index!=undefined)return values[index];else return values;}\n_$proto.setStoreValues=function(){this.__original.value=arguments[0];if(arguments.length>=2&&this._dataField)this._dataField.value=arguments[1];}\n_$proto.getStoreFields=function(index){var field=[this.__original].concat(this._dataField?this._dataField:[]);if(index!=undefined)return fields[index];else return fields;}\n_$proto.getDataField=function(){return this._dataField;}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(original==null)return null;var obj=new this();this._parentForm=parentForm;obj.__original=original;return obj;}\n_$proto.isEmpty=function(){return!this.__original.value;}\n_$proto.clearEmpty=function(){this.__original.value=\"\";}\n_$proto.validate=function(iOptions,isSubmiting){}\n_$proto.hasEvent=function(sEvent){if(typeof(this[sEvent])!=\"function\")return false;return true;}\n_$proto._getLocale=function(key,value){var strObj=Global.Object(this.getClass()._localeResource[key]);return strObj.format.apply(strObj,Global.js.lang.natives.Array.from(arguments).slice(1)).valueOf();}\n_$proto.addEventListener=function(sName,fnListener){if(typeof(fnListener)==\"function\")this[sName]=fnListener;}\n_$proto.fireEvent=function(sEvent){if(typeof(this[sEvent])!=\"function\")return;try{return this[sEvent].apply(this,Array.from(arguments).slice(1));}catch(e){throw new Error(1000,\"Event '\"+sEvent+\"' of object '\"+this.getClass().getName()+\"' has been runned error!\\nSource: \"\n+e.description);}}\n_$proto._onValidate=function(isSubmiting){if(this.hasEvent(\"onValidate\"))return this.fireEvent(\"onValidate\",isSubmiting);else\nreturn true;}\n_$proto._onValueChanged=function(event){var flag=this.fireEvent(\"onValueChanged\",this.getDataValue());if(flag||flag==undefined)this._parentForm.fireEvent(\"_onFieldValueChanged\",this);}",
"js.domx.HTMLTextField" : "$package(\"js.domx\");$import(\"js.domx.HTMLFormField\");js.domx.HTMLTextField=function(){this._dataType=\"Text\";this._separator=\"\";this._allowMultiple=false;this._allowKeywordSyno=false;this._allowNotInList=true;this._allowMultipleLine=false;this._optionalValues=null;this._minValue=undefined;this._maxValue=undefined;this._dataValue=undefined;this._dataField=undefined;this._isSelecting=false;this._isAutoHeight=false;this._minRows=0;this._maxRows=0;};var _$class=js.domx.HTMLTextField;_$class.$name=\"HTMLTextField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLFormField);_$class._localeResource={\"pleaseInput\":\"\\u8acb\\u9078\\u64c7\\u6216\\u8f38\\u5165\\\"{0}\\\"!\",\"canotLessItems\":\"\\u60a8\\u9078\\u64c7\\u7684\\\"{0}\\\"\\u7684\\u689d\\u76ee\\u6578\\u4e0d\\u80fd\\u5c11\\u65bc{1}\\u689d!\",\"canotGreaterItems\":\"\\u60a8\\u9078\\u64c7\\u7684\\\"{0}\\\"\\u7684\\u689d\\u76ee\\u6578\\u4e0d\\u80fd\\u8d85\\u904e{1}\\u689d!\",\"canotLessWords\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u7684\\u5b57\\u6570\\u4e0d\\u80fd\\u5c11\\u65bc{1}\\u5b57!\",\"canotGreaterWords\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u7684\\u5b57\\u6578\\u4e0d\\u80fd\\u8d85\\u904e{1}\\u5b57!\",\"itemsLimit\":\"\\u5143\\u7d20\\u500b\\u6578\\u9650\\u5236: {0} - {1}\",\"wordsLimit\":\"\\u9577\\u5ea6\\u9650\\u5236: {0} - {1}\",\"atLeastItems\":\"\\u81f3\\u5c11{0}\\u4e2a!\",\"atMostItems\":\"\\u6700\\u591a{0}\\u4e2a!\",\"atLeastWords\":\"\\u81f3\\u5c11{0}\\u5b57!\",\"atMostWords\":\"\\u6700\\u591a{0}\\u5b57!\"}\nvar _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getMinValue=function(){return this._minValue;}\n_$proto.setMinValue=function(value){if(value===this._minValue)return;this._minValue=value;this.fireEvent(\"_onPropertyChanged\",\"minValue\");}\n_$proto.getMaxValue=function(){return this._maxValue;}\n_$proto.setMaxValue=function(value){if(value===this._maxValue)return;this._maxValue=value;this.fireEvent(\"_onPropertyChanged\",\"maxValue\");}\n_$proto.getSeparator=function(){return this._separator;}\n_$proto.setSeparator=function(value){this._separator=value;switch(value.toLowerCase()){case\"_newline\":this._separator=Global.STR_NewLine;break;case\"_blankline\":this._separator=Global.STR_NewLine+Global.STR_NewLine;break;default:this._separator=value;}}\n_$proto.getAllowMultiple=function(){return this._allowMultiple;}\n_$proto.setAllowMultiple=function(value){this._allowMultiple=value;}\n_$proto.getAllowKeywordSyno=function(){return this._allowKeywordSyno;}\n_$proto.getAllowNotInList=function(){return this._allowNotInList;}\n_$proto.getIsAutoHeight=function(){return this._isAutoHeight;}\n_$proto.getIsReadOnly=function(){return this._isReadOnly;}\n_$proto.setIsReadOnly=function(value){if(this._isReadOnly===value)return;this._isReadOnly=value;this.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");}\n_$proto.getOptionalValues=function(){return this._optionalValues;}\n_$proto.setOptionalValues=function(value){this._optionalValues=value;}\n_$proto.getDataText=function(){return this._allowMultiple?this.__original.value.split(this._separator||\";\"):this.__original.value;}\n_$proto.getDataValue=function(){if(!this._allowKeywordSyno){var field=this.__original;if(!this._allowMultiple){return field.value;}else if(!field.value){return[];}else{return field.value.split(this._separator||\";\");}}else if(this._dataField){var field=this._dataField;if(!this._allowMultiple){return field.value;}else if(!field.value){return[];}else{return field.value.split(this._separator||\";\");}}else if(this._dataValue){return this._dataValue;}else{return this._allowMultiple?[]:\"\";}}\n_$proto.setDataValue=function(vValue){var element=this.__original;if(this._allowKeywordSyno)vValue=this._setDataValue(vValue);vValue=Global.isArray(vValue)?vValue:[vValue];if(!this._allowKeywordSyno){var sValue=vValue.join(this._separator||\";\");}else if(!this._optionalValues||!this._optionalValues.length){var sValue=vValue.join(this._separator||\";\");}else{var sValue=this._optionalValues.select(function(item){return vValue.contains(item.getLast());}).map(function(item){return item.getFirst();}).join(this._separator||\";\");}\nif(element.value!=sValue)element.value=sValue;this.fireEvent(\"_onValueChanged\");}\n_$proto._setDataValue=function(vValue){if(Global.isArray(vValue)){if(this._dataField){this._dataField.value=vValue.join(this._separator||\";\");}else{this._dataValue=vValue.join(this._separator||\";\");}}else{if(this._dataField){this._dataField.value=vValue;}else{this._dataValue=vValue;}}\nreturn this.getDataValue();}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(!vField)return null;var obj=new this();obj._parentForm=parentForm;if(typeof(vField)==\"string\"){obj.__original=parentForm.getElementsByName(vField).getFirst();}else{obj.__original=vField;}\nobj._name=obj.__original.name||obj.__original.id||\"\";if(vOptions){obj._separator=vOptions.separator||\"\";obj._label=vOptions.label||\"\";if(vOptions.allowEmpty!=undefined)obj._allowEmpty=vOptions.allowEmpty;if(vOptions.unfilledPrompt!=undefined)obj._unfilledPrompt=vOptions.unfilledPrompt;if(vOptions.unmatchedPrompt!=undefined)obj._unmatchedPrompt=vOptions.unmatchedPrompt;if(vOptions.allowMultiple!=undefined)obj._allowMultiple=vOptions.allowMultiple;if(vOptions.allowKeywordSyno!=undefined)obj._allowKeywordSyno=vOptions.allowKeywordSyno;if(vOptions.allowNotInList!=undefined)obj._allowNotInList=vOptions.allowNotInList;if(vOptions.isReadOnly!=undefined)obj._isReadOnly=vOptions.isReadOnly;obj._allowMultipleLine=obj.__original.tagName==\"TEXTAREA\";if(obj._allowMultipleLine){obj._isAutoHeight=vOptions.isAutoHeight||false;obj._minRows=vOptions.minRows||obj.__original.rows||2;obj._maxRows=vOptions.maxRows||0;obj._maxRows=obj._maxRows>0?Math.max(obj._minRows,obj._maxRows):0;}\nif(vOptions.dataField!=undefined){if(typeof(vOptions.dataField)!=\"string\"){obj._dataField=vOptions.dataField;}else{obj._dataField=parentForm.getElementsByName(vOptions.dataField).getFirst();}}\nif(vOptions.optionalValues!=undefined){if(typeof(vOptions.optionalValues)!=\"string\"){obj._optionalValues=vOptions.optionalValues;}else if(vOptions.optionalValues.indexOf(\"->#\")==0){obj._optionalValues=parentForm.getElementsByName(vOptions.optionalValues.right(\"->#\")).getFirst().value.split(obj._separator||\";\");}else{obj._optionalValues=vOptions.optionalValues.split(obj._separator||\";\");}\nfor(var i=0;i<obj._optionalValues.length;i++){var vValue=obj._optionalValues[i];if(Global.isArray(vValue)){}else if(typeof(vValue)==\"string\"){if(!obj._allowKeywordSyno){obj._optionalValues[i]=[vValue];}else{obj._optionalValues[i]=[vValue.split(\"|\")[0],vValue.split(\"|\").pop()];}}else{obj._optionalValues[i]=obj._allowKeywordSyno?[vValue.text,vValue.value]:[vValue.text];}}}\nif(vOptions.minValue!=undefined){if(typeof(vOptions.minValue)!=\"string\"){obj._minValue=vOptions.minValue;}else{obj._minValue=parseFloat(vOptions.minValue);}}\nif(vOptions.maxValue!=undefined){if(typeof(vOptions.maxValue)!=\"string\"){obj._maxValue=vOptions.maxValue;}else{obj._maxValue=parseFloat(vOptions.maxValue);}}\nif(vOptions.onEvents){[\"onValidate\",\"onSelect\",\"onReadStateChanged\",\"onValueChanged\"].forEach(function(sEvent){var func=vOptions.onEvents[sEvent];if(func)obj.addEventListener(sEvent,func);});}}\nif(obj.__original.type!=\"file\"){obj.__original.attachEvent(\"onchange\",function(event){obj.fireEvent(\"_onValueChanged\",event);});obj.__original.attachEvent(\"onblur\",function(event){obj.fireEvent(\"_onBlur\",event);});}else{obj.__original.attachEvent(\"onchange\",function(event){obj.fireEvent(\"_onValueChanged\",event);obj.fireEvent(\"_onBlur\",event);});}\nobj.fireEvent(\"_onPropertyChanged\",\"allowKeywordSyno\");obj.fireEvent(\"_onPropertyChanged\",\"allowNotInList\");obj.fireEvent(\"_onPropertyChanged\",\"minValue\");obj.fireEvent(\"_onPropertyChanged\",\"maxValue\");obj.fireEvent(\"_onPropertyChanged\",\"isAutoHeight\");obj.fireEvent(\"_onPropertyChanged\",\"minRows\");obj.adjustHeight();obj.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");return obj;}\n_$proto.selectValues=function(event){this.fireEvent(\"_onSelect\",event);}\n_$proto.clearEmpty=function(){this.__original.value=\"\";if(this._dataValue)this._dataValue=\"\";if(this._dataField)this._dataField.value=\"\";}\n_$proto.validate=function(iOptions,isSubmiting){var field=this.__original;switch(iOptions){case 0:if(!field.value){if(!this._allowEmpty&&isSubmiting){if(this._unfilledPrompt)alert(this._unfilledPrompt);else alert(this._getLocale(\"pleaseInput\",this._label));try{field.focus();}catch(e){}}\nreturn this._allowEmpty;}\nbreak;case 1:if(!field.value&&this._allowEmpty)break;var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(this._allowMultiple){var length=this.getDataValue().length;if(maxValue!=undefined){if(length>maxValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(this._getLocale(\"canotGreaterItems\",this._label,maxValue));try{field.focus();}catch(e){}\nreturn false;}}\nif(minValue!=undefined){if(length<minValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(this._getLocale(\"canotLessItems\",this._label,minValue));try{field.focus();}catch(e){}\nreturn false;}}}else if(this._allowNotInList){var length=field.value.length;if(maxValue!=undefined){if(length>maxValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(this._getLocale(\"canotGreaterWords\",this._label,maxValue));try{field.focus();}catch(e){}\nreturn false;}}\nif(minValue!=undefined){if(length<minValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(this._getLocale(\"canotLessWords\",this._label,minValue));try{field.focus();}catch(e){}\nreturn false;}}}\nbreak;case 2:return this.fireEvent(\"_onValidate\",isSubmiting);}\nreturn true;}\n_$proto.adjustHeight=function(){var field=this.__original;if(this._isAutoHeight){if(Global.Browser.Engine.trident){if(document.compatMode!=\"CSS1Compat\")return;while(field.scrollHeight<=field.clientHeight){if(field.rows>this._minRows)field.rows--;else\nbreak;if(this._maxRows==0||field.rows<this._maxRows)field.style.overflowY=\"hidden\";if(field.scrollHeight>field.clientHeight){field.rows++;break;}}\nwhile(field.scrollHeight>field.clientHeight){if(this._maxRows==0||field.rows<this._maxRows){field.rows++;}else{field.style.overflowY=\"auto\";break;}}}else{if(field.scrollTop==0)field.scrollTop=1;while(field.scrollTop==0){if(field.rows>this._minRows)field.rows--;else\nbreak;field.scrollTop=1;if(this._maxRows==0||field.rows<this._maxRows)field.style.overflowY=\"hidden\";if(field.scrollTop>0){field.rows++;break;}}\nwhile(field.scrollTop>0){if(this._maxRows==0||field.rows<this._maxRows){field.rows++;if(field.scrollTop==0)field.scrollTop=1;}else{field.style.overflowY=\"auto\";break;}}}}}\n_$proto._onPropertyChanged=function(sName){var _this=this;var field=this.__original;switch(sName){case\"isAutoHeight\":if(!this._allowMultipleLine){return;}else if(this._isAutoHeight){if(Global.Browser.Engine.trident){if(document.compatMode!=\"CSS1Compat\"){field.style.overflowY=\"visible\";}else{field.style.overflowY=\"hidden\";field.attachEvent(\"onkeyup\",function(event){event=event||window.event;if(!_this._isReadOnly)_this.adjustHeight();});}}else{field.style.overflowY=\"hidden\";field.attachEvent(\"oninput\",function(event){event=event||window.event;if(!_this._isReadOnly)_this.adjustHeight();});}}else{this.__original.style.overflowY=\"auto\";}\nbreak;case\"minRows\":if(this._allowMultipleLine){if(field.rows<this._minRows)field.rows=this._minRows;}\nbreak;case\"isReadOnly\":if(this._isReadOnly){this.__original.readOnly=this._isReadOnly;}else{this.__original.readOnly=!this._allowNotInList;}\nthis.fireEvent(\"onReadStateChanged\",this._isReadOnly);break;case\"allowKeywordSyno\":case\"allowNotInList\":if(this._allowKeywordSyno){this._allowNotInList=false;}\nif(this._allowKeywordSyno){this.__original.readOnly=true;}else if(this._allowNotInList){this.__original.readOnly=false;}else{this.__original.readOnly=true;}\nbreak;case\"minValue\":case\"maxValue\":var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(this._allowMultiple){if(minValue!=undefined&&maxValue!=undefined){this.__original.title=this._getLocale(\"itemsLimit\",minValue,maxValue);}else if(minValue!=undefined){this.__original.title=this._getLocale(\"atLeastItems\",minValue);}else if(maxValue!=undefined){this.__original.title=this._getLocale(\"atMostItems\",maxValue);}}else{if(minValue!=undefined&&maxValue!=undefined){this.__original.title=this._getLocale(\"wordsLimit\",minValue,maxValue);}else if(minValue!=undefined){this.__original.title=this._getLocale(\"atLeastWords\",minValue);}else if(maxValue!=undefined){this.__original.title=this._getLocale(\"atMostWords\",maxValue);}}\nbreak;}}\n_$proto._onSelect=function(event){var _this=this;if(this.hasEvent(\"onSelect\")){this._isSelecting=true;this.fireEvent(\"onSelect\",event,this._optionalValues,function(action,value){switch(action){case 1:_this.fireEvent(\"_onSelectingOK\",value);break;case 0:_this.fireEvent(\"_onSelectingCancel\",value);break;}});}}\n_$proto._onSelectingOK=function(value){this.fireEvent(\"_onSelectingFinished\");this.setDataValue(value);}\n_$proto._onSelectingCancel=function(){this.fireEvent(\"_onSelectingFinished\");}\n_$proto._onSelectingFinished=function(){this._isSelecting=false;}\n_$proto._onValueChanged=function(event){this.adjustHeight();var flag=this.fireEvent(\"onValueChanged\",this.getDataValue());if(flag||flag==undefined)this._parentForm.fireEvent(\"_onFieldValueChanged\",this);}\n_$proto._onBlur=function(event){var value=this.__original.value;var flag=![0,1,2].some(function(mode){return!this.validate(mode);},this);return flag;}",
"js.domx.HTMLSelectField" : "$package(\"js.domx\");$import(\"js.domx.HTMLFormField\");js.domx.HTMLSelectField=function(){this._dataType=\"Select\";this._separator=\"\";this._allowMultiple=false;this._allowKeywordSyno=false;this._optionalValues=null;};var _$class=js.domx.HTMLSelectField;_$class.$name=\"HTMLSelectField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLFormField);var _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.getSeparator=function(){return this._separator;}\n_$proto.setSeparator=function(value){this._separator=value;switch(value.toLowerCase()){case\"_newline\":this._separator=Global.STR_NewLine;break;case\"_blankline\":this._separator=Global.STR_NewLine+Global.STR_NewLine;break;default:this._separator=value;}}\n_$proto.getAllowMultiple=function(){return this._allowMultiple;}\n_$proto.setAllowMultiple=function(value){this._allowMultiple=value;}\n_$proto.getOptionalValues=function(){return this._optionalValues;}\n_$proto.setOptionalValues=function(value){this._optionalValues=value;}\n_$proto.getDataValue=function(){if(this._allowKeywordSyno){if(this._dataField){return this._allowMultiple?this._dataField.value.split(this._separator||\";\"):this._dataField.value;}else if(this._dataValue){return this._allowMultiple?this._dataValue.split(this._separator||\";\"):this._dataValue;}else{this._allowMultiple?[]:\"\";}}else{return this._allowMultiple?this._original.value.split(this._separator||\";\"):this._original.value;}}\n_$proto.setDataValue=function(vValue){}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(!vField)return null;var obj=new this();this._parentForm=parentForm;if(typeof(vField)==\"string\"){obj.__original=parentForm.getElementsByName(vField);}else{obj.__original=vField;}\nif(vOptions){obj._separator=vOptions.separator||\"\";obj._label=vOptions.label||\"\";if(vOptions.allowEmpty!=undefined)obj._allowEmpty=vOptions.allowEmpty;}\nreturn obj;}\n_$proto.validate=function(iOptions){}",
"js.domx.HTMLNumberField" : "$package(\"js.domx\");$import(\"js.domx.HTMLFormField\");js.domx.HTMLNumberField=function(){this._dataType=\"Number\";this._minValue=undefined;this._minValueBy=\"\";this._maxValue=undefined;this._maxValueBy=\"\";this._decimalOptions=0;this._isFocusing=false;this._pageSize=undefined;};var _$class=js.domx.HTMLNumberField;_$class.$name=\"HTMLNumberField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLFormField);_$class._localeResource={\"pleaseInput\":\"\\u8acb\\u9078\\u64c7\\u6216\\u8f38\\u5165\\\"{0}\\\"!\",\"validScope\":\"\\u6709\\u6548\\u7bc4\\u570d\",\"isnotNumber\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u662f\\u6578\\u5b57\\uff01\",\"maxDecimalBits\":\"\\u8acb\\u6700\\u591a\\u8f38\\u5165{0}\\u4f4d\\u5c0f\\u6578!\",\"canotLess\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u80fd\\u5c0f\\u65bc{1}!\",\"canotGreater\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u80fd\\u5927\\u65bc{1}!\"}\nvar _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.setIsReadOnly=function(value){if(this._isReadOnly===value)return;this._isReadOnly=value;this.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");}\n_$proto.getMinValue=function(){if(!this._minValueBy){return this._minValue;}else if(typeof(this._minValueBy)!=\"string\"){return this._minValueBy.getDataValue();}else{var field=this._parentForm.getFieldByName(this._minValueBy);if(field){this._minValueBy=field;return field.getDataValue();}}}\n_$proto.setMinValue=function(value){if(value===this._minValue)return;this._minValue=value;this._minValueBy=\"\";}\n_$proto.getMaxValue=function(){if(!this._maxValueBy){return this._maxValue;}else if(typeof(this._maxValueBy)!=\"string\"){return this._maxValueBy.getDataValue();}else{var field=this._parentForm.getFieldByName(this._maxValueBy);if(field){this._maxValueBy=field;return field.getDataValue();}}}\n_$proto.setMaxValue=function(value){if(value===this._maxValue)return;this._maxValue=value;this._maxValueBy=\"\";}\n_$proto.getPageSize=function(){return this._pageSize;}\n_$proto.setPageSize=function(value){this._pageSize=value;}\n_$proto.getDecimalOptions=function(){return this._decimalOptions;}\n_$proto.setDecimalOptions=function(value){this._decimalOptions=value;}\n_$proto.getDataText=function(){return this.__original.value;}\n_$proto.getDataValue=function(){var value=this.__original.value;return value&&parseFloat(\"0\"+value)||undefined;}\n_$proto.setDataValue=function(vValue){if(!this.isValidValueFor(vValue))return;this.__original.value=\"\"+vValue;this.fireEvent(\"_onValueChanged\");}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(!vField)return null;var obj=new this();obj._parentForm=parentForm;if(typeof(vField)==\"string\"){obj.__original=parentForm.getElementsByName(vField).getFirst();}else{obj.__original=vField;}\nobj._name=obj.__original.name||obj.__original.id||\"\";if(vOptions){obj._label=vOptions.label||\"\";if(vOptions.allowEmpty!=undefined)obj._allowEmpty=vOptions.allowEmpty;if(vOptions.isReadOnly!=undefined)obj._isReadOnly=vOptions.isReadOnly;if(vOptions.unfilledPrompt!=undefined)obj._unfilledPrompt=vOptions.unfilledPrompt;if(vOptions.unmatchedPrompt!=undefined)obj._unmatchedPrompt=vOptions.unmatchedPrompt;if(vOptions.decimalOptions!=undefined)obj._decimalOptions=vOptions.decimalOptions;if(vOptions.pageSize!=undefined)obj._pageSize=vOptions.pageSize;if(vOptions.minValue!=undefined){if(typeof(vOptions.minValue)!=\"string\"){obj._minValue=vOptions.minValue;}else if(vOptions.minValue.indexOf(\"->#\")==0){obj._minValueBy=vOptions.minValue.right(\"->#\");}else{obj._minValue=parseFloat(vOptions.minValue);}}\nif(vOptions.maxValue!=undefined){if(typeof(vOptions.maxValue)!=\"string\"){obj._maxValue=vOptions.maxValue;}else if(vOptions.maxValue.indexOf(\"->#\")==0){obj._maxValueBy=vOptions.maxValue.right(\"->#\");}else{obj._maxValue=parseFloat(vOptions.maxValue);}}\nif(vOptions.onEvents){[\"onValidate\",\"onReadStateChanged\",\"onValueChanged\"].forEach(function(sEvent){var func=vOptions.onEvents[sEvent];if(func)obj.addEventListener(sEvent,func);});}}\nobj.__original.attachEvent(\"onmouseover\",function(){obj.fireEvent(\"_onTips\");});obj.__original.attachEvent(\"onchange\",function(event){var flag=![0,1,2].some(function(mode){return!obj.validate(mode);});if(!flag)obj._isFocusing=true;obj.fireEvent(\"_onValueChanged\",event);});obj.__original.attachEvent(\"onblur\",function(){return obj.fireEvent(\"_onBlur\");});obj.fireEvent(\"_onPropertyChanged\",\"minValue\");obj.fireEvent(\"_onPropertyChanged\",\"maxValue\");obj.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");return obj;}\n_$proto.isValidValueFor=function(value){if(typeof(value)!=\"number\")return false;var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(minValue!=undefined&&value<minValue){return false;}else if(maxValue!=undefined&&value>maxValue){return false;}else{return true;}}\n_$proto.validate=function(iOptions,isSubmiting){var field=this.__original;switch(iOptions){case 0:if(!field.value){if(!this._allowEmpty&&isSubmiting){if(this._unfilledPrompt)alert(this._unfilledPrompt);else alert(this._getLocale(\"pleaseInput\",this._label));try{field.focus();}catch(e){}}\nreturn this._allowEmpty;}\nif(isNaN(field.value)){alert(this._getLocale(\"isnotNumber\",this._label));field.value=\"\";try{field.focus();}catch(e){}\nreturn false;}else if(field.value!=\"0\"&&field.value.slice(0,1)==\"0\"){this.__original.value=parseFloat(field.value);}\nbreak;case 1:if(!field.value&&this._allowEmpty)break;var minValue=this.getMinValue();var maxValue=this.getMaxValue();var iValue=parseFloat(\"0\"+field.value);if(maxValue!=undefined){if(Global.isNumber(maxValue)&&iValue>maxValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(this._getLocale(\"canotGreater\",this._label,maxValue));field.value=\"\";try{field.focus();}catch(e){}\nreturn false;}}\nif(minValue!=undefined){if(Global.isNumber(minValue)&&iValue<minValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(this._getLocale(\"canotLess\",this._label,minValue));field.value=\"\";try{field.focus();}catch(e){}\nreturn false;}}\nif(field.value.slice(-1)==\".\"){field.value+=this._decimalOptions<=0?\"00\":Global.obj(\"0\").repeat(this._decimalOptions).valueOf();}\nif(this._decimalOptions==0&&field.value.indexOf(\".\")>0){field.value=field.value.word(\".\",0);}else if(this._decimalOptions>0&&field.value.indexOf(\".\")>0){var bits=field.value.length-field.value.indexOf(\".\")-1;if(bits>this._decimalOptions){alert(this._getLocale(\"maxDecimalBits\",this._decimalOptions));field.value=field.value.slice(0,field.value.indexOf(\".\")+this._decimalOptions+1);field.focus();return false;}}\nbreak;case 2:return this.fireEvent(\"_onValidate\",isSubmiting);}\nreturn true;}\n_$proto._onPropertyChanged=function(sName){switch(sName){case\"isReadOnly\":this.__original.readOnly=this._isReadOnly;this.fireEvent(\"onReadStateChanged\",this._isReadOnly);break;case\"minValue\":case\"maxValue\":var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(minValue!=undefined&&maxValue!=undefined){this.__original.title=this._getLocale(\"validScope\")+\": \"+minValue+\" - \"+maxValue;}else if(minValue!=undefined){this.__original.title=this._getLocale(\"validScope\")+\": \"+minValue+\" - ~\";}else if(maxValue!=undefined){this.__original.title=this._getLocale(\"validScope\")+\": ~ - \"+maxValue;}\nbreak;}}\n_$proto._onValueChanged=function(event){var flag=this.fireEvent(\"onValueChanged\",this.getDataValue());if(flag||flag==undefined)this._parentForm.fireEvent(\"_onFieldValueChanged\",this);}\n_$proto._onKeyDown=function(event){var field=this.__original;var intValue=field.value==\"\"?-1:parseFloat(\"0\"+field.value);var at=field.value.indexOf(\".\");var precision=at<0?0:(field.value.length-at-1);field.style.imeMode=\"disabled\";switch(event.keyCode){case Global.KEY_Up:var value=this.getDataValue().adjust(1);if(this._minValue!=undefined&&value<this._minValue){field.value=this._minValue;}else if(this._maxValue!=undefined&&value>this._maxValue){field.value=this._maxValue;}else{field.value=value;}\nbreak;case Global.KEY_Down:var value=this.getDataValue().adjust(-1);if(this._minValue!=undefined&&value<this._minValue){field.value=this._minValue;}else if(this._maxValue!=undefined&&value>this._maxValue){field.value=this._maxValue;}else{field.value=value<0?0:value;}\nbreak;case Global.KEY_Left:break;case Global.KEY_Right:break;case Global.KEY_Home:break;case Global.KEY_End:break;case Global.KEY_PageUp:if(this._pageSize){var value=this.getDataValue().adjust(this._pageSize);if(this._minValue!=undefined&&value<this._minValue){field.value=this._minValue;}else if(this._maxValue!=undefined&&value>this._maxValue){field.value=this._maxValue;}else{field.value=value;}}\nreturn event.returnValue=false;break;case Global.KEY_PageDown:if(this._pageSize){var value=this.getDataValue().adjust(-this._pageSize);if(this._minValue!=undefined&&value<this._minValue){field.value=this._minValue;}else if(this._maxValue!=undefined&&value>this._maxValue){field.value=this._maxValue;}else{field.value=value;}}\nreturn event.returnValue=false;break;case Global.KEY_Enter:field.blur();break;case Global.KEY_Backspace:break;case Global.KEY_Delete:break;default:if(event.keyCode>=Global.KEY_NUM_Min&&event.keyCode<=Global.KEY_NUM_Max){if(intValue==0&&at<0)return event.returnValue=false;if(this._maxValue!=undefined){}\nif(this._decimalOptions>0&&field.value.indexOf(\".\")>0){var bits=field.value.length-field.value.indexOf(\".\")-1;}}else if(event.keyCode>=Global.KEY_MIN_Min&&event.keyCode<=Global.KEY_MIN_Max){if(intValue==0&&at<0)return event.returnValue=false;if(this._maxValue!=undefined){}\nif(this._decimalOptions>0&&field.value.indexOf(\".\")>0){var bits=field.value.length-field.value.indexOf(\".\")-1;}}else if(event.keyCode==190||event.keyCode==110){if(this._decimalOptions==0)return event.returnValue=false;if(field.value==\"\")return event.returnValue=false;if(field.value.indexOf(\".\")>=0)return event.returnValue=false;}else{return event.returnValue=false;}}}\n_$proto._onTips=function(){if(!this._minValueBy&&!this._maxValueBy)return;var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(minValue!=undefined&&maxValue!=undefined){this.__original.title=this._getLocale(\"validScope\")+\": \"+minValue+\" - \"+maxValue;}else if(minValue!=undefined){this.__original.title=this._getLocale(\"validScope\")+\": \"+minValue+\" - ~\";}else if(maxValue!=undefined){this.__original.title=this._getLocale(\"validScope\")+\": ~ - \"+maxValue;}}\n_$proto._onBlur=function(){var _this=this;if(this._isFocusing){this._isFocusing=false;try{window.setTimeout(function(){_this.__original.focus();},2);}catch(e){}\nreturn false;}}",
"js.domx.HTMLDateField" : "$package(\"js.domx\");$import(\"js.domx.HTMLFormField\");js.domx.HTMLDateField=function(){this._dataType=\"Date\";this._allowKeyInput=true;this._minValue=undefined;this._minValueBy=\"\";this._maxValue=undefined;this._maxValueBy=\"\";this._pageSize=undefined;this._dateOptions=\"date\";this._isSelecting=false;};var _$class=js.domx.HTMLDateField;_$class.$name=\"HTMLDateField\";_$class.$context=js.domx.HTML;_$class.$extends(js.domx.HTMLFormField);_$class._localeResource={\"dateFormat\":\"\\u65e5\\u671f\\u683c\\u5f0f\\u70ba: YYYY-MM-DD \\n \\u4f8b\\u5982: 2012-05-30\",\"timeFormat\":\"\\u6642\\u9593\\u683c\\u5f0f\\u70ba: HH:MM:SS \\n \\u4f8b\\u5982: 23:59:59\",\"datetimeFormat\":\"\\u65e5\\u671f\\u683c\\u5f0f\\u70ba: YYYY-MM-DD HH:MM:SS \\n\\u4f8b\\u5982: 2012-05-30 23:59:59\",\"pleaseInput\":\"\\u8acb\\u9078\\u64c7\\u6216\\u8f38\\u5165\\\"{0}\\\"!\",\"isnotDate\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u4e0d\\u662f\\u65e5\\u671f\\uff01\\u8acb\\u6ce8\\u610f\\u683c\\u5f0f\\uff1a\\n\\n{1}\",\"mustLess\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u5fc5\\u9808\\u5c0f\\u65bc(\\u7b49\\u65bc)\\\"{1}\\\"!\",\"mustGreater\":\"\\u60a8\\u8f38\\u5165\\u7684\\\"{0}\\\"\\u5fc5\\u9808\\u5927\\u65bc(\\u7b49\\u65bc)\\\"{1}\\\"!\"}\nvar _$proto=_$class.prototype;_$class.getContext=function(){return this.$context;}\n_$proto.setIsReadOnly=function(value){if(this._isReadOnly===value)return;this._isReadOnly=value;this.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");}\n_$proto.getAllowKeyInput=function(){return this._allowKeyInput;}\n_$proto.getMinValue=function(){if(!this._minValueBy){return this._minValue;}else if(typeof(this._minValueBy)!=\"string\"){return this._minValueBy.getDataValue();}else{var field=this._parentForm.getFieldByName(this._minValueBy);if(field){this._minValueBy=field;return field.getDataValue();}}}\n_$proto.setMinValue=function(value){if(value===this._minValue)return;this._minValue=value;this._minValueBy=\"\";}\n_$proto.getMaxValue=function(){if(!this._maxValueBy){return this._maxValue;}else if(typeof(this._maxValueBy)!=\"string\"){return this._maxValueBy.getDataValue();}else{var field=this._parentForm.getFieldByName(this._maxValueBy);if(field){this._maxValueBy=field;return field.getDataValue();}}}\n_$proto.setMaxValue=function(value){if(value===this._maxValue)return;this._maxValue=value;this._maxValueBy=\"\";}\n_$proto.getPageSize=function(){return this._pageSize;}\n_$proto.setPageSize=function(value){this._pageSize=value;}\n_$proto.getDateOptions=function(){return this._dateOptions;}\n_$proto.setDateOptions=function(value){if(value===this._dateOptions)return;this._dateOptions=value;this.fireEvent(\"_onPropertyChanged\",\"dateOptions\");}\n_$proto.getDataText=function(){return this.__original.value;}\n_$proto.getDataValue=function(){return this._convertToDate(this.__original.value);}\n_$proto.setDataValue=function(vDate){var field=this.__original;if(!Global.is(vDate,\"Date\")){vDate=this._convertToDate(vDate);}\nfield.value=vDate.toSTDString(this._dateOptions);this.fireEvent(\"_onValueChanged\");}\n_$class.newInstanceFrom=function(parentForm,vField,vOptions){if(!vField)return null;var obj=new this();obj._parentForm=parentForm;if(typeof(vField)==\"string\"){obj.__original=parentForm.getElementsByName(vField).getFirst();}else{obj.__original=vField;}\nobj._name=obj.__original.name||obj.__original.id||\"\";if(vOptions){obj._separator=vOptions.separator||\"\";obj._label=vOptions.label||\"\";if(vOptions.allowEmpty!=undefined)obj._allowEmpty=vOptions.allowEmpty;if(vOptions.allowKeyInput!=undefined)obj._allowKeyInput=vOptions.allowKeyInput;if(vOptions.isReadOnly!=undefined)obj._isReadOnly=vOptions.isReadOnly;if(vOptions.unfilledPrompt!=undefined)obj._unfilledPrompt=vOptions.unfilledPrompt;if(vOptions.unmatchedPrompt!=undefined)obj._unmatchedPrompt=vOptions.unmatchedPrompt;if(vOptions.dateOptions!=undefined)obj._dateOptions=vOptions.dateOptions;if(vOptions.pageSize!=undefined)obj._pageSize=vOptions.pageSize;if(vOptions.minValue!=undefined){if(typeof(vOptions.minValue)!=\"string\"){obj._minValue=vOptions.minValue;}else if(vOptions.minValue.indexOf(\"->#\")==0){obj._minValueBy=vOptions.minValue.right(\"->#\");}else{obj._minValue=parseFloat(vOptions.minValue);}}\nif(vOptions.maxValue!=undefined){if(typeof(vOptions.maxValue)!=\"string\"){obj._maxValue=vOptions.maxValue;}else if(vOptions.maxValue.indexOf(\"->#\")==0){obj._maxValueBy=vOptions.maxValue.right(\"->#\");}else{obj._maxValue=parseFloat(vOptions.maxValue);}}\nif(vOptions.onEvents){[\"onValidate\",\"onSelect\",\"onReadStateChanged\",\"onValueChanged\"].forEach(function(sEvent){var func=vOptions.onEvents[sEvent];if(func)obj.addEventListener(sEvent,func);});}}\nobj.__original.attachEvent(\"ondblclick\",function(event){obj.selectValues(event);});obj.__original.attachEvent(\"onchange\",function(event){obj.fireEvent(\"_onValueChanged\",event);});obj.__original.attachEvent(\"onblur\",function(event){obj.fireEvent(\"_onBlur\",event);});obj.fireEvent(\"_onPropertyChanged\",\"allowKeyInput\");obj.fireEvent(\"_onPropertyChanged\",\"isReadOnly\");return obj;}\n_$proto.selectValues=function(event){this.fireEvent(\"_onSelect\",event);}\n_$proto.isValidValueFor=function(date){if(!Global.is(date,\"Date\"))return false;var minValue=this.getMinValue();var maxValue=this.getMaxValue();if(minValue!=undefined&&value<minValue){return false;}else if(maxValue!=undefined&&value>maxValue){return false;}else{return true;}}\n_$proto._convertToDate=function(vValue){if(!vValue)return;else if(Global.is(vValue,\"Date\"))return vValue;vValue=vValue.replace(/-|\\./g,\"/\");switch(this._dateOptions){case\"date\":var date=new js.lang.natives.Date(vValue);date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);return date;case\"time\":return new js.lang.natives.Date(\"1900/1/1 \"+vValue);case\"datetime\":return new js.lang.natives.Date(vValue);}}\n_$proto._getHelpInfo=function(){switch(this._dateOptions){case\"date\":return this._getLocale(\"dateFormat\");case\"time\":return this._getLocale(\"timeFormat\");case\"datetime\":return this._getLocale(\"datetimeFormat\");}}\n_$proto.validate=function(iOptions,isSubmiting){var field=this.__original;switch(iOptions){case 0:if(!field.value){if(!this._allowEmpty&&isSubmiting){if(this._unfilledPrompt)alert(this._unfilledPrompt);else alert(this._getLocale(\"pleaseInput\",this._label));try{field.focus();}catch(e){}}\nreturn this._allowEmpty;}\nif(!this._validateDataType(field.value)){alert(this._getLocale(\"isnotDate\",this._label,this._getHelpInfo()));field.value=\"\";try{field.focus();}catch(e){}\nreturn false;}\nbreak;case 1:var minValue=this.getMinValue();var maxValue=this.getMaxValue();var dtValue=this._convertToDate(field.value);if(maxValue!=undefined){if(Global.isDate(maxValue)&&dtValue>maxValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(this._getLocale(\"mustLess\",this._label,maxValue.toSTDString(this._dateOptions)));try{field.focus();}catch(e){}\nreturn false;}}\nif(minValue!=undefined){if(Global.isDate(minValue)&&dtValue<minValue){if(this._unmatchedPrompt)alert(this._unmatchedPrompt);else alert(this._getLocale(\"mustGreater\",this._label,minValue.toSTDString(this._dateOptions)));try{field.focus();}catch(e){}\nreturn false;}}\nbreak;case 2:return this.fireEvent(\"_onValidate\",isSubmiting);}\nreturn true;}\n_$proto._validateDataType=function(sValue){switch(this._dateOptions){case\"date\":return/^[0-9]{4}([.\\/-])[0-9]{1,2}\\1[0-9]{1,2}$/.test(sValue.trim());case\"time\":return/^[0-9]{1,2}:[0-9]{1,2}(:[0-9]{1,2})?$/.test(sValue.trim());case\"datetime\":return/^[0-9]{4}([.\\/-])[0-9]{1,2}\\1[0-9]{1,2}[0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}$/.test(sValue.trim());}}\n_$proto._onPropertyChanged=function(sName){switch(sName){case\"isReadOnly\":if(this._isReadOnly){this.__original.readOnly=this._isReadOnly;}else{this.__original.readOnly=!this._allowKeyInput;}\nthis.fireEvent(\"onReadStateChanged\",this._isReadOnly);break;case\"allowKeyInput\":this.__original.readOnly=!this._allowKeyInput;break;}}\n_$proto._onSelect=function(event){var _this=this;if(this.hasEvent(\"onSelect\")){this._isSelecting=true;this.fireEvent(\"onSelect\",event,this._dateOptions,function(action,value){switch(action){case 1:_this.fireEvent(\"_onSelectingOK\",value);break;case 0:_this.fireEvent(\"_onSelectingCancel\",value);break;}});}}\n_$proto._onSelectingOK=function(value){this.fireEvent(\"_onSelectingFinished\");this.setDataValue(value);}\n_$proto._onSelectingCancel=function(){this.fireEvent(\"_onSelectingFinished\");}\n_$proto._onSelectingFinished=function(){this._isSelecting=false;}\n_$proto._onBlur=function(event){if(this._isSelecting)return;var value=this.__original.value;var flag=![0,1,2].some(function(mode){return!this.validate(mode);},this);if(flag){if(value.trim()!=value){this.__original.value=value.trim();}}\nif(!flag&&this.__original.value)this.selectValues(event);}",
"js.ui.PopupDialog" : "$package(\"js.ui\");$import(\"js.dom.HTML\");$import(\"js.dom.DOMTemplate\");js.ui.PopupDialog=function(){}\nvar _$class=js.ui.PopupDialog;with(_$class){$name=\"PopupDialog\";$extends(\"Object\");_$class._styleLib={\"std\":function(){var path=Engine.runtimeEnvironment.getResPath(\"js.ui\")+\"/PopupDialog\";if(!Browser.Engine.trident){return path+\"/std.css\";}else if(Browser.Engine.version<=3){return path+\"/std.IE6.css\";}else if(document.compatMode==\"CSS1Compat\"){return path+\"/std.css\";}else{return path+\"/std.IE.css\";}}()}\n_$class._styleSkin=\"\";_$class._defaultStyleSkin=\"std\";_$class._styleElement=null;_$class._isApped=false;_$class._isHidden=true;_$class._isAutoHide=true;_$class._htmlElement=null;_$class._outerElement=null;_$class._overlayElement=null;_$class._bodyStyleElement=null;_$class._callBack=null;_$class.returnValue;_$class.DISPLAY_MODE_CONTEXT=0;_$class.DISPLAY_MODE_DROPDOWN=1;_$class.DISPLAY_MODE_POSITION=2;_$class.DISPLAY_ALIGN_LEFT=0;_$class.DISPLAY_ALIGN_CENTER=1;_$class.DISPLAY_ALIGN_RIGHT=2;_$class.DISPLAY_ALIGN_UP=3;_$class.DISPLAY_ALIGN_MIDDLE=4;_$class.DISPLAY_ALIGN_BOTTOM=5;addProperty(true,true,\"htmlElement\",{get:function(){return this._htmlElement;}});addProperty(true,true,\"isHidden\",{get:function(){return this._isHidden;}});addMethod(true,true,\"show\",function(sURL,vArguments,oOptions,oFeatures,fnCallBack){if(!this._isHidden)this.hide();this._isHidden=false;var _this=this;var _owner=oOptions.owner;var _owner_htmElem=_owner.nodeName?_owner:(_owner.getHtmlElement?_owner.getHtmlElement():null);var _win_width=document.compatMode!=\"CSS1Compat\"?document.body.clientWidth:document.documentElement.clientWidth;var _win_height=document.compatMode!=\"CSS1Compat\"?document.body.clientHeight:document.documentElement.clientHeight;var _win_left=document.compatMode!=\"CSS1Compat\"?document.body.scrollLeft:!Global.Browser.Engine.webkit?document.documentElement.scrollLeft:document.body.scrollLeft;var _win_top=document.compatMode!=\"CSS1Compat\"?document.body.scrollTop:!Global.Browser.Engine.webkit?document.documentElement.scrollTop:document.body.scrollTop;var _event=oOptions.event;var _driver=oOptions.driver||\"html\";var _mode=oOptions.mode!=undefined?oOptions.mode:(_owner?1:0);var _autoHide=this._isAutoHide=_mode!=2||oOptions.autoHide==undefined||oOptions.autoHide;var _minWidth=oFeatures.minWidth||100;var _minHeight=oFeatures.minHeight||50;var _width=oFeatures.width||_minWidth;var _height=oFeatures.height||_minHeight;var _align=oFeatures.align!=undefined?oFeatures.align:this.DISPLAY_ALIGN_CENTER;var _left=oFeatures.left!=undefined?oFeatures.left:(_mode==2?-1:0);var _top=oFeatures.top!=undefined?oFeatures.top:(_mode==2?-1:0);var _right=oFeatures.right!=undefined?oFeatures.right:(_mode==2?-1:0);var _bottom=oFeatures.bottom!=undefined?oFeatures.bottom:(_mode==2?-1:0);var _emptyHtml=\"<div class=\\\"empty\\\">no data</div>\";this._htmlElement=document.body.appendChild(document.createElement(\"div\"));this._callBack=fnCallBack;if(!this._styleSkin)this.setStyleSkin(this._defaultStyleSkin);if(oFeatures.style)this.setBodyStyle(oFeatures.style);switch(_mode){case 0:_left=_event.pageX||(_event.clientX+document.body.scrollLeft-document.body.clientLeft);_top=_event.pageY||(_event.clientY+document.body.scrollTop-document.body.clientTop);break;case 1:var _owner_left=HTML.getLeftOnDoc(_owner_htmElem);var _owner_top=HTML.getTopOnDoc(_owner_htmElem);var _owner_width=_owner_htmElem.offsetWidth;var _owner_height=_owner_htmElem.offsetHeight;var _owner_leftWidth=_owner_left-_win_left+1;var _owner_rightWidth=(_win_left+_win_width-1)-(_owner_left+_owner_width-1)+1;var _owner_topHeight=_owner_top-_win_top+1;var _owner_bottomHeight=(_win_top+_win_height-1)-(_owner_top+_owner_height-1)+1;_width=Math.max(_minWidth,oFeatures.width||_owner_htmElem.offsetWidth);if(_width>_win_width){_left=_win_left;}else if(_width<=_owner_width+_owner_rightWidth){_left=_owner_left;}else if(_width<=_owner_width+_owner_leftWidth){_left=_owner_left+_owner_width-1-_width;}else{_left=_win_left+_win_width-_width;}\nif(_height>_win_height){_top=_win_top;}else if(_height<=_owner_bottomHeight){_top=_owner_top+_owner_height;}else if(_height<=_owner_topHeight){_top=_owner_top-_height;}else{_top=_win_top+_win_height-_height;}\nbreak;case 2:this._overlayElement=this._htmlElement;this._outerElement=document.body.appendChild(document.createElement(\"div\"));this._htmlElement=this._outerElement.appendChild(document.createElement(\"div\"));with(this._overlayElement){className=\"PopupDialogOverlay\";setAttribute(\"class\",\"PopupDialogOverlay\");if(Global.Browser.Engine.trident&&Global.Browser.Engine.version==3){innerHTML=\"<iframe frameborder=0 scrolling=no src=\\\"about:blank\\\"\"\n+\" style=\\\"width:100%;height:100%;z-index:-1;left:0;top:0;position:absolute;\\\"\"\n+\" onload=\\\"this.contentWindow.document.body.style.backgroundColor=\"\n+\" this.parentNode.currentStyle.backgroundColor!='transparent'?\"\n+\" this.parentNode.currentStyle.backgroundColor:this.parentNode.firstChild.currentStyle.backgroundColor;\\\"></iframe>\";}}\nwith(this._outerElement){className=\"PopupDialogOuter\";setAttribute(\"class\",\"PopupDialogOuter\");}\nif(_left!=-1&&_right!=-1){_left=-1;}\nif(_top!=-1&&_bottom!=-1){_top=-1;}\nif((_left!=-1||_right!=-1)&&(_top!=-1||_bottom!=-1)){}else if(_left!=-1||_right!=-1){switch(_align){case 3:_top=0;break;case 4:_top=Math.foolr((_win_height-_height)/2);break;case 5:_bottom=0;break;default:_top=Math.floor((_win_height-_height)/2);break;}}else if(_top!=-1||_bottom!=-1){switch(_align){case 0:_left=0;break;case 1:_left=Math.floor((_win_width-_width)/2);break;case 2:_right=0;break;}}else{switch(_align){case 0:_left=0;_top=Math.floor((_win_height-_height)/2);break;case 1:_left=Math.floor((_win_width-_width)/2);_top=Math.floor((_win_height-_height)/2);break;case 2:_right=0;_top=Math.floor((_win_height-_height)/2);break;case 3:_left=Math.floor((_win_width-_width)/2);_top=0;break;case 4:_left=Math.floor((_win_width-_width)/2);_top=Math.floor((_win_height-_height)/2);break;case 5:_left=Math.floor((_win_width-_width)/2);_bottom=0;break;}}\nbreak;}\nwith(this._htmlElement){className=\"PopupDialog\";setAttribute(\"class\",\"PopupDialog\");onclick=function(event){event=event||window.event;event.cancelBubble=true;}}\nif(_left!=-1)this._htmlElement.style.left=_left+\"px\";if(_top!=-1)this._htmlElement.style.top=_top+\"px\";if(_right!=-1)this._htmlElement.style.right=_right+\"px\";if(_bottom!=-1)this._htmlElement.style.bottom=_bottom+\"px\";this._htmlElement.style.width=(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?_width:(_width-2))+\"px\";this._htmlElement.style.height=(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?_height:(_height-2))+\"px\";this._htmlElement.style.zIndex=100;switch(_driver){case\"html\":if(typeof(sURL)!=\"string\"){this._htmlElement.innerHTML=_emptyHtml;}else if(sURL.charAt(0)==\"#\"){var el=Global.dom(sURL).pop();this._htmlElement.innerHTML=el?(el.value||el.text||_emptyHtml):_emptyHtml;}else{this._htmlElement.innerHTML=sURL;}\nbreak;case\"page\":if(typeof(sURL)!=\"string\"){this._htmlElement.innerHTML=_emptyHtml;}else if(sURL.charAt(0)==\"#\"){this._htmlElement.innerHTML=_emptyHtml;}else{with(this._htmlElement){innerHTML=\"<iframe frameborder=0 style=\\\"width:100%;height:100%;\\\" src=\\\"\"+sURL+\"\\\"></iframe>\";}}\nbreak;case\"template\":var tpl,json;if(sURL instanceof Global.DOMTemplate){tpl=sURL;}else if(typeof(sURL)!=\"string\"){}else if(sURL.charAt(0)==\"#\"){tpl=Global.DOMTemplate.newInstanceWithId(sURL.slice(1));}else{tpl=Global.DOMTemplate.newInstanceWithUrl(sURL);}\nswitch(typeof(vArguments)){case\"string\":if(vArguments.slice(0,9)==\"url(xml):\"){json=Global.xml2json(Global.get(vArguments.slice(0,9),\"\",false,\"\",\"XML\"));}else if(vArguments.slice(0,10)==\"url(json):\"){json=Global.get(vArguments.slice(0,10),\"\",false,\"\",\"JSON\");}else{json={};}\nbreak;case\"object\":json=vArguments;break;}\nif(tpl&&json){this._htmlElement.innerHTML=tpl.parse(json,null);if(json.init)json.init(this,this._htmlElement);}else{this._htmlElement.innerHTML=_emptyHtml;}\nbreak;}\nif(Browser.Engine.trident&&Browser.Engine.version==3){this._htmlElement.appendChild(document.createElement(\"<iframe frameborder=0 scrolling=no src=\\\"about:blank\\\"\"\n+\" style=\\\"width:100%;height:100%;z-index:-1;left:0;top:0;position:absolute;\\\"\"\n+\" onload=\\\"this.contentWindow.document.body.style.backgroundColor=\"\n+\" this.parentNode.currentStyle.backgroundColor!='transparent'?\"\n+\" this.parentNode.currentStyle.backgroundColor:this.parentNode.firstChild.currentStyle.backgroundColor;\\\"></iframe>\"));}\nif(_event){_event.cancelBubble=true;_event.returnValue=_event.result={activeApp:_this}}\nif(!this._isApped){document.body.attachEvent(\"onclick\",function(event){event=event||window.event;var data=event.result||event.returnValue;if(typeof(data)==\"object\"&&data.activeApp==_this){return;}else if(!_this._isHidden&&_this._isAutoHide){if(data)data.activeApp=null;_this.hide();}});this._isApped=true;}});addMethod(true,true,\"hide\",function(){if(this._isHidden)return;if(this._htmlElement)this._htmlElement.parentNode.removeChild(this._htmlElement);if(this._outerElement)this._outerElement.parentNode.removeChild(this._outerElement);if(this._overlayElement)this._overlayElement.parentNode.removeChild(this._overlayElement);if(this._bodyStyleElement)this._bodyStyleElement.parentNode.removeChild(this._bodyStyleElement);if(this._callBack)this._callBack(this.returnValue);this._isHidden=true;this._htmlElement=null;this._outerElement=null;this._bodyStyleElement=null;this._callBack=null;this.returnValue=undefined;});addMethod(true,true,\"addStyleSkin\",function(sName,sPath){this._styleLib[sName]=sPath;});addMethod(true,true,\"setStyleSkin\",function(sName){this._styleSkin=sName;if(!this._styleElement){var style=this._styleElement=document.createElement(\"link\");style.type=\"text/css\";style.rel=\"stylesheet\";style.href=this._styleLib[sName];document.getElementsByTagName(\"HEAD\")[0].appendChild(style);}else{this._styleElement.style.href=this._styleLib[sName];}});addMethod(true,true,\"setBodyStyle\",function(sPath){var _this=this;var style=this._bodyStyleElement=document.createElement(\"link\");style.type=\"text/css\";style.rel=\"stylesheet\";style.href=sPath;style.onload=function(){_this._htmlElement.style.zoom=1;}\ndocument.getElementsByTagName(\"HEAD\")[0].appendChild(style);});}",
"js.ui.data.TableData" : "$package(\"js.ui.data\");js.ui.data.TableData=function(rowCount,colCount,data){this._rowCount=0;this._colCount=0;this._actualRowCount=-1;this._actualColCount=-1;this._origData=null;this._data=null;this._attribsMap={\"table\":{\"id\":\"id\",\"className\":\"class\",\"width\":\"width\",\"height\":\"height\",\"cellspacing\":\"cellspacing\",\"cellpadding\":\"cellpadding\",\"align\":\"align\",\"border\":\"border\",\"bordercolor\":\"bordercolor\",\"frame\":\"frame\",\"rules\":\"rules\",\"style\":\"style\"},\"thead\":{\"className\":\"class\",\"style\":\"style\"},\"tbody\":{\"className\":\"class\",\"style\":\"style\"},\"tfoot\":{\"className\":\"class\",\"style\":\"style\"},\"tr\":{\"className\":\"class\",\"style\":\"style\"},\"td\":{\"className\":\"class\",\"rowspan\":\"rowspan\",\"colspan\":\"colspan\",\"style\":\"style\"}}\nthis._tagsMap={\"table\":\"table\",\"range\":\"tbody\",\"row\":\"tr\",\"column\":\"td\"}\nthis._rangeTagsGroup={\"root\":[\"table\",\"row\",\"column\"],\"rows\":[\"range\",\"row\",\"column\"],\"columns\":[\"row\",\"column\"],\"part\":[\"row\",\"column\"]}\nthis._TableData(rowCount,colCount,data);}\nvar _$class=js.ui.data.TableData;var _$proto=_$class.prototype;with(_$class){$name=\"TableData\";$extends(\"Object\");prototype._TableData=function(rowCount,colCount,data){this._rowCount=rowCount||0;this._colCount=colCount||0;this._origData=data;if(!data){this._data={arrangeMode:\"row\",data:[]}}else{this._data={arrangeMode:\"row\",attribs:{},data:[]}\nif(!Global.is(data,\"Object\")){this.addRowRange(data);}else{if(data.id)this._data.id=id;if(data.attribs)this._data.attribs=this._makeRangeAttribsByType(\"root\",data.attribs);if((data.arrangeMode||\"row\")==\"row\"){this._data.arrangeMode=\"row\";this.addRowRange(data.data);}else if(data.arrangeMode==\"column\"){this._data.arrangeMode=\"column\";this.addColumnRange(data.data);}}}}\nprototype.getRowCount=function(){return this._rowCount;}\nprototype.getColumnCount=function(){return this._columnCount;}\nprototype.getActualRowCount=function(){return this._actualRowCount;}\nprototype.getActualColumnCount=function(){return this._actualColCount;}\nprototype.getAttribsMap=function(){return this._attribsMap;}\nprototype.getTagsMap=function(){return this._tagsMap;}\nprototype.getRangeTagsGroup=function(){return this._rangeTagsGroup;}\nprototype.getData=function(){return this._data;}\nprototype.addRowRange=function(data){if(this._data.arrangeMode!=\"row\")return;this.insertRowRange(this._data.data,data,true);}\nprototype.insertRowRange=function(target,data,isRootRow){for(var i=0;i<data.length;i++){var row=data[i];if(Global.isArray(row)){this.insertRow(target,row);}else{switch(row.arrangeMode||\"row\"){case\"row\":var innerRows=target[target.length]={arrangeMode:\"row\",isHeader:!!row.isHeader,attribs:this._makeRangeAttribsByType(isRootRow?\"rows\":\"part\",row.attribs),data:[]};this.insertRowRange(innerRows.data,row.data,isRootRow);break;case\"column\":var innerColumns=target[target.length]={arrangeMode:\"column\",isHeader:!!row.isHeader,attribs:this._makeRangeAttribsByType(\"part\",row.attribs),data:[]};this.insertColumnRange(innerColumns.data,row.data,false);break;}}}}\nprototype.addColumnRange=function(data){if(this._data.arrangeMode!=\"column\")return;this.insertColumnRange(this._data.data,data,true);}\nprototype.insertColumnRange=function(target,data,isRootColumn){for(var i=0;i<data.length;i++){var column=data[i];if(Global.isArray(column)){this.insertColumn(target,column);}else{switch(column.arrangeMode||\"column\"){case\"row\":var innerRows=target[target.length]={arrangeMode:\"row\",attribs:this._makeRangeAttribsByType(\"part\",column.attribs),data:[]};this.insertRowRange(innerRows.data,column.data,false);break;case\"column\":var innerColumns=target[target.length]={arrangeMode:\"column\",attribs:this._makeRangeAttribsByType(isRootColumn?\"columns\":\"part\",column.attribs),data:[]};this.insertColumnRange(innerColumns.data,column.data,isRootColumn);break;}}}}\nprototype._makeRangeAttribsByType=function(type,attribs){var tags=this._rangeTagsGroup[type];var attribs1={};for(var i=0;i<tags.length;i++){var tag=tags[i],actualTag=this._tagsMap[tag];if(attribs&&attribs[tag]){attribs1[tag]={};var attribsMap1=this._attribsMap[actualTag];for(var key in attribsMap1){if(attribsMap1.hasOwnProperty(key)){attribs1[tag][key]=attribs[tag][key];}}}}\nreturn attribs1;}\nprototype.addRow=function(data){if(this._data.arrangeMode!=\"row\")return;this.insertRow(this._data.data,data);}\nprototype.insertRow=function(target,data){var cells=[];for(var i=0;i<data.length;i++){this.insertCell(cells,data[i]);}\ntarget.push(cells);}\nprototype.addColumn=function(data){if(this._data.arrangeMode!=\"column\")return;this.insertColumn(this._data.data,data);}\nprototype.insertColumn=function(target,data){var cells=[];for(var i=0;i<data.length;i++){this.insertCell(cells,data[i]);}\ntarget.push(cells);}\nprototype.insertCell=function(target,vData){if(typeof(vData)!=\"object\"){target.push(vData);}else{var attribs=target[target.length]={text:vData.text||\"\",data:vData.data,isHeader:!!vData.isHeader};var attribsMap=this._attribsMap[\"td\"];for(var key in attribsMap){if(attribsMap.hasOwnProperty(key)){attribs[key]=vData[key];}}}}\nprototype.defineTagAttrib=function(tag,attrib,tagAttrib){if(!this._attribsMap[tag])return;if(this._attribsMap[tag][attrib])return;this._attribsMap[tag][attrib]=tagAttrib;}\nprototype.fix=function(){if(!Global.is(this._data,\"Object\")){var sizeDatas=this._getRowRangeSizeData(this._data);this._actualRowCount=sizeDatas[1];this._actualColCount=sizeDatas[2];this._fixRowRange(this._data,sizeDatas,sizeDatas[1],sizeDatas[2]);}else if(this._data.arrangeMode==\"row\"){var sizeDatas=this._getRowRangeSizeData(this._data);this._actualRowCount=sizeDatas[1];this._actualColCount=sizeDatas[2];this._fixRowRange(this._data,sizeDatas,sizeDatas[1],sizeDatas[2]);}else if(this._data.arrangeMode==\"column\"){var sizeDatas=this._getColumnRangeSizeData(this._data);this._actualRowCount=sizeDatas[2];this._actualColCount=sizeDatas[1];this._fixColumnRange(this._data,sizeDatas,sizeDatas[1],sizeDatas[2]);}\nreturn this;}\nprototype._fixRowRange=function(vData,sizeData,maxRows,maxColumns){var sizeData1=sizeData[0];var actualRowCount=sizeData[1];var actualColCount=sizeData[2];var rows=[],iRow=-1;maxColumns=maxColumns||actualColCount;rows=Global.is(vData,\"Object\")&&vData.data||vData;for(var i=0;i<rows.length;i++){var row=rows[i];if(Global.is(row,\"Object\")){if(row.arrangeMode==\"row\"){this._fixRowRange(row,sizeData1[i],0,maxColumns);iRow+=sizeData1[i][1];}else if(row.arrangeMode==\"column\"){this._fixColumnRange(row,sizeData1[i],maxColumns,0);iRow+=sizeData1[i][2];}}else{var rowCells=row;iRow++;var rowColCount=sizeData1[i];var lastCell=rowCells.length?rowCells[rowCells.length-1]:null;if(lastCell&&Global.is(lastCell,\"Object\")&&lastCell.colspan==-1){lastCell.colspan=maxColumns-rowColCount+1;}else{rowCells.fill(\"\",maxColumns-rowColCount,rowCells.length);}}}\nrows.fill([].fill(\"\",maxColumns),maxRows-iRow-1,iRow+1);}\nprototype._fixColumnRange=function(vData,sizeData,maxColumns,maxRows){var sizeData1=sizeData[0];var actualColCount=sizeData[1];var actualRowCount=sizeData[2];var columns=[],iColumn=-1;maxRows=maxRows||actualRowCount;columns=Global.is(vData,\"Object\")&&vData.data||vData;for(var i=0;i<columns.length;i++){var column=columns[i];if(Global.is(column,\"Object\")){if(column.arrangeMode==\"column\"){this._fixColumnRange(column,sizeData1[i],0,maxRows);iColumn+=sizeData1[i][1];}else if(column.arrangeMode==\"row\"){this._fixRowRange(column,sizeData1[i],maxRows,0);iColumn+=sizeData1[i][2];}}else{var colCells=column;iColumn++;var colRowCount=sizeData1[i];var lastCell=colCells.length?colCells[colCells.length-1]:null;if(lastCell&&Global.is(lastCell,\"Object\")&&lastCell.rowspan==-1){lastCell.rowspan=maxRows-colRowCount+1;}else{colCells.fill(\"\",maxRows-colRowCount,colCells.length);}}}\ncolumns.fill([].fill(\"\",maxRows),maxColumns-iColumn-1,iColumn+1);}\nprototype._getRowRangeSizeData=function(vData){var rowsCells=[];var rows=[],iRow=-1,maxRows=0,maxColumns=0;if(Global.is(vData,\"Object\")){rows=vData.data;}else{rows=vData;}\nfor(var i=0;i<rows.length;i++){var row=rows[i];if(Global.is(row,\"Object\")){if(row.arrangeMode==\"row\"){var sizeDatas=this._getRowRangeSizeData(row);var sizeData=sizeDatas[0];maxRows+=sizeDatas[1];maxColumns=Math.max(maxColumns,sizeDatas[2]);rowsCells[++iRow]=sizeDatas;}else if(row.arrangeMode==\"column\"){var sizeDatas=this._getColumnRangeSizeData(row);maxRows+=sizeDatas[2];maxColumns=Math.max(maxColumns,sizeDatas[1]);rowsCells[++iRow]=sizeDatas;}}else{var rowCells=row;iRow++;if(iRow>=rowsCells.length)rowsCells[iRow]=0;for(var j=0;j<rowCells.length;j++){var cell=rowCells[j];rowsCells[iRow]+=1;if(cell&&Global.is(cell,\"Object\")){if(cell.colspan>1){rowsCells[iRow]+=cell.colspan-1;}\nif(cell.rowspan>1){for(var k=1;k<cell.rowspan;k++){rowsCells[iRow+k]=(iRow+k<rowsCells.length)?(rowsCells[iRow+k]+1):1;}}}};maxRows++;maxColumns=Math.max(maxColumns,rowsCells[iRow]);}}\nreturn[rowsCells,maxRows,maxColumns];}\nprototype._getColumnRangeSizeData=function(vData){var columnsCells=[];var columns=[],iColumn=-1,maxRows=0,maxColumns=0;if(Global.is(vData,\"Object\")){columns=vData.data;}else{columns=vData;}\nfor(var i=0;i<columns.length;i++){var column=columns[i];if(Global.is(column,\"Object\")){if(column.arrangeMode==\"column\"){var sizeDatas=this._getColumnRangeSizeData(column);var sizeData=sizeDatas[0];maxColumns+=sizeDatas[1];maxRows=Math.max(maxColumns,sizeDatas[2]);columnsCells[++iColumn]=sizeDatas;}else if(column.arrangeMode==\"row\"){var sizeDatas=this._getRowRangeSizeData(column);maxColumns+=sizeDatas[2];maxRows=Math.max(maxRows,sizeDatas[1]);columnsCells[++iColumn]=sizeDatas;}}else{var colCells=column;iColumn++;if(iColumn>=columnsCells.length)columnsCells[iColumn]=0;for(var j=0;j<colCells.length;j++){var cell=colCells[j];columnsCells[iColumn]+=1;if(cell&&Global.is(cell,\"Object\")){if(cell.rowspan>1){columnsCells[iColumn]+=cell.rowspan-1;}\nif(cell.colspan>1){for(var k=1;k<cell.colspan;k++){columnsCells[iColumn+k]=(iColumn+k<columnsCells.length)?(columnsCells[iColumn+k]+1):1;}}}};maxColumns++;maxRows=Math.max(maxRows,columnsCells[iColumn]);}}\nreturn[columnsCells,maxColumns,maxRows];}}",
"js.ui.parser.Table" : "$package(\"js.ui.parser\");$import(\"js.ui.data.TableData\");js.ui.parser.Table=function(database){this._database;this._Table(database);}\nvar _$class=js.ui.parser.Table;var _$proto=_$class.prototype;with(_$class){$name=\"Table\";$extends(\"Object\");prototype._Table=function(database){this._database=database;}\nprototype.getDatabase=function(){return this._database;}\nprototype.parse=function(){var data=this._database.getData();var html=\"\",htmlTag=\"table\",htmlAttribs=\"\",htmlBody=\"\";htmlAttribs=this._parseTagAttribs(this._database.getAttribsMap()[htmlTag],data.attribs&&data.attribs[\"table\"]);if(data.arrangeMode==\"row\"){htmlBody=this._parseRowRange(data.data,true).join(\"\");}else if(data.arrangeMode==\"column\"){htmlBody=this._parseColumnRange(data.data,true).join(\"\");}\nhtml=\"<\"+[].concat(htmlTag,htmlAttribs).join(\" \")+\">\"+htmlBody+\"</\"+htmlTag+\">\";return html;}\nprototype._parseRowRange=function(vData,isRootRow){var html=\"\",htmlTag=\"\",htmlAttribs={},htmlBody=\"\";var rows=[],htmlRows=[];rows=Global.is(vData,\"Object\")&&vData.data||vData;for(var i=0;i<rows.length;i++){var row=rows[i];if(Global.is(row,\"Object\")){if(row.arrangeMode==\"row\"){htmlRows.append(this._parseRowRange(row,isRootRow));}else if(row.arrangeMode==\"column\"){htmlRows.append(this._parseColumnRange(row,false,isRootRow));}}else{htmlRows.push(this._parseRow(row,Global.is(vData,\"Object\")?vData.attribs:null,isRootRow));}}\nif(isRootRow&&Global.is(vData,\"Object\")&&vData.attribs&&vData.attribs[\"range\"]){htmlTag=this._database.getTagsMap()[\"range\"];htmlAttribs=this._parseTagAttribs(this._database.getAttribsMap()[htmlTag],vData.attribs[\"range\"]);return html=\"<\"+[].concat(htmlTag,htmlAttribs1).join(\" \")+\">\"+htmlBody+\"</\"+htmlTag+\">\";}else{return htmlRows;}}\nprototype._parseColumnRange=function(vData,isRootColumn,isRootRow){var columns=[],htmlColumns=[],htmlFullColumn=[];columns=Global.is(vData,\"Object\")&&vData.data||vData;for(var i=0;i<columns.length;i++){var column=columns[i];if(Global.is(column,\"Object\")){if(column.arrangeMode==\"row\"){htmlColumns.push(this._parseRowRange(column,false));}else if(column.arrangeMode==\"column\"){htmlColumns.push(this._parseColumnRange(column,isRootColumn,false));}}else{var colCells=column,htmlColumn=[];for(var k=0,k1=0;k<colCells.length;k++){htmlColumn.push(this._parseCell(colCells[k],Global.is(vData,\"Object\")&&vData.attribs&&vData.attribs[\"column\"]||null));var rowspan=colCells[k]&&colCells[k].rowspan||1;for(var k2=1;k2<rowspan;k2++){htmlColumn.push(\"\");}\nk1+=rowspan;}\nhtmlColumns.push(htmlColumn);}}\nhtmlFullColumn=this._mergeColumns.apply(this,htmlColumns);if(isRootRow){var htmlTag=this._database.getTagsMap()[\"row\"];var htmlAttribs=this._parseTagAttribs(this._database.getAttribsMap()[htmlTag],\"\",Global.is(vData,\"Object\")&&vData.attribs&&vData.attribs[\"row\"]||null);htmlFullColumn=htmlFullColumn.map(function(cell){return\"<\"+[].concat(htmlTag,htmlAttribs).join(\" \")+\">\"+cell+\"</\"+htmlTag+\">\";});}\nreturn htmlFullColumn;}\nprototype._mergeColumns=function(){var argsLen=arguments.length;var lens=[],rows=[],maxRows=0;for(var j=0;j<argsLen;j++){lens[j]=arguments[j].length;}\nmaxRows=Math.max.apply(Math,lens);for(var i=0;i<maxRows;i++){for(var j=0;j<argsLen;j++){rows[i]=i<rows.length?rows[i]:[];rows[i][rows[i].length]=i<arguments[j].length?arguments[j][i]:\"\";}\nrows[i]=rows[i].join(\"\");}\nreturn rows;}\nprototype._parseRow=function(vData,oCommAttribs,isRootRow){var html=\"\",htmlTag=\"\",htmlAttribs=\"\",htmlBody=\"\";htmlTag=this._database.getTagsMap()[\"row\"];htmlBody=vData.map(function(cell){return this._parseCell(cell,oCommAttribs&&oCommAttribs[isRootRow?\"column\":\"row\"]||null);},this).join(\"\");if(isRootRow){htmlAttribs=this._parseTagAttribs(this._database.getAttribsMap()[htmlTag],\"\",oCommAttribs&&oCommAttribs[\"row\"]||null);html=\"<\"+[].concat(htmlTag,htmlAttribs).join(\" \")+\">\"+htmlBody+\"</\"+htmlTag+\">\";}else{html=htmlBody;}\nreturn html;}\nprototype._parseCell=function(vData,oCommAttribs){var htmlTag=\"\",htmlAttribs=[],htmlBody=\"\";htmlTag=oCommAttribs&&oCommAttribs.isHeader?\"th\":\"td\";htmlTag=vData&&Global.is(vData,\"Object\")&&vData.isHeader?\"th\":htmlTag;htmlBody=vData&&Global.is(vData,\"Object\")?vData.text:(\"\"+vData);htmlBody=htmlBody||\"&nbsp;\";htmlAttribs=this._parseTagAttribs(this._database.getAttribsMap()[\"td\"],vData,oCommAttribs);return\"<\"+[].concat(htmlTag,htmlAttribs).join(\" \")+\">\"+htmlBody+\"</\"+htmlTag+\">\";}\nprototype._parseTagAttribs=function(attribsMap,oAttribs,oCommAttribs){var htmlAttribs=[];var attribNames=[],tagAttribNames=[];var attribNames1=[],attribNames2=[];var attribValues1=[],attribValues2=[];for(var key in attribsMap){if(attribsMap.hasOwnProperty(key)){attribNames.push(key);tagAttribNames.push(attribsMap[key]);}}\nif(oAttribs&&Global.is(oAttribs,\"Object\")){attribNames2=attribNames.select(function(item){return!!oAttribs[item];});attribValues2=attribNames2.map(function(item){return oAttribs[item];});}\nif(oCommAttribs){attribNames1=attribNames.select(function(item){return!!oCommAttribs[item];});attribNames1=attribNames1.select(function(item){return!attribNames2.contains(item);});attribValues1=attribNames1.map(function(item){return oCommAttribs[item];});}\nhtmlAttribs.append(attribNames1.map(function(sName,index){return attribsMap[sName]+\"=\\\"\"+attribValues1[index]+\"\\\"\";}),attribNames2.map(function(sName,index){return attribsMap[sName]+\"=\\\"\"+attribValues2[index]+\"\\\"\";}));return htmlAttribs;}}",
"js.ui.table.TableDataEditor" : "$package(\"js.ui.table\");$import(\"js.domx.HTMLForm\");$import(\"js.domx.HTMLFormField\");$import(\"js.domx.HTMLTextField\");$import(\"js.domx.HTMLSelectField\");$import(\"js.domx.HTMLNumberField\");$import(\"js.domx.HTMLDateField\");js.ui.table.TableDataEditor=function(htmlContainer,vOptions,vWidth){this._id=\"\";this._rows=[];this._columns=[];this.__columns={\"No\":{title:\"\",width:\"\",isHidden:true},\"Select\":{},\"Action\":{width:\"\",actions:[\"add,insert,moveup,delete\",\"moveup,delete\"]}}\nthis._fieldAdjustHandles=[];this._minRowsCount=0;this._maxRowsCount=100;this.__minRowsCount=0;this.__maxRowsCount=300;this._openMode=0;this._isHidden=true;this._status=0;this._width=\"\";this._enabledNoCol=false;this._enabledSelectCol=false;this._enabledActionCol=true;this.__noColIndex=-1;this.__selColIndex=-1;this.__startDataColIndex=0;this._isImmdApply=true;this._immdApplyMode=0;this._storeFields={};this._dataSeparator=\";\";this._htmlElement=null;this._htmlMain=null;this._htmlHead=null;this._htmlBody=null;this._parentForm=null;this._activeRow=null;this.__usedIDCount=0;this._TableDataEditor(htmlContainer,vOptions,vWidth);}\nvar _$class=js.ui.table.TableDataEditor;var _$proto=_$class.prototype;with(_$class){$name=\"TableDataEditor\";$extends(\"Object\");_$class._version=\"0.9.1\";_$class._localeResource={\"tipsOfAddButton\":\"\\u6dfb\\u52a0\",\"tipsOfInsertButton\":\"\\u63d2\\u5165\",\"tipsOfDeleteButton\":\"\\u522a\\u9664\",\"tipsOfMoveUpButton\":\"\\u5411\\u4e0a\\u79fb\\u52d5\",\"tipsOfMoveDownButton\":\"\\u5411\\u4e0b\\u79fb\\u52d5\",\"canotAddRowInLimitCount\":\"\\u5df2\\u9054\\u5230\\u6700\\u5927\\u8a18\\u9304\\u689d\\u6578\\u9650\\u5236\\uff0c\\u4e0d\\u80fd\\u518d\\u6dfb\\u52a0\\u4e86\\uff01\",\"canotDeleteRowInLimitCount\":\"\\u5df2\\u9054\\u5230\\u6700\\u5c0f\\u8a18\\u9304\\u689d\\u6578\\u9650\\u5236\\uff0c\\u4e0d\\u80fd\\u518d\\u522a\\u9664\\u4e86\\uff01\"}\n_$class.OpenModeEnum={\"Read\":0,\"Edit\":1}\n_$class.ColumnAlignEnum={\"Left\":0,\"Center\":1,\"Right\":2}\n_$class.ColumnTypeEnum={\"Text\":\"Text\",\"Number\":\"Number\",\"Date\":\"Date\"}\n_$class._resPath=Engine.runtimeEnvironment.getResPath(\"js.ui.table\")+\"/TableDataEditor\";_$class._styleLib={\"default\":_$class._resPath+\"/\"+(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"\n?\"TableDataEditor.IE.css\":\"TableDataEditor.css\")}\n_$class._styleSkin=\"\";_$class._defaultStyleSkin=\"default\";_$class._styleElement=null;_$class._isInstanced=false;_$class._actions={\"add\":{title:_$class._localeResource[\"tipsOfAddButton\"],icon:\"add.gif\",doAction1:function(_this){_this.addRow();}},\"insert\":{title:_$class._localeResource[\"tipsOfInsertButton\"],icon:\"insert.gif\",doAction1:function(_this){_this.insertRow(_this.getActiveRow()?_this.getActiveRow().getIndex():-1);}},\"moveup\":{title:_$class._localeResource[\"tipsOfMoveUpButton\"],icon:\"up.gif\",doAction1:function(_this){var rows=_this.getSelectedRows();rows=rows.length?rows:[].concat(_this.getActiveRow()||[]);if(!rows.length||rows[0].getIndex()<=0)return;rows.forEach(function(row){row.moveUp();});},doAction2:function(_this){_this.moveUp();}},\"movedown\":{title:_$class._localeResource[\"tipsOfMoveDownButton\"],icon:\"down.gif\",doAction1:function(_this){var rows=_this.getSelectedRows();rows=rows.length?rows:[].concat(_this.getActiveRow()||[]);if(!rows.length||rows.getLast().getIndex()>=_this.getRowsCount()-1)return;for(var i=rows.length-1;i>=0;i--){rows[i].moveDown();}},doAction2:function(_this){_this.moveDown();}},\"delete\":{title:_$class._localeResource[\"tipsOfDeleteButton\"],icon:\"delete.gif\",doAction1:function(_this){var rows=_this.getSelectedRows();if(rows.length>0){rows.forEach(function(row){row.remove();});}else if(_this.getActiveRow()){_this.getActiveRow().remove();}},doAction2:function(_this,event){event=event||window.event;event.cancelBubble=true;_this.remove();return false;}}}\nprototype._TableDataEditor=function(htmlContainer,vOptions,vWidth){this.getClass().fireEvent(\"_onBeforeInstance\",this);if(htmlContainer==null){this._htmlElement=document.createElement(\"div\");}else if(htmlContainer==\"\"){var elScript=document.scripts[document.scripts.length-1];this._htmlElement=elScript.insertAdjacentElement(\"beforeBegin\",document.createElement(\"div\"));}else{this._htmlElement=htmlContainer.appendChild(document.createElement(\"div\"));}\nthis._id=\"JKTE\"+Global.newId();this._openMode=vOptions.openMode;this._parentForm=vOptions.parentForm||document.forms[0];if(!(this._parentForm instanceof js.domx.HTMLForm)){this._parentForm=js.domx.HTMLForm.newInstanceFrom(this._parentForm);}\nthis._dataSeparator=vOptions.dataSeparator||\";\";this._enabledNoCol=vOptions.enabledNoCol||false;this._enabledSelectCol=this._openMode==0?false:(vOptions.enabledSelectCol||false);this._enabledActionCol=this._openMode==0?false:(vOptions.enabledActionCol||(vOptions.enabledActionCol==undefined));this.__selColIndex=!this._enabledSelectCol?-1:0;this.__noColIndex=!this._enabledNoCol?-1:(!this._enabledSelectCol?0:1);this.__startDataColIndex=this.__selColIndex+1+this.__noColIndex+1;this._minRowsCount=Math.max(this.__minRowsCount,Math.min(vOptions.minRowsCount,this._maxRowsCount));this._maxRowsCount=Math.min(Math.max(this._minRowsCount,vOptions.maxRowsCount),this.__maxRowsCount);if(vOptions.encodeText){this.encodeText=vOptions.encodeText;}\nif(vOptions.decodeText){this.decodeText=vOptions.decodeText;}\nfor(var colName in vOptions.columns){this._setColumn(colName,vOptions.columns[colName]);}\nthis._width=vWidth;with(this._htmlElement){className=[\"TableDataReader\",\"TableDataEditor\"][this._openMode];style.display=this._isHidden?\"none\":\"\";style.width=this._width;with(this._htmlMain=appendChild(window.document.createElement(\"table\"))){cellSpacing=\"0\";cellPadding=\"3\";with(createTHead()){with(this._htmlHead=insertRow(-1)){className=\"TableTitle\";if(this._openMode==1&&this._enabledSelectCol){with(insertCell(-1)){className=\"col-select\";appendChild(this._createSelectColumn());}}\nif((this._openMode==1||(!this.__columns[\"No\"].isHidden))&&this._enabledNoCol){with(insertCell(-1)){className=\"col-no\";style.width=this.__columns[\"No\"].width;style.textAlign=[\"left\",\"center\",\"right\"][this._openMode==1?2:this.__columns[\"No\"].headerAlign];innerHTML=this.__columns[\"No\"].title;}}\nif(this._openMode==1&&this._enabledActionCol){with(insertCell(-1)){className=\"col-action\";style.width=this.__columns[\"Action\"].width;appendChild(this._createActionColumn());}}}}\nwith(this._htmlBody=tBodies.length?tBodies[0]:appendChild(window.document.createElement(\"tbody\"))){className=\"TableBody\";}}}\nthis.getClass().fireEvent(\"_onAppInstanced\",this);}\naddProperty(true,true,\"resPath\",{get:function(){return this._resPath;}});prototype.getStatus=function(){return this._status;}\nprototype.getRowsCount=function(){return this._rows.length;}\nprototype.getColumnsCount=function(){return this._columns.length;}\nprototype.getMinRowsCount=function(){return this._minRowsCount;}\nprototype.setMinRowsCount=function(value){this._minRowsCount=Math.max(this.__minRowsCount,Math.min(value,this._maxRowsCount));}\nprototype.getMaxRowsCount=function(){return this._maxRowsCount;}\nprototype.setMaxRowsCount=function(value){this._maxRowsCount=Math.min(Math.max(this._minRowsCount,value),this.__maxRowsCount);}\nprototype.getOpenMode=function(){return this._openMode;}\nprototype.setOpenMode=function(value){if(this._status!=0)return;if(this._openMode==value)return;this._openMode=value;}\nprototype.getEnabledSelectCol=function(){return this._enabledSelectCol;}\nprototype.getEnabledNoCol=function(){return this._enabledNoCol;}\nprototype.getEnabledActionCol=function(){return this._enabledActionCol;}\nprototype.getIsImmdApply=function(){return this._isImmdApply;}\nprototype.setIsImmdApply=function(value){if(this._status!=0)return;if(this._isImmdApply==value)return;this._isImmdApply=value;}\nprototype.getImmdApplyMode=function(){return this._immdApplyMode;}\nprototype.getParentForm=function(){return this._parentForm;}\nprototype.getDataSeparator=function(){return this._dataSeparator;}\nprototype.getActiveRow=function(){return this._activeRow;}\nprototype.getHtmlElement=function(){return this._htmlElement;}\nprototype.show=function(){this._htmlElement.style.display=\"\";}\nprototype.hide=function(){this._htmlElement.style.display=\"none\";}\nprototype.addRow=function(){if(this._status==0){alert(\"Has no initial yet!\");return null;}\nif(this._rows.length>=this._maxRowsCount){alert(this._getLocale(\"canotAddRowInLimitCount\"));return null;}\nreturn this._addRow();}\nprototype._addRow=function(){var Row=this.getClass().Row;return new Row(this);}\nprototype.insertRow=function(index){if(this._status==0){alert(\"No initial yet!\");return null;}\nif(this._rows.length>=this._maxRowsCount){alert(this._getLocale(\"canotAddRowInLimitCount\"));return null;}\nreturn this._insertRow(index);}\nprototype._insertRow=function(index){var Row=this.getClass().Row;return new Row(this,index);}\nprototype.addColumn=function(sTitle,sName,sType,vWidth,iHeaderAlign,iAlign){if(this._status!=0){alert(\"Has loaded table data, can not add column again!\");return null;}\nvar Column=this.getClass().Column;return new Column(this,sTitle,sName,sType,vWidth,iHeaderAlign,iAlign);}\nprototype._setColumn=function(sName,vOptions){if(this._status!=0)return;var col=this.__columns[sName];switch(sName){case\"No\":this.__columns[sName]={title:vOptions.title||col.title,width:vOptions.width||col.width,headerAlign:vOptions.headerAlign||2,align:vOptions.align||vOptions.headerAlign||0,isHidden:vOptions.isHidden||vOptions.isHidden==undefined}\nbreak;case\"Select\":break;case\"Action\":this.__columns[sName]={width:vOptions.width||col.width,actions:vOptions.actions||col.actions}\nbreak;}}\nprototype.addFieldAdjustHandle=function(vColNames,fnHandle){this._fieldAdjustHandles.push([vColNames,fnHandle]);}\nprototype.getRow=function(index){return this._rows[index];}\nprototype.getRowById=function(id){for(var i=0;i<this._rows.length;i++){if(this._rows[i].getId()==id)return this._rows[i];}\nreturn null;}\nprototype.getRowByEl=function(el){for(var i=0;i<this._rows.length;i++){if(this._rows[i].getHtmlElement()==el)return this._rows[i];}\nreturn null;}\nprototype.getColumn=function(index){return this._columns[index];}\nprototype.getColumnByName=function(sName){for(var i=0;i<this._columns.length;i++){if(this._columns[i].getName()==sName)return this._columns[i];}\nreturn null;}\nprototype.getSelectedRows=function(){return this._rows.select(function(row){return row.getChecked();});}\nprototype.swapRow=function(row1,row2){this._rows[row1.getIndex()]=row2;this._rows[row2.getIndex()]=row1;if(row1.getIndex()<row2.getIndex()){this._htmlBody.insertBefore(row2.getHtmlElement(),row1.getHtmlElement());if(row2.getIndex()<this._rows.length-1){this._htmlBody.insertBefore(row1.getHtmlElement(),this._rows[row2.getIndex()+1].getHtmlElement());}else{this._htmlBody.appendChild(row1.getHtmlElement());}}else{this._htmlBody.insertBefore(row1.getHtmlElement(),row2.getHtmlElement());if(row1.getIndex()<this._rows.length-1){this._htmlBody.insertBefore(row2.getHtmlElement(),this._rows[row1.getIndex()+1].getHtmlElement());}else{this._htmlBody.appendChild(row2.getHtmlElement());}}\nthis.fireEvent(\"_onSwapRow\",[row1,row2]);}\nprototype.moveUpRows=function(rows){if(!rows.length||rows[0].getIndex()<=0)return;rows.forEach(function(row){row.moveUp();});}\nprototype.moveDownRows=function(rows){if(!rows.length||rows[0].getIndex()>=this._rows.length-1)return;rows.forEach(function(row){row.moveDown();});}\nprototype.setRowsCountLimit=function(iMin,iMax){this._minRowsCount=Math.max(this.__minRowsCount,Math.min(iMin,iMax));this._maxRowsCount=Math.min(Math.max(iMin,iMax),this.__maxRowsCount);}\nprototype.setIsAllRequiredFill=function(){for(var i=0,iLen=this._columns.length;i<iLen;i++){this._columns[i].setAllowEmpty(false);}}\nprototype.setIsAllOptionalFill=function(){for(var i=0,iLen=this._columns.length;i<iLen;i++){this._columns[i].setAllowEmpty(true);}}\nprototype.setStoreFieldFor=function(sProName,elField){switch(sProName){case\"AllCount\":this._storeFields[sProName]=elField;break;}}\nprototype.load=function(){if(this._status!=0)return false;var allCount=parseInt(\"0\"+this._storeFields[\"AllCount\"].value,10);for(var i=0;i<allCount;i++){this._addRow();}\nthis._fixStoreRecordsCount();this._status=1;this.fireEvent(\"_onLoaded\");if(this._minRowsCount>allCount){for(var i=0,iLen=this._minRowsCount-allCount;i<iLen;i++){this.addRow();}}}\nprototype.reload=function(){for(var i=0,iLen=this._rows.length;i<iLen;i++){this._rows[i].reload();}}\nprototype.reset=function(){for(var i=0;i<this._rows.length;i++){this._rows[i].reload();}}\nprototype.validate=function(){return!this._rows.some(function(row){return!row.validate();},this);}\nprototype.trim=function(){if(this._openMode!=1)return;for(var i=this._rows.length-1;i>=0;i--){if(this._rows[i].isEmpty()){if(this._rows.length>this._minRowsCount)this._rows[i].remove();}}}\nprototype.selectAll=function(isSelect){if(!this._enabledSelectCol)return;var oCell=this._htmlHead.cells[this.__selColIndex];var el=Global.dom(\"input\",oCell).getFirst();isSelect=isSelect==undefined?!el.checked:isSelect;this._rows.forEach(function(row){row.setChecked(isSelect);});el.checked=isSelect;}\nprototype.clearEmpty=function(){if(this._openMode!=1)return;for(var i=0;i<this._rows.length;i++){this._rows[i].clearEmpty();}}\nprototype.removeAll=function(){if(this._openMode!=1)return;for(;this._rows.length>this._minRowsCount;){this._rows[this._rows.length-1].remove();}}\nprototype._removeAll=function(){for(;this._rows.length>0;){this._rows[this._rows.length-1].remove();}}\nprototype.save=function(){if(this.getOpenMode()==0)return;if(this._status==0)return;for(var i=0;i<this._columns.length;i++){var oColumn=this._columns[i];var vValue=[],vText=[];if(!oColumn.getInputOptions(\"allowKeywordSyno\")){for(var j=0;j<this._rows.length;j++){var vColumnValue=this._rows[j].getColumnField(i).getStoreValues(0);vValue[j]=this.encodeText(vColumnValue,this._dataSeparator);}\noColumn.getDataFields()[0].value=vValue.join(this._dataSeparator);}else{for(var j=0;j<this._rows.length;j++){var vColumnText=this._rows[j].getColumnField(i).getStoreValues(0);var vColumnValue=this._rows[j].getColumnField(i).getStoreValues().pop();vText[j]=this.encodeText(vColumnText,this._dataSeparator);vValue[j]=this.encodeText(vColumnValue,this._dataSeparator);}\noColumn.getDataFields(0).value=vText.join(this._dataSeparator);oColumn.getDataFields(1).value=vValue.join(this._dataSeparator);}}\nvar oField=this._storeFields[\"AllCount\"];if(oField)oField.value=this._rows.length;}\nprototype.encodeText=function(text,separator){return text.replace(/%/g,encodeURIComponent(\"%\")).replace(new RegExp(separator,\"ig\"),encodeURIComponent(separator)).replace(new RegExp(\"\\r\",\"ig\"),\"\").replace(new RegExp(\"\\n\",\"ig\"),encodeURIComponent(\"\\n\"));}\nprototype.decodeText=function(text,separator){return decodeURIComponent(text);}\nprototype._fixStoreRecordsCount=function(){var allRowsCount=parseInt(\"0\"+this._storeFields[\"AllCount\"].value,10);for(var i=0,iLen=this._columns.length;i<iLen;i++){var oColumn=this._columns[i];var aDataFields=oColumn.getDataFields();for(var j=0,jLen=oColumn.getInputOptions(\"allowKeywordSyno\")?2:1;j<jLen;j++){var aValues=aDataFields[j].value==\"\"?[]:aDataFields[j].value.split(\";\");aValues.fill(\"\",allRowsCount-aValues.length,aValues.length).slice(0,allRowsCount);aDataFields[j].value=aValues.join(this._dataSeparator);}}}\nprototype._createSelectColumn=function(){var _this=this;var _htmlElement=document.createElement(\"input\");with(_htmlElement){type=\"checkbox\";onclick=function(){_this.selectAll(this.checked);}}\nreturn _htmlElement;}\nprototype._createActionColumn=function(){var _this=this;var _htmlElement=document.createElement(\"div\");var column=this.__columns[\"Action\"];for(var i=0,names=column.actions[0].split(\",\");i<names.length;i++){var _action=this.getClass()._actions[names[i]];with(_htmlElement){with(appendChild(window.document.createElement(\"img\"))){className=\"ActionButton\";title=_action.title;src=this.getClass().getResPath()+\"/\"+_action.icon;onclick=function(){var _action1=_action;return function(event){return _action1.doAction1(_this,event);}}();}}}\nreturn _htmlElement;}\nprototype.attachEvent=function(sEvent,fpNotify){switch(sEvent){case\"onReady\":case\"onLoaded\":this[sEvent]=fpNotify;break;default:}}\nprototype._getLocale=function(key,value){var strObj=Global.Object(this.getClass()._localeResource[key]);return strObj.format.apply(strObj,Global.js.lang.natives.Array.from(arguments).slice(1)).valueOf();}\naddMethod(true,true,\"fireEvent\",function(sEvent,oEventObject){if(typeof(this[sEvent])!=\"function\")return;try{return this[sEvent](oEventObject);}catch(e){throw new Error(1000,\"Event '\"+sEvent+\"' of object '\"+this.getName()+\"' has been runned error!\\nSource: \"\n+e.description);}});addMethod(true,true,\"addStyleSkin\",function(sName,sPath){this._styleLib[sName]=sPath;});addMethod(true,true,\"setStyleSkin\",function(sName){this._styleSkin=sName;if(!this._styleElement){var style=this._styleElement=document.createElement(\"link\");style.type=\"text/css\";style.rel=\"stylesheet\";style.href=this._styleLib[sName];document.getElementsByTagName(\"HEAD\")[0].appendChild(style);}else{this._styleElement.style.href=this._styleLib[sName];}});addEventListener(true,false,\"onReady\",function(){if(!this._styleSkin)this.setStyleSkin(this._defaultStyleSkin);this._isInstanced=true;});addEventListener(true,false,\"onBeforeInstance\",function(){if(this._isInstanced)return;this.fireEvent(\"_onReady\");});addEventListener(true,false,\"onAppInstanced\",function(){});prototype._onAddedColumn=function(oColumn){this._columns[this._columns.length]=oColumn;}\nprototype._onRemovedColumn=function(oColumn){this._columns.erase(oColumn);}\nprototype._onAddedRow=function(oRow){this._rows[this._rows.length]=oRow;if(this._status==1&&this._isImmdApply&&this._immdApplyMode==0){var oField=this._storeFields[\"AllCount\"];if(oField){oField.value=this._rows.length;this._fixStoreRecordsCount();}\nvar allRowsCount=this._rows.length;for(var i=0,iLen=this._columns.length;i<iLen;i++){var oColumn=this._columns[i];var aDataFields=oColumn.getDataFields();for(var j=0,jLen=oColumn.getInputOptions(\"allowKeywordSyno\")?2:1;j<jLen;j++){var aValues=!aDataFields[j].value?[]:aDataFields[j].value.split(this._dataSeparator);aValues.append(\"\");aValues.fill(\"\",allRowsCount-aValues.length,aValues.length).slice(0,allRowsCount);aDataFields[j].value=aValues.join(this._dataSeparator);}}}\nif(this._status==1){this.fireEvent(\"_onRowsPositionChange\");oRow.activate();this.fireEvent(\"onAddedRow\",oRow);}}\nprototype._onInsertedRow=function(oRow){this._rows.insert(oRow,oRow.getIndex());if(this._status==1&&this._isImmdApply&&this._immdApplyMode==0){var oField=this._storeFields[\"AllCount\"];if(oField){oField.value=this._rows.length;this._fixStoreRecordsCount();}\nvar allRowsCount=this._rows.length;for(var i=0,iLen=this._columns.length;i<iLen;i++){var oColumn=this._columns[i];var aDataFields=oColumn.getDataFields();for(var j=0,jLen=oColumn.getInputOptions(\"allowKeywordSyno\")?2:1;j<jLen;j++){var aValues=!aDataFields[j].value?[]:aDataFields[j].value.split(this._dataSeparator);aValues.insert(\"\",oRow.getIndex());aValues.fill(\"\",allRowsCount-aValues.length,aValues.length).slice(0,allRowsCount);aDataFields[j].value=aValues.join(this._dataSeparator);}}}\nif(this._status==1){this.fireEvent(\"_onRowsPositionChange\");oRow.activate();this.fireEvent(\"onInsertedRow\",oRow);}}\nprototype._onLoadedRow=function(oRow){}\nprototype._onRemovedRow=function(oRow){var iRowIndex=this._rows.find(oRow);var isActiveRow=this._activeRow==oRow;this._rows.removeAt(iRowIndex);if(isActiveRow)this._activeRow=null;if(this._status==1&&this._isImmdApply&&this._immdApplyMode==0){var oField=this._storeFields[\"AllCount\"];if(oField)oField.value=this._rows.length;var allRowsCount=this._rows.length;for(var i=0,iLen=this._columns.length;i<iLen;i++){var oColumn=this._columns[i];var aDataFields=oColumn.getDataFields();for(var j=0,jLen=oColumn.getInputOptions(\"allowKeywordSyno\")?2:1;j<jLen;j++){var aValues=!aDataFields[j].value?[]:aDataFields[j].value.split(this._dataSeparator);aValues.removeAt(iRowIndex);aValues.fill(\"\",allRowsCount-aValues.length,aValues.length).slice(0,allRowsCount);aDataFields[j].value=aValues.join(this._dataSeparator);}}}\nthis.fireEvent(\"_onRowsPositionChange\");this.fireEvent(\"onRemovedRow\",oRow);if(!isActiveRow||!this._rows.length){return;}else if(iRowIndex<this._rows.length){this._rows[iRowIndex].activate();}else{this._rows[iRowIndex-1].activate();}}\nprototype._onSwapRow=function(rows){var index1=rows[0].getIndex();var index2=rows[1].getIndex();if(this._status==1&&this._isImmdApply&&this._immdApplyMode==0){var oField=this._storeFields[\"AllCount\"];if(oField){oField.value=this._rows.length;this._fixStoreRecordsCount();}\nvar allRowsCount=this._rows.length;for(var i=0,iLen=this._columns.length;i<iLen;i++){var oColumn=this._columns[i];var aDataFields=oColumn.getDataFields();for(var j=0,jLen=oColumn.getInputOptions(\"allowKeywordSyno\")?2:1;j<jLen;j++){var aValues=!aDataFields[j].value?[]:aDataFields[j].value.split(this._dataSeparator);aValues.swapElement(index1,index2);aValues.fill(\"\",allRowsCount-aValues.length,aValues.length).slice(0,allRowsCount);aDataFields[j].value=aValues.join(this._dataSeparator);}}}\nrows[0].fireEvent(\"_onPositionChange\",index2);rows[1].fireEvent(\"_onPositionChange\",index1);this.fireEvent(\"onSwapRow\",rows);}\nprototype._onReady=function(){this.fireEvent(\"onReady\");this.load();}\nprototype._onLoaded=function(){this.fireEvent(\"onLoaded\");if(this._rows.length)this._rows[0].activate();}\nprototype._onRowsPositionChange=function(){for(var i=0;i<this._rows.length;i++){this._rows[i].fireEvent(\"_onPositionChange\",i);}}\nprototype._onRowValueChanged=function(oRow){this.fireEvent(\"onRowValueChanged\");}}\n_$class.Column=function(parentTable,sTitle,sName,sType,vWidth,iHeaderAlign,iAlign){this._parent=null;this._title=\"\";this._name=\"\";this._type=\"\";this._index=-1;this._width=\"\";this._headerAlign=0;this._align=0;this._isHidden=false;this._isReadOnly=false;this._allowEmpty=true;this._inputOptions={};this._dataFields=[];this._htmlElement=null;this._Column(parentTable,sTitle,sName,sType,vWidth,iHeaderAlign,iAlign);}\nwith(_$class.Column){$name=\"Column\";$extends(\"Object\");prototype._Column=function(parentTable,sTitle,sName,sType,vWidth,iHeaderAlign,iAlign){this._parent=parentTable;this._title=sTitle;this._name=sName||Global.newId();this._type=sType||\"Text\";this._index=this._parent.getColumnsCount();this._width=vWidth||\"\";this._headerAlign=iHeaderAlign||0;this._align=iAlign||(iAlign==undefined?this._headerAlign:iAlign);this._htmlElement=this._parent._htmlHead.insertCell(this._parent._htmlHead.cells.length\n-(!this._parent.getOpenMode()?0:(!this._parent.getEnabledActionCol()?0:1)));with(this._htmlElement){className=\"TableDataCell\";width=this._width;align=[\"left\",\"center\",\"right\"][this._headerAlign];style.textAlign=[\"left\",\"center\",\"right\"][this._headerAlign];innerText=this._title;}\nthis._parent.fireEvent(\"_onAddedColumn\",this);}\nprototype.getTitle=function(){return this._title;}\nprototype.getName=function(){return this._name;}\nprototype.getType=function(){return this._type;}\nprototype.getWidth=function(){return this._width;}\nprototype.setWidth=function(value){this._width=value;this._htmlElement.width=this._width;}\nprototype.getHeaderAlign=function(){return this._headerAlign;}\nprototype.getAlign=function(){return this._align;}\nprototype.setAlign=function(value){this._align=value;this._htmlElement.align=[\"left\",\"center\",\"right\"][this._align];}\nprototype.getIndex=function(){return this._index;}\nprototype.getIsHidden=function(){return this._isHidden;}\nprototype.setIsHidden=function(value){this._isHidden=value;this._htmlElement.style.display=this._isHidden?\"none\":\"\";}\nprototype.getAllowEmpty=function(){return this._allowEmpty;}\nprototype.setAllowEmpty=function(value){if(this._allowEmpty==value)return;this._allowEmpty=value;if(this._inputOptions.hasOwnProperty(\"allowEmpty\")){value=this.getInputOptions(\"allowEmpty\");if(this._allowEmpty!=value){this._inputOptions[\"allowEmpty\"]=this._allowEmpty;}}\nthis.fireEvent(\"_onPropertyChanged\",\"allowEmpty\");}\nprototype.getIsReadOnly=function(){return this._isReadOnly;}\nprototype.getInputOptions=function(sName){var value;switch(sName){case undefined:return this._inputOptions;case\"allowEmpty\":case\"allowMultiple\":case\"allowKeywordSyno\":case\"allowNotInList\":if(this._inputOptions.hasOwnProperty(sName)){value=this._inputOptions[sName];value=typeof(value)!=\"boolean\"?Boolean(eval(value)):value;}else{value=false;}\nbreak;case\"separator\":default:value=this._inputOptions[sName];}\nreturn value;}\nprototype.setInputOptions=function(oValue){var value;this._inputOptions.label=this._title;this._inputOptions.dataType=this._type;for(var key in oValue){if(oValue.hasOwnProperty(key)){this._inputOptions[key]=oValue[key];}}\nif(oValue.hasOwnProperty(\"allowEmpty\")){value=this.getInputOptions(\"allowEmpty\");if(this._allowEmpty!=value){this._allowEmpty=value;this.fireEvent(\"_onPropertyChanged\",\"allowEmpty\");}}}\nprototype.getDataFields=function(index){return index==undefined?this._dataFields:this._dataFields[index];}\nprototype.bindDataFields=function(elTextField,elValueField){var _this=this;this._dataFields=Array.prototype.slice.call(arguments,0);}\nprototype._onPropertyChanged=function(sName){var iColumnIndex=this.getIndex();switch(sName){case\"allowEmpty\":if(this._parent.getOpenMode()==1){if(this._allowEmpty){var elAwakeFlag=Global.dom(\"#awakeFlag\",this._htmlElement)[0];if(elAwakeFlag)elAwakeFlag.parentNode.removeChild(elAwakeFlag);}else{with(this._htmlElement.appendChild(document.createElement(\"span\"))){id=\"awakeFlag\";className=\"AwakeFlag\";innerHTML=\"*\";}}\nfor(var i=0,iLen=this._parent.getRowsCount();i<iLen;i++){var field=this._parent.getRow(i).getColumnField(iColumnIndex);if(field){field.setAllowEmpty(this.getInputOptions(\"allowEmpty\"));}}}\nbreak;}}}\n_$class.Row=function(parentTable,index){this._id=\"\";this._index=0;this._parent=parentTable;this._colFields=[];this._htmlElement=null;this._checked=false;this._Row(parentTable,index);}\nwith(_$class.Row){$name=\"Row\";$extends(\"Object\");prototype._Row=function(parentTable,index){var _this=this;this._parent=parentTable;this._id=\"R\"+(++this._parent.__usedIDCount);this._index=index==undefined?this._parent.getRowsCount():index;this._htmlElement=parentTable._htmlBody.insertRow(this._index);with(this._htmlElement){className=\"TableDataEntry\";}\nif(this._parent.getOpenMode()==0){with(this._htmlElement){if(this._parent.getEnabledNoCol()){with(insertCell(-1)){className=\"col-no\";style.width=this._parent.__columns[\"No\"].width;style.textAlign=[\"left\",\"center\",\"right\"][this._parent.__columns[\"No\"].align];innerHTML=this._index+1;}}\nfor(var i=0,iLen=this._parent.getColumnsCount();i<iLen;i++){var oColumn=this._parent.getColumn(i);with(insertCell(-1)){className=\"TableDataCell\";width=oColumn.getWidth();align=[\"left\",\"center\",\"right\"][oColumn.getAlign()];style.textAlign=[\"left\",\"center\",\"right\"][oColumn.getAlign()];}}}\nthis.load();}else{with(this._htmlElement){onmousedown=function(){_this.activate();}\nif(this._parent.getEnabledSelectCol()){with(insertCell(-1)){className=\"col-select\";style.width=this._parent.__columns[\"No\"].width;appendChild(this._createSelectColumn());}}\nif(this._parent.getEnabledNoCol()){with(insertCell(-1)){className=\"col-no\";innerHTML=this._index+1;}}\nfor(var i=0,iLen=this._parent.getColumnsCount();i<iLen;i++){var oColumn=this._parent.getColumn(i);with(insertCell(-1)){className=\"TableDataCell\";width=oColumn.getWidth();align=[\"left\",\"center\",\"right\"][oColumn.getAlign()];style.textAlign=[\"left\",\"center\",\"right\"][oColumn.getAlign()];appendChild(this._createColumnField(i));}}\nif(this._parent.getEnabledActionCol()){with(insertCell(-1)){className=\"col-action\";appendChild(this._createActionColumn());}}}}\nthis._parent.fireEvent(index==undefined?\"_onAddedRow\":\"_onInsertedRow\",this);if(this._parent.getStatus()==0){this.load();this.fireEvent(\"_onLoaded\");}}\nprototype.getParent=function(){return this._parent;}\nprototype.getId=function(){return this._id;}\nprototype.getIndex=function(){return this._index;}\nprototype.getChecked=function(){return this._checked;}\nprototype.setChecked=function(value){if(this._checked==value)return;this._checked=value;this.fireEvent(\"_onPropertyChanged\",\"checked\");}\nprototype.getHtmlElement=function(){return this._htmlElement;}\nprototype.getColumnField=function(iColumn){return this._colFields[iColumn];}\nprototype.getColumnFieldByColName=function(colName){return this._colFields[this._parent.getColumnByName(colName).getIndex()];}\nprototype.getColumnText=function(iColumn){if(this._parent.getOpenMode()==0){var sTexts=this._parent.getColumn(iColumn).getDataFields(0).value;var aTexts=sTexts==\"\"?[]:sTexts.split(this._parent._dataSeparator);var sText=\"\";if(aTexts.length-1>=this._index){sText=this._parent.decodeText(aTexts[this._index]);}\nreturn sText;}else{return this._colFields[iColumn].getDataText();}}\nprototype.getColumnValue=function(iColumn){if(this._parent.getOpenMode()=0){var sTexts=this._parent.getColumn(iColumn).getDataFields().getLast().value;var aTexts=sTexts==\"\"?[]:sTexts.split(this._parent._dataSeparator);var sText=\"\";if(aTexts.length-1>=this._index){sText=this._parent.decodeText(aTexts[this._index]);}\nreturn sText;}else{return this._colFields[iColumn].getDataValue();}}\nprototype.setColumnValue=function(iColumn,vValue){if(this._parent.getOpenMode()==0)return;this._colFields[iColumn].setDataValue(vValue);}\nprototype.adjust=function(){var handles=[],paras=[];for(var i=0,vHandles=this._parent._fieldAdjustHandles;i<vHandles.length;i++){var vHandle=vHandles[i];var aColNames1=!Global.isArray(vHandle[0])?[vHandle[0]]:vHandle[0];var aFields1=[];for(var j=0;j<aColNames1.length;j++){var sColName1=aColNames1[j];aFields1.push(this.getColumnFieldByColName(sColName1));}\nhandles.push(vHandle[1]);paras.push(aFields1);}\nhandles.forEach(function(handle,index){try{handle.apply(this._parent,[this].concat(paras[index]));}catch(e){}},this);}\nprototype.adjustByColField=function(sColName){var handles=[],paras=[];for(var i=0,vHandles=this._parent._fieldAdjustHandles;i<vHandles.length;i++){var vHandle=vHandles[i];var aColNames1=!Global.isArray(vHandle[0])?[vHandle[0]]:vHandle[0];var aFields1=[];var flag=false;for(var j=0;j<aColNames1.length;j++){var sColName1=aColNames1[j];if(sColName.toLowerCase()==sColName1.toLowerCase()){flag=true;break;}}\nif(!flag)continue;for(var j=0;j<aColNames1.length;j++){var sColName1=aColNames1[j];aFields1.push(this.getColumnFieldByColName(sColName1));}\nhandles.push(vHandle[1]);paras.push(aFields1);}\nhandles.forEach(function(handle,index){try{handle.apply(this._parent,[this].concat(paras[index]));}catch(e){}},this);}\nprototype.moveUp=function(){if(this._index<=0)return;this._parent.swapRow(this,this._parent.getRow(this._index-1));}\nprototype.moveDown=function(){if(this._index>=this._parent.getRowsCount()-1)return;this._parent.swapRow(this,this._parent.getRow(this._index+1));}\nprototype.isEmpty=function(){return this._colFields.every(function(field){return field?field.isEmpty():true;});}\nprototype.clearEmpty=function(){this._colFields.forEach(function(field){if(field)field.clearEmpty();});return this;}\nprototype.load=function(){var iRowIndex=this._index;for(var i=0,iLen=this._parent.getColumnsCount();i<iLen;i++){var oColumn=this._parent.getColumn(i);var oOptions=oColumn.getInputOptions();var field=this._colFields[i];var aColumnValues,aColumnTexts,vValue,vValue1;var sColumnValues,sColumnTexts;if(!field){sColumnValues=oColumn.getDataFields(0).value;aColumnValues=sColumnValues==\"\"?[]:sColumnValues.split(this._parent._dataSeparator);if(aColumnValues.length-1>=iRowIndex){vValue=this._parent.decodeText(aColumnValues[iRowIndex]);}else{vValue=\"\";}\nif(vValue==\"\"){this._htmlElement.cells[this._parent.__startDataColIndex+i].innerHTML=\"<span style=\\\"height:1em\\\"></span>\";}else{with(this._htmlElement.cells[this._parent.__startDataColIndex+i]){innerText=vValue;innerHTML=innerHTML.replace(/\\r/g,\"\").replace(/\\n/g,\"<br>\");}}}else{if(!field.getDataField()){sColumnValues=oColumn.getDataFields(0).value;aColumnValues=sColumnValues==\"\"?[]:sColumnValues.split(this._parent._dataSeparator);if(aColumnValues.length-1<iRowIndex){vValue=\"\";}else{vValue=this._parent.decodeText(aColumnValues[iRowIndex]);}\nfield.setStoreValues(vValue);}else{sColumnTexts=oColumn.getDataFields(0).value;aColumnTexts=sColumnTexts==\"\"?[]:sColumnTexts.split(this._parent._dataSeparator);sColumnValues=oColumn.getDataFields(1).value;aColumnValues=sColumnValues==\"\"?[]:sColumnValues.split(this._parent._dataSeparator);if(aColumnValues.length-1<iRowIndex){vValue=\"\",vValue1=\"\";}else{vValue=this._parent.decodeText(aColumnTexts[iRowIndex]);vValue1=this._parent.decodeText(aColumnValues[iRowIndex]);}\nfield.setStoreValues(vValue,vValue1);}\nif(field.getDataType()==\"Text\")field.adjustHeight();}}\nif(this._parent.getOpenMode()==1)this.adjust();this.fireEvent(\"_onLoaded\");}\nprototype.reload=function(){this.load();}\nprototype.activate=function(){var row=this._parent.getActiveRow();if(row)row.fireEvent(\"_onDeactivate\");this.fireEvent(\"_onActivate\");}\nprototype.validate=function(){return![0,1,2].some(function(mode){return this._colFields.some(function(field){return!field.validate(mode,true);},this);},this);}\nprototype.save=function(){if(this._parent.getOpenMode()==0)return;this._parent.save();}\nprototype.remove=function(){if(this._parent.getOpenMode()==0)return;if(this._parent.getRowsCount()<=this._parent.getMinRowsCount()){alert(this._parent._getLocale(\"canotDeleteRowInLimitCount\"));return;}\nthis._htmlElement.parentNode.removeChild(this._htmlElement);this._parent.fireEvent(\"_onRemovedRow\",this);}\nprototype._createSelectColumn=function(){var _this=this;var _htmlElement=document.createElement(\"input\");with(_htmlElement){setAttribute(\"type\",\"checkbox\");onclick=function(){_this.setChecked(this.checked);}}\nreturn _htmlElement;}\nprototype._createActionColumn=function(){var _this=this;var _htmlElement=document.createElement(\"div\");var column=this._parent.__columns[\"Action\"];for(var i=0,names=column.actions[1].split(\",\");i<names.length;i++){var _action=this.getParent().getClass()._actions[names[i]];with(_htmlElement){with(appendChild(window.document.createElement(\"img\"))){className=\"ActionButton\";title=_action.title;src=this.getParent().getClass().getResPath()+\"/\"+_action.icon;onclick=function(){var _action1=_action;return function(event){return _action1.doAction2(_this,event);}}();}}}\nreturn _htmlElement;}\nprototype._createColumnField=function(iColumn){var _this=this;var oColumn=this._parent.getColumn(iColumn);var oOptions=oColumn.getInputOptions();var oOptions1=Global.extend({},oOptions);var elDspField=null,elValueField=null;var _htmlElement,_field;if(oColumn.getInputOptions(\"optionalValues\")||oColumn.getType()==\"Date\"){_htmlElement=document.createElement(\"table\");with(_htmlElement){width=\"100%\";cellSpacing=0;cellPadding=0;with(insertRow(-1)){vAlign=\"bottom\";with(insertCell(-1)){if(oColumn.getInputOptions(\"allowKeywordSyno\")){if(!oColumn.getInputOptions(\"allowMultipleLine\")){with(elValueField=appendChild(window.document.createElement(\"input\"))){type=\"text\";}}else{elValueField=appendChild(window.document.createElement(\"textarea\"));}}\nif(!oColumn.getInputOptions(\"allowMultipleLine\")){with(elDspField=appendChild(window.document.createElement(\"input\"))){type=\"text\";}}else{with(elDspField=appendChild(window.document.createElement(\"textarea\"))){rows=1;}}}\nwith(insertCell(-1)){width=\"16\";with(appendChild(window.document.createElement(\"a\"))){className=\"FieldSelectButton\";href=\"javascript:void(0)\";innerHTML=\"<img border=0 src=\\\"\"\n+this._parent.getClass().getResPath()+\"/btn_select.gif\"+\"\\\">\";onclick=function(event){if(!_field.getIsReadOnly())_field.selectValues(event);}}}}}}else{_htmlElement=document.createElement(\"div\");with(_htmlElement){if(oColumn.getInputOptions(\"allowKeywordSyno\")){if(!oColumn.getInputOptions(\"allowMultipleLine\")){with(elValueField=appendChild(window.document.createElement(\"input\"))){type=\"text\";}}else{elValueField=appendChild(window.document.createElement(\"textarea\"));}}\nif(!oColumn.getInputOptions(\"allowMultipleLine\")){with(elDspField=appendChild(window.document.createElement(\"input\"))){type=\"text\";}}else{with(elDspField=appendChild(window.document.createElement(\"textarea\"))){rows=1;}}}}\nif(elValueField){with(elValueField){className=\"Field ValueField\";}\noOptions1.dataField=elValueField;}\nwith(elDspField){className=\"Field DisplayField\";for(var key in oOptions){if(oOptions.hasOwnProperty(key)){if(key.indexOf(\"on\")!=0)setAttribute(key,oOptions[key]);}}}\n_field=this._parent._parentForm.addFieldFrom(elDspField,oOptions1);_field.addEventListener(\"onValueChanged\",function(){_this.fireEvent(\"_onValueChanged\",oColumn.getName());return false;});_field.addEventListener(\"onReadStateChanged\",function(isReadOnly){var img=Global.dom(\"img\",_htmlElement).getFirst();if(img){img.src=img.src.leftBack(\"/\")+(isReadOnly?\"/btn_select1.gif\":\"/btn_select.gif\");}\nelDspField.className=isReadOnly?\"Field ReadField DisplayField\":\"Field DisplayField\";});_field.fireEvent(\"onReadStateChanged\",_field.getIsReadOnly());this._colFields.push(_field);return _htmlElement;}\nprototype._onLoaded=function(){this._parent.fireEvent(\"_onLoadedRow\",this);}\nprototype._onActivate=function(){if(this._parent.__noColIndex>=0){var oCell=this._htmlElement.cells[this._parent.__noColIndex];oCell.innerHTML=\"<div class=\\\"current-point\\\"></div>\"+(this._index+1);}\nthis._htmlElement.className=\"TableDataEntry ActiveTableDataEntry\";this._parent._activeRow=this;}\nprototype._onDeactivate=function(){if(this._parent.__noColIndex>=0){var oCell=this._htmlElement.cells[this._parent.__noColIndex];oCell.innerHTML=this._index+1;}\nthis._htmlElement.className=\"TableDataEntry\";this._parent._activeRow=null;}\nprototype._onPositionChange=function(newIndex){if(this._index==newIndex)return;this._index=newIndex;if(this._parent.__noColIndex>=0){this._htmlElement.cells[this._parent.__noColIndex].innerHTML=(this._parent.getActiveRow()==this?\"<div class=\\\"current-point\\\"></div>\":\"\")+(newIndex+1);}\nif(this._parent.__selColIndex>=0){var oCell=this._htmlElement.cells[this._parent.__selColIndex];var el=Global.dom(\"input\",oCell).getFirst();if(el&&el.checked!=this._checked)el.checked=this._checked;}}\nprototype._onPropertyChanged=function(sName){switch(sName){case\"checked\":if(this._parent.__selColIndex>=0){var oCell=this._htmlElement.cells[this._parent.__selColIndex];var el=Global.dom(\"input\",oCell).getFirst();if(el)el.checked=this._checked;}\nbreak;}}\nprototype._onValueChanged=function(columnName){this.adjustByColField(columnName);this._parent.fireEvent(\"_onRowValueChanged\",this);}}"
}
}
