/* @created: Wed Dec 18 15:40:02 UTC+0800 2013*/
_$JSDK3Loader$_&&_$JSDK3Loader$_.loadResource({
manifest : {"name" : "ui-menu","file" : "ui-menu.js","version" : "1.0","description" : "","author" : "liu denggao","created" : "2013-12-18","modified" : "2013-12-18"},
entity : {
"lib/classes/ui-menu.json" : {manifest:{"name":"ui-menu","file":"ui-menu.json","version":"1.0","description":"","author":"liu denggao","created":"2013-12-18","modified":"2013-12-18"},entity:{"js.ui.PopupDialog":"$package(\"js.ui\");$import(\"js.dom.HTML\");$import(\"js.dom.DOMTemplate\");js.ui.PopupDialog=function(){}\nvar _$class=js.ui.PopupDialog;with(_$class){$name=\"PopupDialog\";$extends(\"Object\");_$class._styleLib={\"std\":function(){var path=Engine.runtimeEnvironment.getResPath(\"js.ui\")+\"/PopupDialog\";if(!Browser.Engine.trident){return path+\"/std.css\";}else if(Browser.Engine.version<=3){return path+\"/std.IE6.css\";}else if(document.compatMode==\"CSS1Compat\"){return path+\"/std.css\";}else{return path+\"/std.IE.css\";}}()}\n_$class._styleSkin=\"\";_$class._defaultStyleSkin=\"std\";_$class._styleElement=null;_$class._isApped=false;_$class._isHidden=true;_$class._isAutoHide=true;_$class._htmlElement=null;_$class._outerElement=null;_$class._overlayElement=null;_$class._bodyStyleElement=null;_$class._callBack=null;_$class.returnValue;_$class.DISPLAY_MODE_CONTEXT=0;_$class.DISPLAY_MODE_DROPDOWN=1;_$class.DISPLAY_MODE_POSITION=2;_$class.DISPLAY_ALIGN_LEFT=0;_$class.DISPLAY_ALIGN_CENTER=1;_$class.DISPLAY_ALIGN_RIGHT=2;_$class.DISPLAY_ALIGN_UP=3;_$class.DISPLAY_ALIGN_MIDDLE=4;_$class.DISPLAY_ALIGN_BOTTOM=5;addProperty(true,true,\"htmlElement\",{get:function(){return this._htmlElement;}});addProperty(true,true,\"isHidden\",{get:function(){return this._isHidden;}});addMethod(true,true,\"show\",function(sURL,vArguments,oOptions,oFeatures,fnCallBack){if(!this._isHidden)this.hide();this._isHidden=false;var _this=this;var _owner=oOptions.owner;var _owner_htmElem=_owner.nodeName?_owner:(_owner.getHtmlElement?_owner.getHtmlElement():null);var _win_width=document.compatMode!=\"CSS1Compat\"?document.body.clientWidth:document.documentElement.clientWidth;var _win_height=document.compatMode!=\"CSS1Compat\"?document.body.clientHeight:document.documentElement.clientHeight;var _win_left=document.compatMode!=\"CSS1Compat\"?document.body.scrollLeft:!Global.Browser.Engine.webkit?document.documentElement.scrollLeft:document.body.scrollLeft;var _win_top=document.compatMode!=\"CSS1Compat\"?document.body.scrollTop:!Global.Browser.Engine.webkit?document.documentElement.scrollTop:document.body.scrollTop;var _event=oOptions.event;var _driver=oOptions.driver||\"html\";var _mode=oOptions.mode!=undefined?oOptions.mode:(_owner?1:0);var _autoHide=this._isAutoHide=_mode!=2||oOptions.autoHide==undefined||oOptions.autoHide;var _minWidth=oFeatures.minWidth||100;var _minHeight=oFeatures.minHeight||50;var _width=oFeatures.width||_minWidth;var _height=oFeatures.height||_minHeight;var _align=oFeatures.align!=undefined?oFeatures.align:this.DISPLAY_ALIGN_CENTER;var _left=oFeatures.left!=undefined?oFeatures.left:(_mode==2?-1:0);var _top=oFeatures.top!=undefined?oFeatures.top:(_mode==2?-1:0);var _right=oFeatures.right!=undefined?oFeatures.right:(_mode==2?-1:0);var _bottom=oFeatures.bottom!=undefined?oFeatures.bottom:(_mode==2?-1:0);var _emptyHtml=\"<div class=\\\"empty\\\">no data</div>\";this._htmlElement=document.body.appendChild(document.createElement(\"div\"));this._callBack=fnCallBack;if(!this._styleSkin)this.setStyleSkin(this._defaultStyleSkin);if(oFeatures.style)this.setBodyStyle(oFeatures.style);switch(_mode){case 0:_left=_event.pageX||(_event.clientX+document.body.scrollLeft-document.body.clientLeft);_top=_event.pageY||(_event.clientY+document.body.scrollTop-document.body.clientTop);break;case 1:var _owner_left=HTML.getLeftOnDoc(_owner_htmElem);var _owner_top=HTML.getTopOnDoc(_owner_htmElem);var _owner_width=_owner_htmElem.offsetWidth;var _owner_height=_owner_htmElem.offsetHeight;var _owner_leftWidth=_owner_left-_win_left+1;var _owner_rightWidth=(_win_left+_win_width-1)-(_owner_left+_owner_width-1)+1;var _owner_topHeight=_owner_top-_win_top+1;var _owner_bottomHeight=(_win_top+_win_height-1)-(_owner_top+_owner_height-1)+1;_width=Math.max(_minWidth,oFeatures.width||_owner_htmElem.offsetWidth);if(_width>_win_width){_left=_win_left;}else if(_width<=_owner_width+_owner_rightWidth){_left=_owner_left;}else if(_width<=_owner_width+_owner_leftWidth){_left=_owner_left+_owner_width-1-_width;}else{_left=_win_left+_win_width-_width;}\nif(_height>_win_height){_top=_win_top;}else if(_height<=_owner_bottomHeight){_top=_owner_top+_owner_height;}else if(_height<=_owner_topHeight){_top=_owner_top-_height;}else{_top=_win_top+_win_height-_height;}\nbreak;case 2:this._overlayElement=this._htmlElement;this._outerElement=document.body.appendChild(document.createElement(\"div\"));this._htmlElement=this._outerElement.appendChild(document.createElement(\"div\"));with(this._overlayElement){className=\"PopupDialogOverlay\";setAttribute(\"class\",\"PopupDialogOverlay\");if(Global.Browser.Engine.trident&&Global.Browser.Engine.version==3){innerHTML=\"<iframe frameborder=0 scrolling=no src=\\\"about:blank\\\"\"\n+\" style=\\\"width:100%;height:100%;z-index:-1;left:0;top:0;position:absolute;\\\"\"\n+\" onload=\\\"this.contentWindow.document.body.style.backgroundColor=\"\n+\" this.parentNode.currentStyle.backgroundColor!='transparent'?\"\n+\" this.parentNode.currentStyle.backgroundColor:this.parentNode.firstChild.currentStyle.backgroundColor;\\\"></iframe>\";}}\nwith(this._outerElement){className=\"PopupDialogOuter\";setAttribute(\"class\",\"PopupDialogOuter\");}\nif(_left!=-1&&_right!=-1){_left=-1;}\nif(_top!=-1&&_bottom!=-1){_top=-1;}\nif((_left!=-1||_right!=-1)&&(_top!=-1||_bottom!=-1)){}else if(_left!=-1||_right!=-1){switch(_align){case 3:_top=0;break;case 4:_top=Math.foolr((_win_height-_height)/2);break;case 5:_bottom=0;break;default:_top=Math.floor((_win_height-_height)/2);break;}}else if(_top!=-1||_bottom!=-1){switch(_align){case 0:_left=0;break;case 1:_left=Math.floor((_win_width-_width)/2);break;case 2:_right=0;break;}}else{switch(_align){case 0:_left=0;_top=Math.floor((_win_height-_height)/2);break;case 1:_left=Math.floor((_win_width-_width)/2);_top=Math.floor((_win_height-_height)/2);break;case 2:_right=0;_top=Math.floor((_win_height-_height)/2);break;case 3:_left=Math.floor((_win_width-_width)/2);_top=0;break;case 4:_left=Math.floor((_win_width-_width)/2);_top=Math.floor((_win_height-_height)/2);break;case 5:_left=Math.floor((_win_width-_width)/2);_bottom=0;break;}}\nbreak;}\nwith(this._htmlElement){className=\"PopupDialog\";setAttribute(\"class\",\"PopupDialog\");onclick=function(event){event=event||window.event;event.cancelBubble=true;}}\nif(_left!=-1)this._htmlElement.style.left=_left+\"px\";if(_top!=-1)this._htmlElement.style.top=_top+\"px\";if(_right!=-1)this._htmlElement.style.right=_right+\"px\";if(_bottom!=-1)this._htmlElement.style.bottom=_bottom+\"px\";this._htmlElement.style.width=(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?_width:(_width-2))+\"px\";this._htmlElement.style.height=(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?_height:(_height-2))+\"px\";this._htmlElement.style.zIndex=100;switch(_driver){case\"html\":if(typeof(sURL)!=\"string\"){this._htmlElement.innerHTML=_emptyHtml;}else if(sURL.charAt(0)==\"#\"){var el=Global.dom(sURL).pop();this._htmlElement.innerHTML=el?(el.value||el.text||_emptyHtml):_emptyHtml;}else{this._htmlElement.innerHTML=sURL;}\nbreak;case\"page\":if(typeof(sURL)!=\"string\"){this._htmlElement.innerHTML=_emptyHtml;}else if(sURL.charAt(0)==\"#\"){this._htmlElement.innerHTML=_emptyHtml;}else{with(this._htmlElement){innerHTML=\"<iframe frameborder=0 style=\\\"width:100%;height:100%;\\\" src=\\\"\"+sURL+\"\\\"></iframe>\";}}\nbreak;case\"template\":var tpl,json;if(sURL instanceof Global.DOMTemplate){tpl=sURL;}else if(typeof(sURL)!=\"string\"){}else if(sURL.charAt(0)==\"#\"){tpl=Global.DOMTemplate.newInstanceWithId(sURL.slice(1));}else{tpl=Global.DOMTemplate.newInstanceWithUrl(sURL);}\nswitch(typeof(vArguments)){case\"string\":if(vArguments.slice(0,9)==\"url(xml):\"){json=Global.xml2json(Global.get(vArguments.slice(0,9),\"\",false,\"\",\"XML\"));}else if(vArguments.slice(0,10)==\"url(json):\"){json=Global.get(vArguments.slice(0,10),\"\",false,\"\",\"JSON\");}else{json={};}\nbreak;case\"object\":json=vArguments;break;}\nif(tpl&&json){this._htmlElement.innerHTML=tpl.parse(json,null);if(json.init)json.init(this,this._htmlElement);}else{this._htmlElement.innerHTML=_emptyHtml;}\nbreak;}\nif(Browser.Engine.trident&&Browser.Engine.version==3){this._htmlElement.appendChild(document.createElement(\"<iframe frameborder=0 scrolling=no src=\\\"about:blank\\\"\"\n+\" style=\\\"width:100%;height:100%;z-index:-1;left:0;top:0;position:absolute;\\\"\"\n+\" onload=\\\"this.contentWindow.document.body.style.backgroundColor=\"\n+\" this.parentNode.currentStyle.backgroundColor!='transparent'?\"\n+\" this.parentNode.currentStyle.backgroundColor:this.parentNode.firstChild.currentStyle.backgroundColor;\\\"></iframe>\"));}\nif(_event){_event.cancelBubble=true;_event.returnValue=_event.result={activeApp:_this}}\nif(!this._isApped){document.body.attachEvent(\"onclick\",function(event){event=event||window.event;var data=event.result||event.returnValue;if(typeof(data)==\"object\"&&data.activeApp==_this){return;}else if(!_this._isHidden&&_this._isAutoHide){if(data)data.activeApp=null;_this.hide();}});this._isApped=true;}});addMethod(true,true,\"hide\",function(){if(this._isHidden)return;if(this._htmlElement)this._htmlElement.parentNode.removeChild(this._htmlElement);if(this._outerElement)this._outerElement.parentNode.removeChild(this._outerElement);if(this._overlayElement)this._overlayElement.parentNode.removeChild(this._overlayElement);if(this._bodyStyleElement)this._bodyStyleElement.parentNode.removeChild(this._bodyStyleElement);if(this._callBack)this._callBack(this.returnValue);this._isHidden=true;this._htmlElement=null;this._outerElement=null;this._bodyStyleElement=null;this._callBack=null;this.returnValue=undefined;});addMethod(true,true,\"addStyleSkin\",function(sName,sPath){this._styleLib[sName]=sPath;});addMethod(true,true,\"setStyleSkin\",function(sName){this._styleSkin=sName;if(!this._styleElement){var style=this._styleElement=document.createElement(\"link\");style.type=\"text/css\";style.rel=\"stylesheet\";style.href=this._styleLib[sName];document.getElementsByTagName(\"HEAD\")[0].appendChild(style);}else{this._styleElement.style.href=this._styleLib[sName];}});addMethod(true,true,\"setBodyStyle\",function(sPath){var _this=this;var style=this._bodyStyleElement=document.createElement(\"link\");style.type=\"text/css\";style.rel=\"stylesheet\";style.href=sPath;style.onload=function(){_this._htmlElement.style.zoom=1;}\ndocument.getElementsByTagName(\"HEAD\")[0].appendChild(style);});}","js.ui.menu.PopupMenuLite":"$package(\"js.ui.menu\");$import(\"js.dom.HTML\");js.ui.menu.PopupMenuLite=function(owner,mode,options){this._id=\"\";this._owner=null;this._owner_htmElem=null;this._mode=0;this._mainMenu=null;this._activeMenu=null;this._isHideOnMouseLeave;this._offset=0;this._minWidth=0;this._padWidth=0;this._version=\"1.7.4 Final 20111109\";this.__usedIdCount=0;this._PopupMenuLite(owner,mode,options);}\nvar _$class=js.ui.menu.PopupMenuLite;var _$proto=_$class.prototype;with(_$class){$name=\"PopupMenuLite\";$extends(\"Object\");_$class._icons={checked:\"<span style=\\\"width:12px;height:12px;display:inline-block;overflow:hidden\\\"><span style=\\\"font-family:Marlett;font-size:16px;position:relative;top:-2;left:-1\\\">a</span></span>\",radioed:\"<span style=\\\"width:12px;height:12px;display:inline-block;overflow:hidden\\\"><span style=\\\"font-family:Marlett;font-size:9px;position:relative;top:2;\\\">n</span></span>\",arrow:\"<span style=\\\"width:12px;height:12px;display:inline-block;overflow:hidden\\\"><span style=\\\"font-family:'wingdings 3';font-size:12px;position:relative;top:;left:\\\">}</span></span>\",blank:\"<span style=\\\"width:12px;height:12px;display:inline-block;overflow:hidden\\\">&nbsp;</span>\"}\n_$class._styleLib={\"classic\":Engine.runtimeEnvironment.getResPath(\"js.ui.menu\")+\"/PopupMenuLite/\"+(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?\"Classic.IE.css\":\"Classic.css\"),\"xp\":Engine.runtimeEnvironment.getResPath(\"js.ui.menu\")+\"/PopupMenuLite/\"+(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?\"XP.IE.css\":\"XP.css\")}\n_$class._styleSkin=\"classic\";_$class._styleElement=null;_$class._activeAppMenu=null;_$class._isInstanced=false;prototype._PopupMenuLite=function(owner,mode,options){var thisObj=this;this._owner=owner;this._owner_htmElem=owner.nodeName?owner:(owner.getHtmlElement?owner.getHtmlElement():null);if(typeof(mode)!=\"undefined\")this._mode=mode;this._isHideOnMouseLeave=false;this._offset=options&&options.offset||0;if(options&&options.minWidth){this._minWidth=options.minWidth;}\nif(options&&options.padWidth){this._padWidth=options.padWidth;}\nthis.getClass().fireEvent(\"_onAppInstanced\",this);}\naddProperty(true,true,\"activeAppMenu\",{get:function(){return this._activeAppMenu;}});addProperty(false,true,\"owner\",{get:function(){return this._owner;}});addProperty(false,true,\"ownerHtmlElement\",{get:function(){return this._owner_htmElem;}});addProperty(false,true,\"mode\",{get:function(){return this._mode;},set:function(value){this._mode=value;}});addProperty(false,true,\"isHideOnMouseLeave\",{get:function(){return this._isHideOnMouseLeave;},set:function(value){this._isHideOnMouseLeave=value;}});addProperty(false,true,\"mainMenu\",{get:function(){return this._mainMain;}});addProperty(false,true,\"activeMenu\",{get:function(){return this._mainMenu;}});addProperty(false,true,\"version\",{get:function(){return this._version;}});addProperty(false,true,\"allCount\",{get:function(){if(!this._mainMenu)return 0;return this._mainMenu.getLength();}});addMethod(false,true,\"show\",function(event,iWidth,aCoordinate){if(this._mainMenu)this._mainMenu.show(event,iWidth,aCoordinate);});addMethod(false,true,\"hide\",function(){if(this._mainMenu)this._mainMenu.hide();});addMethod(false,true,\"addItem\",function(sTitle,vData,fnAction){var Menu=this.getClass().Menu;var Item=this.getClass().Item;if(!this._mainMenu){this._mainMenu=new Menu(this);}\nvar newItem=new Item(this._mainMenu,sTitle,vData,fnAction);this._mainMenu.addItem(newItem);return(newItem);});addMethod(false,true,\"getItem\",function(index){if(!this._mainMenu)return null;return this._mainMenu.getItem(index);});addMethod(false,true,\"getItemById\",function(id){if(!this._mainMenu)return null;return this._mainMenu.getItemById(id);});addMethod(true,true,\"addStyleSkin\",function(sName,sPath){this._styleLib[sName]=sPath;});addMethod(true,true,\"setStyleSkin\",function(sName){this._styleSkin=sName;if(!this._styleElement){var style=this._styleElement=document.createElement(\"link\");style.type=\"text/css\";style.rel=\"stylesheet\";style.href=this._styleLib[sName];document.getElementsByTagName(\"HEAD\")[0].appendChild(style);}else{this._styleElement.style.href=this._styleLib[sName];}});addMethod(true,true,\"fireEvent\",function(sEvent,oEventObject){if(typeof(this[sEvent])!=\"function\")return;try{return this[sEvent](oEventObject);}catch(e){throw new Error(1000,\"Event '\"+sEvent+\"' of object '\"+this.getName()+\"' has been runned error!\\nSource: \"\n+e.description);}});addEventListener(true,false,\"onFirstInstanced\",function(oAppMenu){var thisObj=this;if(Global.Browser.Platform.ios){document.body.attachEvent(\"ontouchmove\",function(event){thisObj.__isMoving=true;});document.body.attachEvent(\"ontouchend\",function(event){var data=event.result||event.returnValue;if(!thisObj.__isMoving){if(typeof(data)==\"object\"&&data.activeApp==thisObj){return;}else{thisObj.fireEvent(\"_onAppMenuBlur\");}}\nthisObj.__isMoving=false;});}else if(document.body.addEventListener){document.body.addEventListener(\"onclick\",function(event){event=event||window.event;var data=event.result||event.returnValue;if(typeof(data)==\"object\"&&data.activeApp==thisObj){return;}else{thisObj.fireEvent(\"_onAppMenuBlur\");}});}else{document.body.attachEvent(\"onclick\",function(event){event=event||window.event;var data=event.result||event.returnValue;if(typeof(data)==\"object\"&&data.activeApp==thisObj){return;}else{thisObj.fireEvent(\"_onAppMenuBlur\");}});}});addEventListener(true,false,\"onAppInstanced\",function(oAppMenu){if(this._isInstanced)return;this.fireEvent(\"_onFirstInstanced\",oAppMenu);});addEventListener(true,false,\"onAppMenuBeforeShow\",function(oAppMenu){if(this._activeAppMenu)this._activeAppMenu.hide();});addEventListener(true,false,\"onAppMenuShowed\",function(oAppMenu){this._activeAppMenu=oAppMenu;});addEventListener(true,false,\"onAppMenuHid\",function(oAppMenu){this._activeAppMenu=null;});addEventListener(true,false,\"onAppMenuBlur\",function(){var lastAppMenu=this._activeAppMenu;if(this._activeAppMenu)this._activeAppMenu.hide();this.fireEvent(\"onAppMenuBlur\",lastAppMenu);});addEventListener(false,false,\"onMenuBeforeShow\",function(oMenu){this.getClass().fireEvent(\"_onAppMenuBeforeShow\",this);});addEventListener(false,false,\"onMenuShowed\",function(oMenu){this.getClass().fireEvent(\"_onAppMenuShowed\",this);});addEventListener(false,false,\"onMenuHid\",function(oMenu){this.getClass().fireEvent(\"_onAppMenuHid\",this);});addEventListener(false,false,\"onDoAction\",function(oMenu){this.fireEvent(\"onDoAction\",oMenu.getLastDoneItem());});}\n_$class.Menu=function(owner){this._id=\"\";this._unid=\"\";this._owner=null;this._parentApp=null;this._htmlElement=null;this._htmlContainer=null;this._items=[];this._useIcon=false;this._loaded=false;this._activeItem=null;this._lastDoneItem=null;this._Menu(owner);}\nwith(_$class.Menu){$name=\"Menu\";$extends(Object);prototype._Menu=function(owner){this._owner=owner;this._parentApp=this._owner;}\nprototype.getLeft=function(){return this._x;}\nprototype.getTop=function(){return this._y;}\nprototype.getRight=function(){return this.getLeft()+this.getWidth()-1;}\nprototype.getBottom=function(){return this.getTop()+this.getHeight()-1;}\nprototype.getWidth=function(){return this._htmlElement.offsetWidth;}\nprototype.getHeight=function(){return this._htmlElement.offsetHeight;}\nprototype.getLength=function(){return this._items.length;}\nprototype.getParentApp=function(){return this._parentApp;}\nprototype.getOwner=function(){return this._owner;}\nprototype.getDisplayed=function(){if(!this._htmlElement)return false;return this._htmlElement.style.display==\"\";}\nprototype.getActiveItem=function(){return this._activeItem;}\nprototype.getLastDoneItem=function(){return this._lastDoneItem;}\nprototype.getIsActive=function(){if(this.getParentApp()._activeMenu==this)return true;else return false;}\nprototype.getUseIcon=function(){return this._useIcon;}\nprototype.addItem=function(newItem){this._items[this._items.length]=newItem;newItem._parentMenu=this;if(this._loaded){this.load(newItem);}\nreturn(newItem);}\nprototype.getItem=function(index){if(index<0||index>=this._items.length)return null;return this._items[index];}\nprototype.getItemById=function(id){for(var i=0;i<this._items.length;i++){var item=this.getItem(i);if(item.getId()==id)return(item);}\nreturn(null);}\nprototype.getItemByTitle=function(title){for(var i=0;i<this.getLength();i++){var item=this.getItem(i);if(item.getTitle()==title)return(item);}\nreturn(null);}\nprototype.getFirstItem=function(){return(this.getItem(0));}\nprototype.getNextItem=function(item){for(var i=0;i<this.getLength();i++){if(this.getItem(i).getId()==item.getId()){if(i==this.getLength()-1){return(null);}else{return(this.getItem(i+1));}}}\nthrow(\"\\u9519\\u8bef\\uff01\\\"PopupMenuLite.Menu.getNextItem(item)\\\"\\u8f93\\u5165\\u7684\\u83dc\\u5355\\u9879\\u4e0d\\u5728\\u672c\\u83dc\\u5355\\u4e2d\\u3002\");return(null);}\nprototype.getPrevItem=function(item){for(var i=0;i<this.getLength();i++){if(this.getItem(i).getId()==item.getId()){if(i==0){return(null);}else{return(this.getItem(i-1));}}}\nthrow(\"\\u9519\\u8bef\\uff01\\\"PopupMenuLite.Menu.getPrevItem(item)\\\"\\u8f93\\u5165\\u7684\\u83dc\\u5355\\u9879\\u4e0d\\u5728\\u672c\\u83dc\\u5355\\u4e2d\\u3002\");return(null);}\nprototype.getLastItem=function(){return(this.getItem(this.getLength()-1));}\nprototype.getAllItems=function(){return this._items;}\nprototype.show=function(event,iWidth,aCoordinate){var thisObj=this;var iLeft=0,iTop=0,iHeight=0;var aItems=this._getItemsToActualShow();this._lastDoneItem=null;event.returnValue=event.result={activeApp:this.getParentApp().getClass()}\nthis.fireEvent(\"_onBeforeShow\");if(this._items.length==0)return;if(!this._loaded)this._load();if(aCoordinate){iLeft=aCoordinate[0];iTop=aCoordinate[1];}else{switch(this.getParentApp().getMode()){case 0:iLeft=event.pageX||(event.clientX+document.body.scrollLeft-document.body.clientLeft);iTop=event.pageY||(event.clientY+document.body.scrollTop-document.body.clientTop);iWidth=Math.max(this._getMinWidth(aItems),iWidth||0);break;case 1:iLeft=HTML.getLeftOnDoc(this.getParentApp()._owner_htmElem);iTop=HTML.getBottomOnDoc(this.getParentApp()._owner_htmElem)+1;iWidth=Math.max(this._getMinWidth(aItems),iWidth||this.getParentApp()._owner_htmElem.offsetWidth);break;}\niLeft+=this._parentApp._offset;iWidth=Math.max(iWidth,this._parentApp._minWidth);iWidth+=this._parentApp._padWidth;}\niHeight=this._getMinHeight(aItems);this._htmlElement.style.left=iLeft+\"px\";this._htmlElement.style.top=iTop+\"px\";this._htmlElement.style.width=(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?iWidth:(iWidth-2))+\"px\";this._htmlElement.style.height=(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?iHeight:(iHeight-2))+\"px\";this._htmlElement.style.display=\"\";this._htmlContainer.style.width=(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?(iWidth-2):(iWidth-6))+\"px\";this._htmlContainer.style.height=(Browser.Engine.trident&&document.compatMode!=\"CSS1Compat\"?(iHeight-2):(iHeight-6))+\"px\";this._showSepLine();this.fireEvent(\"_onShow\");}\nprototype._showSepLine=function(){for(var i=0,iLen=this._items.length-1;i<iLen;i++){if(this._items[i].getTitle()==\"-\"){this._items[i]._htmlElement.style.display=\"block\";}}\nfor(var i=Math.max(0,this._items.length-1);i<this._items.length;i++){if(this._items[i].getTitle()==\"-\"){this._items[i]._htmlElement.style.display=\"none\";}}}\nprototype.hide=function(){if(!this.getDisplayed())return;if(this._htmlElement)this._htmlElement.style.display=\"none\";this.fireEvent(\"_onHide\");}\naddMethod(false,true,\"getVisibleCount\",function(){var count=0;for(var i=0;i<this._items.length;i++){if(!this._items[i].getIsHidden()){count++;}}\nreturn count;});prototype._toHtmlElement=function(){var thisObj=this;if(this._htmlElement)return;this._htmlElement=document.body.appendChild(document.createElement(\"div\"));with(this._htmlElement){className=\"OutsideBox PopupMenu\";setAttribute(\"class\",\"OutsideBox PopupMenu\");with(this._htmlContainer=appendChild(document.createElement(\"div\"))){className=\"InsideBox PopupMenuContent\";setAttribute(\"class\",\"InsideBox PopupMenuContent\");id=\"content\";}\nif(Browser.Engine.trident&&Browser.Engine.version==3){appendChild(document.createElement(\"<iframe frameborder=0 scrolling=no src=\\\"about:blank\\\"\"\n+\" style=\\\"width:100%;height:100%;z-index:-1;left:0;top:0;position:absolute;\\\"\"\n+\" onload=\\\"this.contentWindow.document.body.style.backgroundColor=\"\n+\" this.parentNode.currentStyle.backgroundColor!='transparent'?\"\n+\" this.parentNode.currentStyle.backgroundColor:this.parentNode.firstChild.currentStyle.backgroundColor;\\\"></iframe>\"));}\nonselectstart=function(event){return false;}\noncontextmenu=function(event){return false;}\nonmouseout=function(event){event=event||window.event;var toElement=event.toElement;if(HTML.contains(this,toElement))return;thisObj.fireEvent(\"_onMouseLeave\");}\nonclick=function(event){event=event||window.event;event.cancelBubble=true;}}}\nprototype._load=function(item){if(!this._htmlElement)this._toHtmlElement();if(item==null){if(this._loaded)return;for(var i=0;i<this._items.length;i++){item=this._items[i];item._toHtmlElement();item.refresh();}\nthis._loaded=true;}else{item._toHtmlElement();}}\nprototype._getItemsToActualShow=function(){var flagLastType=-1;var items=[];for(var i=0,iLen=this._items.length;i<iLen;i++){var item=this._items[i];if(item.getIsHidden())continue;if(item.getTitle()!=\"-\"){flagLastType=0;}else if(i>0&&i<(iLen-1)&&flagLastType==0){flagLastType=1;}else{continue;}\nitems[items.length]=item;}\nif(flagLastType==1)items.pop();return items;}\nprototype._getMinWidth=function(aItems){var width=0;for(var i=0;i<aItems.length;i++){var sTitle=Object(aItems[i].getTitle());var length=sTitle.getAsciiCount()+sTitle.getNonAsciiCount()*2;if(length>width)width=length;}\nwidth=3+14+2+width*6+2+12+3;return width;}\nprototype._getMinHeight=function(aItems){var height=6;for(var i=0;i<aItems.length;i++){if(aItems[i].getTitle()==\"-\")height+=6;else height+=18;}\nreturn height;}\naddEventListener(false,false,\"onBeforeShow\",function(){this.getParentApp().fireEvent(\"_onMenuBeforeShow\",this);});addEventListener(false,false,\"onShow\",function(){this.getParentApp().fireEvent(\"_onMenuShowed\",this);});addEventListener(false,false,\"onHide\",function(){this.getParentApp().fireEvent(\"_onMenuHid\",this);});addEventListener(false,false,\"onMouseLeave\",function(){if(this.getParentApp().getIsHideOnMouseLeave()){this.getParentApp().hide();}});addEventListener(false,false,\"onDoAction\",function(oItem){this._lastDoneItem=oItem;this._parentApp.fireEvent(\"_onDoAction\",this);});}\n_$class.Item=function(parentMenu,sTitle,vData,fnAction){this._id=\"\";this._unid=\"\";this._title=\"\";this._action=new Function();this._enabled=true;this._isHidden=false;this._parentMenu=null;this._parentApp=null;this._subMenu=null;this._data;this._htmlElement=null;this._Item(parentMenu,sTitle,vData,fnAction);}\nwith(_$class.Item){$name=\"Item\";$extends(Object);prototype._Item=function(parentMenu,sTitle,vData,fnAction){this._parentMenu=parentMenu;this._parentApp=this._parentMenu.getParentApp();this._unid=\"I\"+(++this._parentApp.__usedIdCount);this._title=sTitle;this._data=vData;if(typeof(fnAction)==\"function\"){this._action=fnAction;}}\nprototype.getId=function(){return this._id||this._unid;}\nprototype.setId=function(value){this._id=value;}\nprototype.getLeft=function(){return this.getParentMenu().getLeft()+3;}\nprototype.getTop=function(){var retValue=this.getParentMenu().getTop()+3;for(var i=0,index=this.getIndex();i<index;i++){retValue+=this.getParentMenu().getItem(i).getHeight();}\nreturn retValue;}\nprototype.getWidth=function(){return this._htmlElement.clientWidth;}\nprototype.getHeight=function(){return this._htmlElement.clientHeight;}\nprototype.getTitle=function(){return this._title;}\nprototype.getEnabled=function(){return this._enabled;}\nprototype.setEnabled=function(value){this._enabled=value;}\nprototype.getIsHidden=function(){return this._isHidden;}\nprototype.setIsHidden=function(value){this._isHidden=value;}\nprototype.getParent=function(){if(!this._parentMenu)return(null);return(this._parentMenu.getOwner());}\nprototype.getParentMenu=function(){return this._parentMenu;}\nprototype.getParentApp=function(){return this._parentApp;}\nprototype.getIndex=function(){for(var i=0,length=this.getParentMenu().getLength();i<length;i++){var item=this.getParentMenu().getItem(i);if(this==item)return i;}}\nprototype.getPosition=function(){return(this.getIndex()+1+\"\");}\nprototype.getHasChildren=function(){if(this._subMenu==null)return false;if(this._subMenu.getLength()==0)return false;return true;}\nprototype.getData=function(){return this._data;}\nprototype.setData=function(value){this._data=value;}\nprototype.getNextSiblingItem=function(){return this.getParentMenu().getNextItem(this);}\nprototype.getPrevSiblingItem=function(){return this.getParentMenu().getPrevItem(this);}\nprototype.refresh=function(){if(!this._htmlElement)return;this._htmlElement.style.color=this._enabled?\"\":\"gray\";if(this.getParentMenu().getUseIcon()){this._htmlElement.all['icon'].style.width=\"16px\";}}\nprototype.activate=function(){this._htmlElement.fireEvent(\"_onActivate\");}\nprototype._toHtmlElement=function(){if(this._htmlElement)return;if(this._title!=\"-\"){this._toHtmlElementForStd();}else{this._toHtmlElementForSep();}}\nprototype._toHtmlElementForStd=function(){var thisObj=this;if(this._isHidden)return;with(this._htmlElement=this.getParentMenu()._htmlContainer.appendChild(document.createElement(\"div\"))){className=\"PopupMenuItem\";setAttribute(\"class\",\"PopupMenuItem\");with(appendChild(document.createElement(\"span\"))){id=\"icon\";innerHTML=this.getParentApp().getClass()._icons[\"blank\"];}\nwith(appendChild(document.createElement(\"span\"))){id=\"title\";innerHTML=\"<span>\"+this._title+\"</span>\";}\nwith(appendChild(document.createElement(\"span\"))){id=\"sub\";innerHTML=this.getParentApp().getClass()._icons[\"blank\"];}\nif(Global.Browser.Platform.ios){ontouchmove=function(event){thisObj.__isMoving=true;}\nontouchend=function(){if(!thisObj.__isMoving){this.onclick();}\nthisObj.__isMoving=false;}}else{onmouseover=function(event){event=event||window.event;try{if(document.selection){if(document.selection.empty){document.selection.empty();}else{document.selection=null;}}else if(window.getSelection){window.getSelection().removeAllRanges();}}catch(e){}\nthisObj.fireEvent(\"_onActivate\",event);}\nonmouseout=function(event){event=event||window.event;thisObj.fireEvent(\"_onDeactivate\",event);}}\nonclick=function(event){event=event||window.event;thisObj.fireEvent(\"_onDoAction\");}\nondblclick=function(){return false;}\nonselectstart=function(){return false;}}}\nprototype._toHtmlElementForSep=function(){with(this._htmlElement=this.getParentMenu()._htmlContainer.appendChild(document.createElement(\"div\"))){className=\"PopupMenuSepLine\";setAttribute(\"class\",\"PopupMenuSepLine\");}}\nprototype._onActivate=function(oEvent){with(this._htmlElement){className=\"PopupMenuItem ActivePopupMenuItem\";setAttribute(\"class\",\"PopupMenuItem ActivePopupMenuItem\");}\nthis.getParentMenu()._activeItem=this;}\nprototype._onDeactivate=function(oEvent){with(this._htmlElement){className=\"PopupMenuItem\";setAttribute(\"class\",\"PopupMenuItem\");}\nthis.getParentMenu()._activeItem=null;}\nprototype._onDoAction=function(oEvent){if(!this._enabled)return;if(this._title==\"\"||this._title==\"-\")return;this.getParentApp()._mainMenu.hide();this._action(this.getParentApp().getOwner());this._parentMenu.fireEvent(\"_onDoAction\",this);}}","js.ui.menu.Outline":"$package(\"js.ui.menu\");var _$path=Engine.runtimeEnvironment.getResPath(\"js.ui.menu\")+\"/Outline\";js.ui.menu.Outline=function(htmlContainer,width,height){this._parent=null;this._id=\"O\"+Math.round(Math.random()*1000);this.style={outline:{width:\"100%\",height:\"100%\"}};this._icon={}\nthis._level=0;this._pathSeparator=\"\\\\\";this._target=\"_self\";this._useCheckbox=false;this._useIcon=false;this._useScroll=false;this._isIgnoreError=false;this._isAllowTitleNonunique=true;this._isAutoCreateItem=false;this._isSelectMode=false;this._isLoadChildrenFromOutside=false;this._htmlElement=null;this._mainmenu=null;this._activeItem=null;this._lastActiveItem=null;this._timer=0;this._delayDoInterval=350;this.__usedIDCount=0;this.__styleNamePrefix=\"jk\";this._Outline(htmlContainer,width,height);}\nvar _$class=js.ui.menu.Outline;var _$proto=_$class.prototype;with(_$class){$name=\"Outline\";$extends(\"Object\");_$class._version=\"1.4.2\";_$class.KeyValue={UP:38,DOWN:40,LEFT:37,RIGHT:39,PAGEUP:33,PAGEDOWN:34,INSERT:45,DELETE:46,ENTER:13,SPACE:32,F1:112,F2:113,PLUS:107,MINUS:109}\n_$class._icon={expand:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/plus.gif\\\">\",collapse:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/minus.gif\\\">\",leaf:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/blank.gif\\\">\",unchecked:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/select1.gif\\\">\",partChecked:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/select2.gif\\\">\",checked:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/select3.gif\\\">\",folder:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/folder.gif\\\">\",openedFolder:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/folderopen.gif\\\">\",file:\"<img align=absmiddle src=\\\"\"+_$path+\"/icons/file.gif\\\">\"};_$class._cache={iconCache:{}};_$class._styleLib={\"std\":_$path+\"/\"+(!Browser.Engine.trident?\"Outline.css\":(document.compatMode==\"CSS1Compat\"?\"Outline.css\":(Browser.Engine.version==3?\"Outline.IE6.css\":\"Outline.IE.css\")))}\n_$class._styleSkin=\"\";_$class._defaultStyleSkin=\"std\";_$class._styleElement=null;_$class._isInstanced=false;prototype._Outline=function(htmlContainer,width,height){this.getClass().fireEvent(\"_onBeforeInstance\",this);if(htmlContainer==null){this._htmlElement=document.createElement(\"div\");}else if(htmlContainer==\"\"){var scripts=document.getElementsByTagName(\"script\");var elScript=scripts[scripts.length-1];this._htmlElement=elScript.insertAdjacentElement(\"beforeBegin\",document.createElement(\"div\"));}else{this._htmlElement=htmlContainer.appendChild(document.createElement(\"div\"));}\nthis.style.outline.width=width==null?\"100%\":width;this.style.outline.height=height==null?\"\":height;this._toHtmlElement();this.getClass().fireEvent(\"_onAppInstanced\",this);}\naddProperty(false,true,\"id\",{\"get\":function(){return this._id;}});addProperty(false,true,\"parent\",{\"get\":function(){return this._parent;}});addProperty(false,true,\"level\",{\"get\":function(){return this._level;}});addProperty(false,true,\"pathSeparator\",{\"get\":function(){return this._pathSeparator;},\"set\":function(value){this._pathSeparator=value;}});addProperty(false,true,\"target\",{\"get\":function(){return this._target;},\"set\":function(value){this._target=value;}});addProperty(false,true,\"hasChildren\",{\"get\":function(){return(this._mainmenu&&this._mainmenu._items.length);}});addProperty(false,true,\"length\",{\"get\":function(){if(!this.getHasChildren())return(0);var length=0;for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){length+=1+this._mainmenu.getItem(i).getLength();}\nreturn(length);}});addProperty(false,true,\"application\",{\"get\":function(){return this;}});addProperty(false,true,\"activeItem\",{\"get\":function(){return(this._activeItem);}});addProperty(false,true,\"useCheckbox\",{\"get\":function(){return this._useCheckbox;},\"set\":function(value){this._useCheckbox=value;}});addProperty(false,true,\"useIcon\",{\"get\":function(){return this._useIcon;},\"set\":function(value){this._useIcon=value;}});addProperty(false,true,\"useScroll\",{\"get\":function(){return this._useScroll;},\"set\":function(value){this._useScroll=value;this._htmlElement.style.overflow=value?\"auto\":\"\";}});addProperty(false,true,\"isIgnoreError\",{\"get\":function(){return this._isIgnoreError;},\"set\":function(value){this._isIgnoreError=value;}});addProperty(false,true,\"children\",{\"get\":function(){if(!this.getHasChildren())return null;return this._mainmenu;}});addProperty(false,true,\"isAllowTitleNonunique\",{\"get\":function(){return this._isAllowTitleNonunique;},\"set\":function(value){this._isAllowTitleNonunique=value;}});addProperty(false,true,\"isAutoCreateItem\",{\"get\":function(){return this._isAutoCreateItem;},\"set\":function(value){this._isAutoCreateItem=value;}});addProperty(false,true,\"isSelectMode\",{\"get\":function(){return this._isSelectMode;},\"set\":function(value){this._isSelectMode=value;}});addProperty(false,true,\"width\",{\"get\":function(){return this._htmlElement.style.pixelWidth;}});addProperty(false,true,\"height\",{\"get\":function(){return this._htmlElement.style.pixelHeight;}});addProperty(false,true,\"contentWidth\",{\"get\":function(){return this._htmlElement.scrollWidth;}});addProperty(false,true,\"contentHeight\",{\"get\":function(){return this._htmlElement.scrollHeight;}});addProperty(false,true,\"htmlElement\",{\"get\":function(){return this._htmlElement;}});addMethod(true,true,\"getIcon\",function(iconName){var icon=this._icon[iconName];if(typeof(icon)==\"object\"){return icon.cloneNode(true);}else{var span=document.createElement(\"SPAN\");span.innerHTML=icon;icon=span.$firstChild||span.firstChild;this._icon[iconName]=icon;return icon.cloneNode(true);}});addMethod(true,true,\"setIcon\",function(iconName,src,isInnerIcon){var _path=Engine.runtimeEnvironment.getResPath(\"js.ui.menu\")+\"/Outline\";this._icon[iconName]=\"<img align=absmiddle src=\\\"\"+(isInnerIcon?(_path+\"/icons/\"):\"\")+src+\"\\\">\";});prototype.getIcon=function(iconName){var icon=this._icon[iconName];if(typeof(icon)==\"object\"){return icon.cloneNode(true);}else if(typeof(icon)==\"undefined\"){this._icon[iconName]=icon=this.getClass().getIcon(iconName);return icon.cloneNode(true);}else{var span=document.createElement(\"span\");span.innerHTML=icon;icon=span.$firstChild||span.firstChild;this._icon[iconName]=icon;return icon.cloneNode(true);}}\nprototype.setIcon=function(iconName,src,isInnerIcon){var _path=Engine.runtimeEnvironment.getResPath(\"js.ui.menu\")+\"/Outline\";this._icon[iconName]=\"<img align=absmiddle src=\\\"\"+(isInnerIcon?(_path+\"/icons/\"):\"\")+src+\"\\\">\";}\nprototype.about=function(){alert(\"Outline for JSDK3 V1.4.2 build 20131012\\n\\n\"\n+\"\\u4f5c\\u8005\\uff1a\\u5218\\u767b\\u9ad8 \\n\"\n+\"\\u90ae\\u7bb1\\uff1afrancklin.liu@gmail.com \\n\"\n+\"\\u4e3b\\u9875\\uff1ahttp://www.tringsoft.com \\n\"\n+\"\\u6d4f\\u89c8\\u5668\\u652f\\u6301\\uff1aIE6+/IE9+/Firefox5+/Chrome14+/Safari5+/Opera11+\");}\nprototype.addItem=function(fullPath,value,icon,openedIcon,url,target,funGetChildrenData){var iPos=fullPath.indexOf(this.getPathSeparator());var OutlineItem=this.getClass().OutlineItem;var OutlineItemsMenu=this.getClass().OutlineItemsMenu;if(iPos<0){var sTitle=fullPath;var newItem=new OutlineItem(this,sTitle,value,icon,openedIcon,url,target,funGetChildrenData);if(this._mainmenu){this._mainmenu.addItem(newItem);}else{this._mainmenu=new OutlineItemsMenu(this,true);this._htmlElement.appendChild(this._mainmenu.toHtmlElement());this._mainmenu.addItem(newItem);}\nreturn(newItem);}else{var sTitle=fullPath.slice(0,iPos);var item=this.getItemByPath(sTitle);if(!item){if(this._isAutoCreateItem){item=this.addItem(sTitle);if(!item)return(null);}else{return(null);}}\nvar newPath=fullPath.slice(iPos+this.getPathSeparator().length);return(item.addItem(newPath,value,icon,openedIcon,url,target,funGetChildrenData));}\nreturn(null);}\nprototype.getItem=function(index){if(!this.getHasChildren())return(null);if(index<0)return(null);for(var item=this.getFirstItem(),i=0;item;item=this.getNextItem(item),i++){if(i==index)return(item);}\nreturn(null);}\nprototype.getItemById=function(id){if(!this.getHasChildren())return(null);for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){var item=this._mainmenu.getItem(i);if(item.getId()==id)return(item);else if(item=item.getItemById(id)){return(item);}}\nreturn(null);}\nprototype.getItemByPath=function(fullPath){if(!this.getHasChildren())return(null);var titles=fullPath.split(this.getPathSeparator());var item=this.getChildren().getItemByTitle(titles[0]);if(titles.length==1)return(item);var newPath=titles.slice(1).join(this.getPathSeparator());return(item.getItemByPath(newPath));}\nprototype.getItemByPosition=function(strPosition){}\nprototype.getAllItems=function(){var items=[];if(!this.getHasChildren())return(items);for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){var item=this._mainmenu.getItem(i);items=items.concat(item,item.getAllItems());}\nreturn items;}\nprototype.getFirstItem=function(){if(!this.getHasChildren())return(null);return(this._mainmenu.getFirstItem());}\nprototype.getNextItem=function(prevItem){if(!this.getHasChildren())return(null);for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){var item=this._mainmenu.getItem(i);if(item.getId()==prevItem.getId()){if(item.getHasChildren())return(item.getFirstItem());else return(this._mainmenu.getItem(i+1));}else if(item.contains(prevItem)){item=item.getNextItem(prevItem);if(item)return(item);else return(this._mainmenu.getItem(i+1));}}\nreturn(null);}\nprototype.getPrevItem=function(nextItem){if(!this.hasChildren)return(null);for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){var item=this._mainmenu.getItem(i);if(item.getId()==nextItem.getId()){item=this._mainmenu.getItem(i-1);if(!item)return(null);else if(!item.getHasChildren())return(item);else return(item.getLastItem());}else if(item.contains(nextItem)){item=item.getPrevItem(nextItem);if(item)return(item);else return(this._mainmenu.getItem(i-1));}}\nreturn(null);}\nprototype.getLastItem=function(){if(!this.getHasChildren())return(null);var item=this._mainmenu.getLastItem();if(!item.getHasChildren())return(item);else return(item.getLastItem());}\nprototype.getAllListedItem=function(){var items=[];if(!this.getHasChildren())return(items);for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){var item=this._mainmenu.getItem(i);items=items.concat(item,item.getAllListedItems());}\nreturn items;}\nprototype.getFirstListedItem=function(){if(!this.getHasChildren())return(null);return(this._mainmenu.getFirstItem());}\nprototype.getNextListedItem=function(curListedItem){if(!curListedItem)curListedItem=this._activeItem;if(!this.getHasChildren())return(null);for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){var item=this._mainmenu.getItem(i);if(item.getId()==curListedItem.getId()){if(item.getExpanded())return(item.getFirstItem());else return(this._mainmenu.getItem(i+1));}else if(item.getExpanded()&&item.contains(curListedItem)){item=item.getNextListedItem(curListedItem);if(item)return item;else return(this._mainmenu.getItem(i+1));}}\nreturn(null);}\nprototype.getPrevListedItem=function(curListedItem){if(!curListedItem)curListedItem=this._activeItem;if(!this.getHasChildren())return(null);for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){var item=this._mainmenu.getItem(i);if(item.getId()==curListedItem.getId()){item=this._mainmenu.getItem(i-1);if(!item)return(null);else if(item.getExpanded())return(item.getLastListedItem());else return(item);}else if(item.getExpanded()&&item.contains(curListedItem)){var tmpItem=item.getPrevListedItem(curListedItem);if(tmpItem)return tmpItem;else return(item);}}\nreturn(null);}\nprototype.getLastListedItem=function(){if(!this.getHasChildren())return(null);var item=this._mainmenu.getLastItem();if(!item.getExpanded())return(item);else{return(item.getLastListedItem());}}\nprototype.getAllVisibleItems=function(){}\nprototype.getFirstVisibleItem=function(){if(!this.getHasChildren())return(null);for(var item=this.getFirstListedItem();item;item=this.getNextListedItem(item)){if(item.getVisible())return(item);}\nreturn null;}\nprototype.getNextVisibleItem=function(curVisibleItem){if(!this.getHasChildren())return(null);for(var item=curVisibleItem;item=this.getNextListedItem(item);){if(item.getVisible())return(item);}\nreturn null;}\nprototype.getPrevVisibleItem=function(curVisibleItem){if(!this.getHasChildren())return(null);for(var item=curVisibleItem;item=this.getPrevListedItem(item);){if(item.getVisible())return(item);}\nreturn null;}\nprototype.getLastVisibleItem=function(){if(!this.getHasChildren())return(null);for(var item=this.getLastListedItem();item;item=this.getPrevListedItem(item)){if(item.getVisible())return(item);}\nreturn null;}\nprototype.getFullPath=function(){return\"\";}\nprototype.activateItem=function(id){var item=this.getItemById(id);if(!item)return;item.activate();return(item);}\nprototype.expandItem=function(id,isExpand,isAll){if(!this.getHasChildren())return(false);var item;if(!id){for(var i=0,iLength=this._mainmenu.getLength();i<iLength;i++){this._mainmenu.getItem(i).expand(isExpand,isAll);}}else{item=this.getItemById(id);if(!item)return(false);item.expand(isExpand,isAll);}}\nprototype.expandAll=function(isExpand){if(isExpand==null)this.expandItem(\"\",false,true);else if(isExpand==true)this.expandItem(\"\",true,true);else if(isExpand==false)this.expandItem(\"\",false,true);}\nprototype.removeAll=function(){this._htmlElement.innerHTML=\"\";this._items=[];this._activeItem=null;this._mainmenu=null;}\nprototype.searchItem=function(keyWord){}\nprototype.refresh=function(){if(!this._htmlElement)return;this._htmlElement.style.color=this.style.color;this._htmlElement.style.backgroundColor=this.style.backgroundColor;if(!this.getHasChildren())return;for(var i=0,length=this.getChildren().getLength();i<length;i++){this.getChildren().getItem(i).refresh();}}\nprototype._toHtmlElement=function(){with(this._htmlElement){id=this._id;className=this.__styleNamePrefix+\"-outline\";style.width=this.style.outline.width;style.height=this.style.outline.height;onactivate=function(){if(this._activeItem&&document.activeElement.id!=\"link\"){}}\nondeactivate=function(){if(this._activeItem){}}\nonkeydown=function(){this.srcObject._onKeyDown(event);return false;}\noncontextmenu=function(){return(false);}\nonselectstart=function(){return(false);}}\nthis._htmlElement.setAttribute(\"srcObject\",this);this._htmlElement.srcObject=this;}\naddMethod(true,true,\"addStyleSkin\",function(sName,sPath){this._styleLib[sName]=sPath;});addMethod(true,true,\"setStyleSkin\",function(sName){this._styleSkin=sName;if(!this._styleElement){var style=this._styleElement=document.createElement(\"link\");style.type=\"text/css\";style.rel=\"stylesheet\";style.href=this._styleLib[sName];document.getElementsByTagName(\"HEAD\")[0].appendChild(style);}else{this._styleElement.style.href=this._styleLib[sName];}});addMethod(true,true,\"fireEvent\",function(sEvent,oEventObject){if(typeof(this[sEvent])!=\"function\")return;try{return this[sEvent](oEventObject);}catch(e){throw new Error(1000,\"Event '\"+sEvent+\"' of object '\"+this.getName()+\"' has been runned error!\\nSource: \"\n+e.description);}});addEventListener(true,false,\"onReady\",function(){if(!this._styleSkin)this.setStyleSkin(this._defaultStyleSkin);this._isInstanced=true;});addEventListener(true,false,\"onBeforeInstance\",function(){if(this._isInstanced)return;this.fireEvent(\"_onReady\");});addEventListener(true,false,\"onAppInstanced\",function(){});addEventListener(false,false,\"onKeyDown\",function(event){with(this.getClass().KeyValue){switch(event.keyCode){case UP:if(!this.getLength())return;if(!this.getActiveItem())return;var item=this.getPrevListedItem()||this.getLastListedItem();item.setActive();item.fireEvent(\"_onDoAction\",this._delayDoInterval);break;case DOWN:if(!this.getLength())return;if(!this.getActiveItem())return;var item=this.getNextListedItem()||this.getFirstListedItem();item.setActive();item.fireEvent(\"_onDoAction\",this._delayDoInterval);break;case LEFT:this.getHtmlElement().scrollLeft-=16;break;case RIGHT:this.getHtmlElement().scrollLeft+=16;break;case PAGEUP:this.pageUp();break;case PAGEDOWN:this.pageDown();break;case INSERT:if(!this.getActiveItem())return;if(event.shiftKey){window.status=\"insertAfter\";return;this.insertItem(this.getActiveItem(),1);}else{window.status=\"insert\";return;this.insertItem();}\nbreak;case DELETE:if(!this.getActiveItem())return;break;case ENTER:if(!this.getActiveItem())return;this.getActiveItem().enter();break;case SPACE:if(!this.getActiveItem())return;if(this.getUseCheckbox()){this.getActiveItem().select();}\nbreak;case F1:break;case F2:if(!this.getActiveItem())return;break;case PLUS:if(!this.getActiveItem())return;if(!this.getActiveItem().getExpanded()){this.getActiveItem().expand();}\nbreak;case MINUS:if(!this.getActiveItem())return;if(this.getActiveItem().getExpanded()){this.getActiveItem().expand(false);}\nbreak;}}});addEventListener(false,false,\"onActivatedItem\",function(oItem){this.fireEvent(\"onActivatedItem\",oItem);});addEventListener(false,false,\"onRemovedChildItem\",function(oItem){if(this._mainmenu)this._mainmenu.removeItem(oItem);});}\n_$class.OutlineItem=function(parent,title,value,icon,openedIcon,url,target,funGetChildrenData){this._parentOutline=parent._parent?parent._parentOutline:parent;this._parent=parent;this._id=++this._parentOutline.__usedIDCount;this._title=title;this._value=value;this._url=\"\";this._target=\"\";this._selectStatus=0;this._icon=icon?icon:\"\";this._openedIcon=openedIcon?openedIcon:\"\";this._submenu=null;this._isLoadChildrenFromOutside=false;this._isLoadedChildren=false;this._getChildrenData=new Function();this._pathOfLoadChildrenData=\"\";this.onClick=null;if(!this._parentOutline._isSelectMode){if(url instanceof Function){this._url=\".\";this.onClick=url;}else{this._url=url;}\nif(url!=null&&target!=null)this._target=target;}else{this._url=undefined;}\nthis._isLoadChildrenFromOutside=(funGetChildrenData instanceof Function)?true:parent._isLoadChildrenFromOutside;if(funGetChildrenData instanceof Function){this._getChildrenData=funGetChildrenData;}else if(this._isLoadChildrenFromOutside){this._getChildrenData=this._parent._getChildrenData;this._pathOfLoadChildrenData=parent._pathOfLoadChildrenData==\"\"?this._title:parent._pathOfLoadChildrenData+this._parentOutline.getPathSeparator()+this._title;}}\nwith(_$class.OutlineItem){$name=\"OutlineItem\";$extends(\"Object\");prototype.getParentOutline=function(){return(this._parentOutline);}\nprototype.getApplication=function(){return this._parentOutline;}\nprototype.getParent=function(){return this._parent;}\nprototype.getRoot=function(){for(var obj=this;;obj=obj._parent){if(!obj._parent._parent)return obj;}\nreturn null;}\nprototype.getId=function(){return(this._id);}\nprototype.getLevel=function(){return this._parent._parent?(this._parent.getLevel()+1):1;}\nprototype.getIndex=function(){return this._index;}\nprototype.getPosition=function(){if(this.getIsRoot())return(1);return(this._parent.getPosition()+\".\"+this._index);}\nprototype.getFullPath=function(){if(this.getIsRoot())return(this._title);return(this._parent.getFullPath()+this._parentOutline.getPathSeparator()+this._title);}\nprototype.getTitle=function(){return(this._title);}\nprototype.setTitle=function(newTitle){if(!newTitle){if(!this._parentOutline.getIsIgnoreError())throw(\"Error! Title is not inputted!\");return;}\nthis._title=newTitle;}\nprototype.getValue=function(){return this._value;}\nprototype.setValue=function(value){this._value=value;}\nprototype.getUrl=function(){if(this._url==null||this._url==\"\"||this._url==\".\")return\"\";return(this._url);}\nprototype.setUrl=function(newUrl){if(newUrl==null){this._url=\"javascript:void(0)\";}else if(newUrl.constructor==String){if(newUrl==\"\"){this._url=\"javascript:__JSDK_Namespace__.Outline.all['\"+this.getParentOutline().getId()+\"'].expandItem('\"+this._id+\"')\";}else{this._url=newUrl;}}else if(newUrl.constructor==Function){this.OnClick=newUrl;this._url=\"javascript:__JSDK_Namespace__.Outline.all['\"+this.getParentOutline().getId()+\"'].getItemById('\"+this._id+\"').OnClick()\";}}\nprototype.getTarget=function(){if(this._target==\"\"){return this._parentOutline.getTarget();}\nreturn(this._target);}\nprototype.setTarget=function(value){this._target=value;if(this._htmlElement){Global.dom(\"#link\",this._htmlElement.$firstChild||this._htmlElement.firstChild)[0].target=this.getTarget();}}\nprototype.getIsRoot=function(){return this._parent._parent?false:true;}\nprototype.getHasChildren=function(){if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren)return true;return(this._submenu&&this._submenu._items.length)?true:false;}\nprototype.getLength=function(){if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){this._loadChildren();}\nif(!this.getHasChildren())return(0);var length=this._submenu.getLength();for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){length+=this._submenu.getItem(i).getLength();}\nreturn(length);}\nprototype.getExpanded=function(){if(!this.getHasChildren()){return(false);}else{return this._submenu?this._submenu.getDisplayed():false;}}\nprototype.getChildren=function(){return(this._submenu);}\nprototype.getVisible=function(){if(!this.isListedForOutline())return false;if(this._htmlElement.offsetTop-this.getParentOutline().getHtmlElement().scrollTop\n>=this.getParentOutline().getHtmlElement().clientHeight){return false;}else if(this._htmlElement.offsetTop+(this._htmlElement.$firstChild||this._htmlElement.firstChild).offsetHeight\n-this.getParentOutline().getHtmlElement().scrollTop<0){return false;}else{return true;}}\nprototype.getVisibleArea=function(){if(!this._htmlElement)return false;}\nprototype.getSelectStatus=function(){return this._selectStatus;}\nprototype.addItem=function(relPath,value,icon,openedIcon,url,target,funGetChildrenData){var pathSeparator=this._parentOutline.getPathSeparator();var iPos=relPath.indexOf(pathSeparator);var OutlineItem=this.getClass();var OutlineItemsMenu=this.getParentOutline().getClass().OutlineItemsMenu;if(iPos<0){var sTitle=relPath;var newItem=new OutlineItem(this,sTitle,value,icon,openedIcon,url,target,funGetChildrenData);if(this._submenu){this._submenu.addItem(newItem);}else{this._submenu=new OutlineItemsMenu(this,false,16);this._submenu.addItem(newItem);if(this._htmlElement)this._applyProperty(\"hasChildren\");}\nreturn(newItem);}else{var sTitle=relPath.slice(0,iPos);var item=this.getItemByPath(sTitle);if(!item){if(this._parentOutline._isAutoCreateItem){item=this.addItem(sTitle);}else{return(null);}}\nvar newPath=relPath.slice(iPos+pathSeparator.length);return(item.addItem(newPath,value,icon,openedIcon,url,target,funGetChildrenData));}}\nprototype.getItem=function(index){if(index<0)return(null);if(!this.getHasChildren())return(null);for(var item=this.getFirstItem(),i=0;item;item=this.getNextItem(item),i++){if(i==index)return(item);}\nreturn(null);}\nprototype.getItemById=function(id){if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){this._loadChildren();}\nif(!this.getHasChildren())return(null);for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){var item=this._submenu.getItem(i);if(item.getId()==id)return(item);else if(item=item.getItemById(id)){return(item);}}\nreturn(null);}\nprototype.getItemByPath=function(relPath){if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){this._loadChildren();}\nif(!this.getHasChildren())return(null);var titles=relPath.split(this._parentOutline.getPathSeparator());var item=this._submenu.getItemByTitle(titles[0]);if(titles.length==1)return(item);var newPath=titles.slice(1).join(this._parentOutline.getPathSeparator());return(item.getItemByPath(newPath));}\nprototype.getFirstItem=function(){if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){this._loadChildren();}\nif(!this.getHasChildren())return(null);return(this._submenu.getItem(0));}\nprototype.getNextItem=function(prevItem){if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){this._loadChildren();}\nif(!this.getHasChildren())return(null);for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){var item=this._submenu.getItem(i);if(item.getId()==prevItem.getId()){if(item.getHasChildren())return(item.getFirstItem());else return(this._submenu.getItem(i+1));}else if(item.contains(prevItem)){item=item.getNextItem(prevItem);if(item)return(item);else return(this._submenu.getItem(i+1));}}\nreturn(null);}\nprototype.getPrevItem=function(nextItem){if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){this._loadChildren();}\nif(!this.getHasChildren())return(null);for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){var item=this._submenu.getItem(i);if(item.getId()==nextItem.getId()){item=this._submenu.getItem(i-1);if(!item)return(null);else if(!item.getHasChildren())return(item);else return(item.getLastItem());}else if(item.contains(nextItem)){item=item.getPrevItem(nextItem);if(item)return(item);else return(this._submenu.getItem(i-1));}}\nreturn(null);}\nprototype.getLastItem=function(){if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){this._loadChildren();}\nif(!this.getHasChildren())return(null);var item=this._submenu.getLastItem();if(!item.getHasChildren())return(item);else return(item.getLastItem());}\nprototype.getAllItems=function(){var items=[];if(!this.getHasChildren())return(items);for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){var item=this._submenu.getItem(i);items=items.concat(item,item.getAllItems());}\nreturn(items);}\nprototype.getFirstListedItem=function(){if(!this.getExpanded())return null;return(this._submenu.getFirstItem());}\nprototype.getNextListedItem=function(curListedItem){if(!this.getExpanded())return null;for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){var item=this._submenu.getItem(i);if(item.getId()==curListedItem.getId()){if(item.getExpanded())return(item.getFirstItem());else return(this._submenu.getItem(i+1));}else if(item.getExpanded()&&item.contains(curListedItem)){item=item.getNextListedItem(curListedItem);if(item)return item;else return(this._submenu.getItem(i+1));}}\nreturn(null);}\nprototype.getPrevListedItem=function(curListedItem){if(!this.getExpanded())return(null);for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){var item=this._submenu.getItem(i);if(item.getId()==curListedItem.getId()){item=this._submenu.getItem(i-1);if(!item)return(null);else if(item.getExpanded())return(item.getLastListedItem());else return(item);}else if(item.getExpanded()&&item.contains(curListedItem)){var tmpItem=item.getPrevListedItem(curListedItem);if(tmpItem)return tmpItem;else return(item);}}\nreturn(null);}\nprototype.getLastListedItem=function(){if(!this.getExpanded())return(null);var item=this._submenu.getLastItem();if(!item.getExpanded())return(item);else{return(item.getLastListedItem());}}\nprototype.getAllListedItem=function(){var items=[];if(!this.getHasChildren())return(items);for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){var item=this._submenu.getItem(i);items=items.concat(item,item.getAllListedItems());}\nreturn items;}\nprototype.remove=function(){this._parent.fireEvent(\"_onRemovedChildItem\",this);}\nprototype.isListed=function(){if(this.getLevel()>1){return this.getParent().getExpanded();}else{return true;}}\nprototype.isListedFor=function(parentLevel){if(this.getLevel()==1){return true;}else if(parentLevel<=0){return this.isListedFor(this.getLevel()+parentLevel);}else if(parentLevel==1){return this.isListed();}else if(!this.isListed()){return false;}else{return this.getParent().isListedFor(parentLevel-1);}}\nprototype.isListedForOutline=function(){return this.isListedFor(0);}\nprototype.scrollIntoView=function(){if(!this.getListed())return;this._htmlElement.scrollIntoView();}\nprototype.scrollToViewTop=function(){if(!this.getListed())return;if(this._htmlElement.offsetParent!=this.getParentOutline().getHtmlElement())return;}\nprototype.scrollToViewBottom=function(){}\nprototype.activate=function(){for(var item=this;item.getParent().getLevel()>0;){item=item.getParent();if(!item.getExpanded())item.expand();}\nif(this.getParentOutline().getActiveItem()){this.getParentOutline().getActiveItem().fireEvent(\"_onDeactivate\");}\nthis.fireEvent(\"_onActivate\");}\nprototype.setActive=function(){if(this.getParentOutline().getActiveItem()){this.getParentOutline().getActiveItem().fireEvent(\"_onDeactivate\");}\nthis.fireEvent(\"_onActivate\",false);}\nprototype.select=function(status,isSelectAll){if(arguments.length==0){switch(this._selectStatus){case 0:status=2;break;case 1:status=2;break;case 2:status=0;break;}\nisSelectAll=true;}\nthis._selectStatus=status;var parentMenu=this.getIsRoot()?this._parent._mainmenu:this._parent._submenu;if(parentMenu&&parentMenu._loaded){this._applyProperty(\"selectStatus\");}\nif(arguments.length<=1&&this.getLevel()>1){var item=this.getParent();for(var i=0,item2,flag=-1,iLength=item.getChildren().getLength();i<iLength;i++){item2=item.getChildren().getItem(i);if(flag!=-1&&item2._selectStatus!=flag){flag=1;break;}\nflag=item2._selectStatus;}\nitem.select(flag);}\nif(isSelectAll&&this.getHasChildren()){for(var i=0,iLength=this.getChildren().getLength();i<iLength;i++){var item=this.getChildren().getItem(i);item.select(this._selectStatus,true);}}}\nprototype.expand=function(isExpand,isAll){if(!this.getHasChildren())return(false);if(!this.getExpanded()&&(isExpand==null||isExpand==true)){if(!this.isListedFor(1))this.getParent().expand(true);if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){this._loadChildren();if(!this.getHasChildren())return(null);}\nif(!this._submenu._loaded)this._htmlElement.appendChild(this._submenu.toHtmlElement());this._submenu.display(isExpand);}else if(!this._submenu._loaded){return;}else{this._submenu.display(isExpand);}\nthis._applyProperty(\"expanded\");if(isExpand!=null&isAll!=null){for(var i=0,iLength=this._submenu.getLength();i<iLength;i++){this._submenu.getItem(i).expand(isExpand,isAll);}}}\nprototype.enter=function(){if(!this._htmlElement)return;if(this._url==\"\"){}else if(this._url==\"-\"){this.expand();}else if(this._url==\".\"){this._onClick();}else{window.open(Global.dom(\"#link\",this._htmlElement.$firstChild||this._htmlElement.firstChild)[0].href,this.getTarget());}}\nprototype.contains=function(item){return(this.getItemById(item.getId())?true:false);}\nprototype.refresh=function(){if(!this._htmlElement)return(false);var thisElement=this._htmlElement.$firstChild||this._htmlElement.firstChild;var oLink=Global.dom(\"#link\",thisElement)[0];oLink.innerText=this._title;if(this.getUrl())oLink.href=this._url;oLink.target=this.getTarget();{var elButton=Global.dom(\"#button\",thisElement)[0];elButton.innerText=\"\";if(!this.getHasChildren()){elButton.appendChild(this._parentOutline.getIcon(\"leaf\"));}else{elButton.appendChild(this._parentOutline.getIcon(this.getExpanded()?\"collapse\":\"expand\"));}\nif(this._parentOutline._useIcon){{var elIcon=Global.dom(\"#icon\",thisElement)[0];if(this._icon==\"\"){elIcon.innerText=\"\";if(!this.getHasChildren()){elIcon.appendChild(this._parentOutline.getIcon(\"file\"));}else if(!this.getExpanded()){elIcon.appendChild(this._parentOutline.getIcon(\"folder\"));}else{elIcon.appendChild(this._parentOutline.getIcon(\"openedFolder\"));}}else{if(!this.getHasChildren()){elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._icon+\"\\\">\";}else if(!this.getExpanded()){elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._icon+\"\\\">\";}else{if(this._openedIcon==\"\"){elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._icon+\"\\\">\";}else{elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._openedIcon+\"\\\">\";}}}}}}\nif(this._parentOutline._useCheckbox){var elCheckBox=Global.dom(\"#checkbox\",thisElement)[0];elCheckBox.innerText=\"\";switch(this._selectStatus){case 0:elCheckBox.appendChild(this._parentOutline.getIcon(\"unchecked\"));break;case 1:elCheckBox.appendChild(this._parentOutline.getIcon(\"partChecked\"));break;case 2:elCheckBox.appendChild(this._parentOutline.getIcon(\"checked\"));break;}}}\nprototype.toHtmlElement=function(){if(this._htmlElement)return(this._htmlElement);var htmlElement=this.getParentOutline().getClass()._cache['_OutlineItem_htmlElement'];var _prefix=this._parentOutline.__styleNamePrefix;if(!htmlElement){with(htmlElement=document.createElement(\"div\")){className=_prefix+\"-outlineitem-outer\";innerHTML=['<div class=\"'+_prefix+'-outlineitem\" nowrap>','<span id=button onmousedown=\"this.parentNode.parentNode.srcObject.expand()\"></span>','<span id=checkbox onmousedown=\"this.parentNode.parentNode.srcObject.select()\"></span>','<span id=icon></span>','<a id=link href=\"javascript:void(0)\" target=\"\"',(Browser.Engine.trident&&Browser.Engine.version==3?\"\":\" hidefocus=\\\"true\\\"\"),(!Browser.Engine.trident?' onmousedown':' onmousedown')+'=\"this.parentNode.parentNode.srcObject.setActive()\"',' onmouseover=\"this.parentNode.parentNode.srcObject.fireEvent(\\'_onMouseOver\\')\"',' onmouseout=\"this.parentNode.parentNode.srcObject.fireEvent(\\'_onMouseOut\\')\"',' ondeactivate3=\"this.parentNode.parentNode.srcObject.fireEvent(\\'_onDeactivate\\')\"',' onclick=\"return this.parentNode.parentNode.srcObject.fireEvent(\\'_onClick\\')\"',' ondblclick=\"this.parentNode.parentNode.srcObject.fireEvent(\\'_onDblClick\\')\"','>','</a>','</div>'].join(\"\");}\nthis.getParentOutline().getClass()._cache['_OutlineItem_htmlElement']=htmlElement;}\nthis._htmlElement=htmlElement.cloneNode(true);this._htmlElement.setAttribute(\"srcObject\",this);this._htmlElement.srcObject=this;return this._htmlElement;}\nprototype.applyHtmlElement=function(){}\nprototype._applyProperty=function(propertyName){if(!this._htmlElement)return;var thisElement=this._htmlElement.$firstChild||this._htmlElement.firstChild;switch(propertyName){case\"icon\":var elIcon=thisElement.all['icon'];if(this._icon==\"\"){elIcon.innerText=\"\";if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){elIcon.appendChild(this._parentOutline.getIcon(\"folder\"));}else if(!this.getHasChildren()){elIcon.appendChild(this._parentOutline.getIcon(\"file\"));}else if(!this.getExpanded()){elIcon.appendChild(this._parentOutline.getIcon(\"folder\"));}else{elIcon.appendChild(this._parentOutline.getIcon(\"openedFolder\"));}}else{if(this._isLoadChildrenFromOutside&&!this._isLoadedChildren){elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._icon+\"\\\">\";}else if(!this.getHasChildren()){elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._icon+\"\\\">\";}else if(!this.getExpanded()){elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._icon+\"\\\">\";}else{if(this._openedIcon==\"\"){elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._icon+\"\\\">\";}else{elIcon.innerHTML=\"<img align=absmiddle src=\\\"\"+this._openedIcon+\"\\\">\";}}}\nbreak;case\"title\":thisElement.all['link'].innerText=this._title;break;case\"url\":if(this.getUrl())thisElement.all['link'].href=this._url;break;case\"target\":thisElement.all['link'].target=this.getTarget();break;case\"hasChildren\":var elButton=thisElement.all['button'];elButton.innerText=\"\";if(!this.getHasChildren()){elButton.appendChild(this._parentOutline.getIcon(\"leaf\"));}else{elButton.appendChild(this._parentOutline.getIcon(\"expand\"));}\nif(this._parentOutline._useIcon){this._applyProperty(\"icon\");}\nbreak;case\"expanded\":var elButton=thisElement.all['button'];elButton.innerText=\"\";if(!this.getExpanded()){elButton.appendChild(this._parentOutline.getIcon(\"expand\"));}else{elButton.appendChild(this._parentOutline.getIcon(\"collapse\"));}\nif(this._parentOutline._useIcon){this._applyProperty(\"icon\");}\nbreak;case\"selectStatus\":var elCheckBox=thisElement.all['checkbox'];elCheckBox.innerText=\"\";switch(this._selectStatus){case 0:elCheckBox.appendChild(this._parentOutline.getIcon(\"unchecked\"));break;case 1:elCheckBox.appendChild(this._parentOutline.getIcon(\"partChecked\"));break;case 2:elCheckBox.appendChild(this._parentOutline.getIcon(\"checked\"));break;}}}\nprototype._loadChildren=function(){if(this._isLoadedChildren)return;var children=this._getChildrenData(this._pathOfLoadChildrenData);for(var i=0;i<children.length;i++){this.addItem.apply(this,children[i]);}\nthis._isLoadedChildren=true;if(!this.getHasChildren()){this._applyProperty(\"hasChildren\");}}\nprototype._onActivate=function(isDoAction){var _prefix=this._parentOutline.__styleNamePrefix;this._htmlElement.firstChild.className=_prefix+\"-outlineitem \"+_prefix+\"--active\";this.getParentOutline()._activeItem=this;if(Browser.Engine.trident)Global.dom(\"#link\",this._htmlElement)[0].focus();if(isDoAction||isDoAction==undefined){this.fireEvent(\"_onDoAction\",1);}}\nprototype._onDoAction=function(iTime){var _this=this;clearTimeout(this._parentOutline._timer);this._parentOutline._timer=setTimeout(function(){if(iTime){if(_this.onClick)_this.onClick();else if(_this._url.length>1){window.open(_this._url,_this.getTarget());}}\n_this.getParentOutline().fireEvent(\"_onActivatedItem\",_this);if(_this._target==\"_blank\"&&_this.getParentOutline()._lastActiveItem)_this.getParentOutline()._lastActiveItem.setActive();},iTime||0);}\nprototype._onMouseOver=function(){var _prefix=this._parentOutline.__styleNamePrefix;var node=this._htmlElement.firstChild;node.className=node.className.split(\" \").include(_prefix+\"--hover\").join(\" \");}\nprototype._onMouseOut=function(){var _prefix=this._parentOutline.__styleNamePrefix;var node=this._htmlElement.firstChild;node.className=node.className.split(\" \").erase(_prefix+\"--hover\").join(\" \");}\nprototype._onDeactivate=function(){var _prefix=this._parentOutline.__styleNamePrefix;this._htmlElement.firstChild.className=_prefix+\"-outlineitem\";this.getParentOutline()._lastActiveItem=this;}\nprototype._onSelect=function(){}\nprototype._onExpandCollapse=function(){}\nprototype._onExpand=function(){}\nprototype._onCollapse=function(){}\nprototype._onPropertyChange=function(oEvent){switch(oEvent.propertyName){case\"title\":this._htmlElement.all['link'].innerText=this._title;break;case\"length\":}}\nprototype._onClick=function(){var ret;switch(this._url){case undefined:ret=false;break;case\"\":this.expand();ret=false;break;case\".\":this.onClick();break;default:}\nthis.fireEvent(\"_onDoAction\");return ret;}\nprototype._onDblClick=function(){if(this._parentOutline._isSelectMode)return;this.expand();}\nprototype._onRemovedChildItem=function(oItem){if(this._submenu)this._submenu.removeItem(oItem);}}\n_$class.OutlineItemsMenu=function(owner,isDisplay,indentation){this._ownerOutline=owner._parent?owner._parentOutline:owner;this._owner=owner;this._loaded=false;this._displayed=false;this._indentation=indentation?indentation:0;this._htmlElement=null;this._items=[];if(isDisplay)this.display(true);}\nwith(_$class.OutlineItemsMenu){$name=\"OutlineItemsMenu\";$extends(\"Object\");prototype.getOwnerOutline=function(){return this._ownerOutline;}\nprototype.getOwner=function(){return(this._owner);}\nprototype.getDisplayed=function(){return(this._displayed);}\nprototype.getLength=function(){return(this._items.length);}\nprototype.addItem=function(newItem){if(!this._ownerOutline._isAllowTitleNonunique){if(this.getItemByTitle(newItem.getTitle())){if(!this._ownerOutline._isIgnoreError()){throw new Error(\"Error! Menu item titled '\"+newItem.getTitle()+\"' already exists in current menu, please keep the title of menu item is unique!\");}\nreturn(null);}}\nthis._items[this._items.length]=newItem;newItem._index=this._items.length-1;if(this._loaded)this.load(newItem);return(newItem);}\nprototype.getItem=function(index){if(index<0)return(null);else if(index>this.getLength()-1){return(null);}else{return(this._items[index]);}}\nprototype.getItemById=function(id){for(var i=0;i<this.getLength();i++){var item=this.getItem(i);if(item.getId()==id)return(item);}\nreturn(null);}\nprototype.getItemByTitle=function(title){for(var i=0;i<this.getLength();i++){var item=this.getItem(i);if(item.getTitle()==title)return(item);}\nreturn(null);}\nprototype.getFirstItem=function(){return(this.getItem(0));}\nprototype.getNextItem=function(item){for(var i=0,len=this.getLength()-1;i<len;i++){if(this.getItem(i).getId()==item.getId()){return this.getItem(i+1);}}\nreturn null;}\nprototype.getPrevItem=function(item){for(var i=1,len=this.getLength();i<len;i++){if(this.getItem(i).getId()==item.getId()){return this.getItem(i-1);}}\nreturn null;}\nprototype.getLastItem=function(){return(this.getItem(this.getLength()-1));}\nprototype.getAllItems=function(){return this._items;}\nprototype.removeItem=function(item){for(var i=0;i<this.getLength();i++){var oItem=this.getItem(i);if(oItem.getId()==item.getId()){if(this._htmlElement&&item._htmlElement){this._htmlElement.removeChild(item._htmlElement);}\nthis._items.removeElement(i);break;}}\nreturn this;}\nprototype.toHtmlElement=function(){if(this._htmlElement)return(this._htmlElement);var _prefix=this._ownerOutline.__styleNamePrefix;this._htmlElement=document.createElement(\"div\");with(this._htmlElement){className=_prefix+\"-outlineitemsmenu\";style.display=\"none\";style.marginLeft=this._indentation+\"px\";}\nreturn(this._htmlElement);}\nprototype.load=function(item){if(!this._htmlElement)this.toHtmlElement();if(!item){if(this._loaded)return(false);for(var i=0;i<this._items.length;i++){item=this._items[i];this._htmlElement.appendChild(item.toHtmlElement());item.refresh();}\nthis._loaded=true;}else{this._htmlElement.appendChild(item.toHtmlElement());item.refresh();}}\nprototype.display=function(isDisplay){if(isDisplay==null){this._displayed=!this._displayed;}else if(isDisplay==true){this._displayed=isDisplay;}else if(isDisplay==false){this._displayed=isDisplay;}else{return(false);}\nif(this._displayed&&!this._loaded){this.load();}\nif(this._htmlElement){this._htmlElement.style.display=this._displayed?\"\":\"none\";}}\nprototype.refresh=function(){}}\njs.ui.menu.Outline.OutlineItemsCollection=function(vItems){this._items=[];this._point=0;if(vItems instanceof Array){this._items=vItems;this._loadFinished=true;}else if(vItems instanceof Function){this._fNextItem=vItems;this._loadFinished=false;}}\nwith(_$class.OutlineItemsCollection){$name=\"OutlineItemsCollection\";$extends(\"Object\");prototype.getLength=function(){if(this._loadFinished){return this._items.length;}else{for(var item,i=0;;i++){item=this._fNextItem();if(!item){this._loadFinished=true;return i;}\nthis._items[i]=item;}}}\nprototype.getItem=function(index){if(index<0)return(null);else if(index>this._items.length-1){return(null);}else{return(this._items[index]);}}\nprototype.getNextItem=function(){if(this._loadFinished){if(this._point<this._items.length)return this._items[this._point++];else return null;}else{var item=this._fNextItem();if(!item){this._loadFinished=true;return null;}else{this._items[this._items.length]=item;this._point++;return item;}}}}"}}
}
});
